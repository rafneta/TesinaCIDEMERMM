<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Rafael Martínez Martínez" />


<title>Estiamcion</title>

<script src="site_libs/header-attrs-2.5/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="estilo.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Tesina CIDE-ME Rafael Martínez-Martínez</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Estimacion.html">Estimación</a>
</li>
<li>
  <a href="ESRU2017.html">Datos ESRU - EMOVI 2017</a>
</li>
<li>
  <a href="MMSI2016.html">Datos MMSI 2016</a>
</li>
<li>
  <a href="ENIGH2016.html">Datos ENIGH 2016</a>
</li>
<li>
  <a href="hijos.html">Ingreso Hijos </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Estiamcion</h1>
<h4 class="author">Rafael Martínez Martínez</h4>

</div>


<pre class="r"><code>library(tidyverse)
library(haven) # importa, entre otros software, de Stata
library(sjlabelled) # manejar labels de las variables 
library(openxlsx) # leer archivos de excel
library(DT) # visualizar a tablas
library(data.table) # convertir a tablas
library(highcharter) # gráficas interactivas
library(foreign)</code></pre>
<div id="funciones-de-carga" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Funciones de carga</h1>
<pre class="r"><code>cargar_esru&lt;- function(){

return(read_stata(
                     path = &quot;Datos/ESRU-EMOVI-2017/ESRU-EMOVI-2017-Entrevistado.dta&quot;,
                     atomic.to.fac = TRUE,
                     enc = NULL,
                     ))
}</code></pre>
<pre class="r"><code>cargar_enigh&lt;- function(docu){

return(read_stata(
                     path = paste(&quot;Datos/ENIGH-2016/&quot;,docu,&quot;.dta&quot;,sep=&quot;&quot;),
                     atomic.to.fac = TRUE,
                     enc = NULL,
                     ))
}

cargar_enigh_sav&lt;- function(docu){

return(read_spss(
                     path = paste(&quot;Datos/ENIGH-2016/&quot;,docu,&quot;.sav&quot;,sep=&quot;&quot;),
                     atomic.to.fac = TRUE,
                     enc = NULL,
                     ))
}</code></pre>
</div>
<div id="filtrar-hijos-esru" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Filtrar hijos ESRU</h1>
<div id="creamos-per-movilidad" class="section level2" number="2.1">
<h2 number="2.1"><span class="header-section-number">2.1</span> Creamos per movilidad</h2>
<pre class="r"><code>data_emovi2017&lt;-cargar_esru()

data_emovi2017&lt;-data_emovi2017%&gt;%
  mutate(mov = ifelse(p147&gt;p148,&quot;mejor&quot;,
                      ifelse(p147&lt;p148,&quot;peor&quot;,&quot;igual&quot;)),
         id_ho = as.integer(row.names(data_emovi2017)))
data_emovi2017$mov&lt;-set_labels(
                          data_emovi2017$mov,
                          labels = c(&quot;mejor&quot; = &quot;mejor&quot;,
                                     &quot;peor&quot; = &quot;peor&quot;,
                                     &quot;igual&quot; = &quot;igual&quot;))</code></pre>
</div>
<div id="cramos-cohort" class="section level2" number="2.2">
<h2 number="2.2"><span class="header-section-number">2.2</span> Cramos cohort</h2>
</div>
<div id="seleccion-de-hijos" class="section level2" number="2.3">
<h2 number="2.3"><span class="header-section-number">2.3</span> seleccion de hijos</h2>
<p>Criterios de filtrado - pregunta p2, comparten el mimso gasto para comer: 1 ) Si 2 ) No - pregunta 5 Edades entre 25 y 45 años - pregunta p08, es el jefe del hogar: 1 ) jefe 2) cónyuge NO IMPLEMENTADO - pregunta p12, actualmente estudia, 1)Si 2)No - p26 Había un jefe de hogar en la infancia (1 padre 2 madre) - p43 y p43m Reporta educación del padre o madre priciapl - p68, Personas que trabajan, 1. Si, 2. No - p69 si trabaja pero la semana pasada no - p132 numero de personas que aportan ingreso - p133 cohort de todas las personas y todos los ingresos (1 ingreso)</p>
<p>Variables de selección para estimar ingreso</p>
<ul>
<li><p>Estado</p></li>
<li><p>pregunta 5, edad</p></li>
<li><p>pregunta 6, sexo</p></li>
<li><p>Pregunta 13, nivel de escuela</p></li>
<li><p>p76 ocupación –SINCO3 codificación ocupación entrevistado</p></li>
<li><p>p133 cohort de todas las personas y todos los ingresos</p></li>
</ul>
<pre class="r"><code># pensamos que los datos se leeen como factores cando corresponda, si se leen como enteros no debe hacerse el casting
#data_emovi2017&lt;-datos_e
hijos &lt;- data_emovi2017 %&gt;%
  filter(p02 == 1)  %&gt;% #compartir gasot para comer
  filter(between(p05,25,40)) %&gt;% # edad
  #filter(p08 == 1)  %&gt;% 
  filter(p12 == 2)  %&gt;% # ya no estudia
  filter(p26 == 1 | p26==2 ) %&gt;% # sosten principal papa, mama, 
   filter((!is.na(p43) &amp; p43!=98 &amp; p26 == 1 ) |
            (!is.na(p43m) &amp; p43m!=98  &amp; p26 == 2 )) %&gt;% # reporta educación de pp
   filter(!is.na(p13))%&gt;% #  reporta educación
  filter(SINCO3 !=&quot;&quot;) %&gt;%# reporta oficio actual
   filter(p68 == 1 | p69 == 1)  %&gt;% # si trabaja
   filter(p132 %in% c(1)) %&gt;%# persona que aportan ingreso
  filter(!p133 %in% c(8,9,NA) ) # reporta ingresos
                                # no estan los ingresos  hogar aislados. 

#edad_promedio_padres &lt;- mean(hijos$p38_11, na.rm = TRUE)
#edad_promedio_padres-21

str(hijos$p02)

unique(hijos$p43)</code></pre>
</div>
<div id="hijos-seleccionados" class="section level2" number="2.4">
<h2 number="2.4"><span class="header-section-number">2.4</span> hijos seleccionados</h2>
<p>Hacemos un cohort del 1 y el 2</p>
<pre class="r"><code>var&lt;-c(&quot;Estado&quot;,&quot;p05&quot;,&quot;p06&quot;,&quot;p13&quot;,&quot;SINCO3&quot;,&quot;p133&quot;,&quot;mov&quot;,&quot;id_ho&quot;,&quot;region&quot;)
hijos_para_sal&lt;-hijos%&gt;%
  select(var)%&gt;%
  mutate(p133 = ifelse(p133==1,2,p133)-1)# juntamos el cohort 1 y 2 

hijos_para_sal &lt;- hijos_para_sal%&gt;%
            mutate(estrato = ifelse(p133 %in% c(1,2),1,
                                    ifelse(p133 %in% c(3),2,
                                           ifelse(p133 %in% c(4,5),3,4))))


#sum(hijos_para_sal$p133==1)

nrow(hijos_para_sal)
saveRDS(hijos_para_sal, file=&quot;Datos/hijos_emovi2017.Rda&quot;)</code></pre>
</div>
</div>
<div id="hijos-construcción-ingresos" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Hijos construcción ingresos</h1>
<pre class="r"><code>poblacion_e16&lt;-cargar_enigh_sav(&quot;poblacion&quot;) 
trabajos_e16&lt;-cargar_enigh_sav(&quot;trabajos&quot;)
ingresos_e16&lt;-cargar_enigh_sav(&quot;ingresos&quot;)</code></pre>
<div id="poblacion-enigh-16" class="section level2" number="3.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> poblacion enigh 16</h2>
<pre class="r"><code>poblacion_e16f&lt;- poblacion_e16%&gt;%
  #filter(asis_esc == &quot;2&quot;)%&gt;% # ya no asiste a la escuela
  select(folioviv,foliohog,numren,sexo,edad,nivelaprob)%&gt;%
  filter(between(as.integer(edad),25,40))
# no filtramos por jefe de hogar

nrow(poblacion_e16f)
sum(is.na(poblacion_e16f))</code></pre>
</div>
<div id="trabajos-enigh-16" class="section level2" number="3.2">
<h2 number="3.2"><span class="header-section-number">3.2</span> trabajos enigh 16</h2>
<p>Filtrams los trabajos</p>
<pre class="r"><code>trabajos_e16f&lt;-trabajos_e16%&gt;%
select(folioviv,foliohog,numren)#%&gt;%
 # filter(!is.na(sinco))
NROW(trabajos_e16f)
#NROW(trabajos)
sum(is.na(trabajos_e16f))</code></pre>
</div>
<div id="ingresos-enigh-2016" class="section level2" number="3.3">
<h2 number="3.3"><span class="header-section-number">3.3</span> Ingresos enigh 2016</h2>
<pre class="r"><code>familias_integrantes_e16 &lt;- function(df,folhog,nr){
  dfn &lt;- df %&gt;%
    filter(foliohog %in% folhog)%&gt;%
    filter(numren %in% nr)
  return(dfn)
} 



ingresos_acu_e16 &lt;- function(df,clavs=get_labels(ingresos_e16$clave)){
 dfn &lt;- df %&gt;%
   group_by(folioviv, foliohog, numren) %&gt;%
   filter(clave %in% clavs)%&gt;%
   summarise(
   claves_a = paste(clave,collapse = &quot;,&quot;),
  ing_tri_t = sum(ing_tri),
  ing_men_p = ing_tri_t/3
  ) %&gt;% ungroup()
 
 
 return(dfn)
}

hogares &lt;- c(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;)
personas_h &lt;- c(&#39;01&#39;,&#39;02&#39;,&#39;03&#39;,&#39;04&#39;,&#39;05&#39;)

a&lt;-familias_integrantes_e16(ingresos_e16,hogares,personas_h)
head(a)
claves&lt;-c(&quot;P001&quot;,&quot;P002&quot;,&quot;P003&quot;,&quot;P011&quot;,&quot;P023&quot;,&quot;P024&quot;,&quot;P054&quot;,&quot;P055&quot;,&quot;P056&quot;, &quot;P059&quot;,&quot;P060&quot;,&quot;P061&quot;,&quot;P063&quot;,&quot;P068&quot;,&quot;P060&quot;,&quot;P070&quot;,&quot;P071&quot;,&quot;P072&quot;,&quot;P073&quot;,&quot;P074&quot;,&quot;P075&quot;,&quot;P076&quot;,&quot;P077&quot;,&quot;P078&quot;,&quot;P079&quot;,&quot;P080&quot;)
ingresos_e16a&lt;-ingresos_acu_e16(a,claves) 
ingresos_e16a</code></pre>
</div>
<div id="base-cruzada-pob-tra" class="section level2" number="3.4">
<h2 number="3.4"><span class="header-section-number">3.4</span> Base cruzada pob-tra</h2>
<pre class="r"><code>enigh_16&lt;- full_join(poblacion_e16f,trabajos_e16f)%&gt;%
   drop_na()
#enigh&lt;-full_join(enigh,concentrado)%&gt;%
 # drop_na()
nrow(enigh_16)
sum(is.na(enigh_16))</code></pre>
</div>
<div id="cambio-etiquetado" class="section level2" number="3.5">
<h2 number="3.5"><span class="header-section-number">3.5</span> Cambio etiquetado</h2>
<p>Pasamos las etiqeuteas de educación de emovi a</p>
<pre class="r"><code>hijos_emovi &lt;- readRDS(file=&quot;Datos/hijos_emovi2017.Rda&quot;)
hijos_emovi&lt;- hijos_emovi %&gt;%
  mutate(p13_m = ifelse(p13 %in% c(1),&quot;1&quot;,
                      ifelse( p13 == 2,&quot;2&quot;,
                      ifelse(p13 %in% c(3,4),&quot;3&quot;,
                      ifelse( p13 %in% c(5,6),&quot;4&quot;,
                      ifelse(p13 %in% c(7,8),&quot;6&quot;,
                      ifelse(p13 %in% c(9,10),&quot;5&quot;,
                      ifelse(p13==11,&quot;7&quot;,
                      ifelse(p13==12,&quot;8&quot;,&quot;0&quot;)))))))))
unique(hijos_emovi$p13_m)

enigh_16&lt;-enigh_16%&gt;%
  mutate(nivelaprob=ifelse(nivelaprob==&quot;9&quot;,&quot;8&quot;,nivelaprob))

enigh_16f&lt;-enigh_16%&gt;%
  filter(nivelaprob %in% unique(hijos_emovi$p13_m))

nrow(enigh_16f)</code></pre>
</div>
<div id="buscar-folios-con-caracteristicas" class="section level2" number="3.6">
<h2 number="3.6"><span class="header-section-number">3.6</span> Buscar folios con caracteristicas</h2>
<pre class="r"><code>busca&lt;-function(i){
return(enigh_16f%&gt;%
  filter(
    as.integer(substr(folioviv,1,2))==hijos_emovi[i,]$Estado &amp;
    sexo == hijos_emovi[i,]$p06 &amp;
    edad == hijos_emovi[i,]$p05 &amp;
    #sinco == hijos_emovi[i,]$SINCO3 &amp;
    nivelaprob == hijos_emovi[i,]$p13_m)%&gt;%
  select(folioviv,foliohog))
}

  
a&lt;-lapply(1:nrow(hijos_emovi), busca)

contador&lt;-0
for(i in 1:nrow(hijos_emovi))
{if(nrow(a[[i]])&gt;0)
  contador&lt;-contador +1
}
contador
saveRDS(a, file=&quot;Datos/folhijos_enigh16_emovi.Rda&quot;)</code></pre>
<p>Del total, 1077 personas tienen gemelos</p>
<div id="filtamos-solo-los-hijos-encontrados" class="section level3" number="3.6.1">
<h3 number="3.6.1"><span class="header-section-number">3.6.1</span> filtamos solo los hijos encontrados</h3>
<pre class="r"><code># etiquetamos para no perder la numeracion respecto a los hijos originales
folhijos_e16_emovi &lt;- readRDS(file=&quot;Datos/folhijos_enigh16_emovi.Rda&quot;)
names(folhijos_e16_emovi) &lt;- as.character(1:nrow(hijos_emovi))
length(folhijos_e16_emovi)</code></pre>
<pre class="r"><code>L &lt;- c()
for(i in 1:length(folhijos_e16_emovi)){
  if(!(nrow(folhijos_e16_emovi[[i]])&gt;0)){
    L&lt;-c(L,i)}
}
# Solo hijos que se les pudo encontrar en enigh-2016 1077/1131
folhijos_e16_emovif&lt;-folhijos_e16_emovi[-L]
    

length(folhijos_e16_emovif)

#names(folhijos_emovif)
#names(folhijos_emovi)</code></pre>
</div>
<div id="unicos-folios-diferentes-trabajos" class="section level3" number="3.6.2">
<h3 number="3.6.2"><span class="header-section-number">3.6.2</span> Unicos folios, diferentes trabajos</h3>
<pre class="r"><code>unicos_folios&lt;-function(i){
folhijos_e16_emovif[[i]]%&gt;%
  distinct()
}

# filtramos unicos folios por diferentes trabajos de la misma persona
a&lt;-lapply(1:length(folhijos_e16_emovif), unicos_folios)
names(a)&lt;-names(folhijos_e16_emovif)
length(a)

folhijos_e16_emovif&lt;-a</code></pre>
</div>
<div id="observamos-las-edades-de-los-encontrados" class="section level3" number="3.6.3">
<h3 number="3.6.3"><span class="header-section-number">3.6.3</span> Observamos las edades de los encontrados</h3>
<pre class="r"><code>myMenuItems &lt;- c(&quot;downloadPNG&quot;, &quot;downloadJPEG&quot;, &quot;downloadPDF&quot;, &#39;downloadSVG&#39;, &#39;printChart&#39;)

hijos_emovi%&gt;%
  slice(as.integer(names(folhijos_e16_emovif)))%&gt;%
  select(p05)%&gt;%
  count(p05)%&gt;%
    hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Número de personas&quot;),
           categories = as.character(25:40)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="observamos-las-estados-de-los-encontrados" class="section level3" number="3.6.4">
<h3 number="3.6.4"><span class="header-section-number">3.6.4</span> Observamos las estados de los encontrados</h3>
<pre class="r"><code>hijos_emovi%&gt;%
  slice(as.integer(names(folhijos_e16_emovif)))%&gt;%
  count(Estado)%&gt;%
    hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Número de personas&quot;),
           categories = get_labels(hijos_emovi$Estado)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
</div>
<div id="ingreso-hijo-enigh16-emovi" class="section level2" number="3.7">
<h2 number="3.7"><span class="header-section-number">3.7</span> Ingreso hijo enigh16-emovi</h2>
<pre class="r"><code>ingreso_hijo_e16_emovi&lt;-function(i){
  ingresos_e16a%&gt;%
  filter(folioviv %in% folhijos_e16_emovif[[i]]$folioviv &amp;
    foliohog %in% folhijos_e16_emovif[[i]]$foliohog)%&gt;%summarise(
     id_hijo = names(folhijos_e16_emovif[i]),
     id_ho = hijos_emovi[as.integer(names(folhijos_e16_emovif[i])),&quot;id_ho&quot;],
     mov= hijos_emovi[as.integer(names(folhijos_e16_emovif[i])),&quot;mov&quot;],
     regionh = hijos_emovi[as.integer(names(folhijos_e16_emovif[i])),&quot;region&quot;],
     edad = hijos_emovi[as.integer(names(folhijos_e16_emovif[i])),&quot;p05&quot;],
      ing_men_p_h =list(ing_men_p),
     cohort = hijos_emovi[as.integer(names(folhijos_e16_emovif[i])),&quot;p133&quot;],
    estrato = hijos_emovi[as.integer(names(folhijos_e16_emovif[i])),&quot;estrato&quot;],
    estado = hijos_emovi[as.integer(names(folhijos_e16_emovif[i])),&quot;Estado&quot;],
    sexo = hijos_emovi[as.integer(names(folhijos_e16_emovif[i])),&quot;p06&quot;]
     )
}
#273,332 son vacios
# ingreso hijo pero ualgunos no podrian estar por no tener registro de salario

a&lt;-lapply(1:length(folhijos_e16_emovif), ingreso_hijo_e16_emovi)
ingreso_hijog_e16_emovi&lt;-a
length(ingreso_hijog_e16_emovi)
ingreso_hijog_e16_emovi[[332]]
x&lt;-ingreso_hijog_e16_emovi[[332]]$ing_men_p_h[1]
sum(ingreso_hijog_e16_emovi[[332]]$ing_men_p_h[[1]],na.rm = TRUE)</code></pre>
</div>
<div id="filtramos-sobre-ingresos-encontrados" class="section level2" number="3.8">
<h2 number="3.8"><span class="header-section-number">3.8</span> Filtramos sobre ingresos encontrados</h2>
<pre class="r"><code>L &lt;- c()
for(i in 1:length(ingreso_hijog_e16_emovi)){
  if(sum(ingreso_hijog_e16_emovi[[i]]$ing_men_p_h[[1]],na.rm = TRUE)==0){
    L&lt;-c(L,i)}
}
length(L)

ingreso_hijog_e16_emovi&lt;-ingreso_hijog_e16_emovi[-L]

length(ingreso_hijog_e16_emovi)
ingreso_hijog_e16_emovi[1]
ingreso_hijog_e16_emovi[2]


ingreso_hijog_e16_emovif&lt;-bind_rows(ingreso_hijog_e16_emovi[1:length(ingreso_hijog_e16_emovi)])


nrow(ingreso_hijog_e16_emovif)

saveRDS(ingreso_hijog_e16_emovif, file=&quot;Datos/ingreso_hij_f_emovi.Rda&quot;)</code></pre>
</div>
</div>
<div id="hijos-con-ingreso" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Hijos con ingreso</h1>
<pre class="r"><code>hijos_emovi_hp &lt;- readRDS(file=&quot;Datos/ingreso_hij_f_emovi.Rda&quot;)

nrow(hijos_emovi_hp)
hijos_emovi_hp 
# p05 edad act
# p06 sexo act
# p13 educ hijo
# SINCO3, ocupación hijo
# p23 en qeu estado vivia a los 14
# p26 principal sosten ecómico
# p38_11 edad padre 2016
# p38m_11 edad madre 2016
# p43 nivel educativo padre
#p43m nivel educativo madre
# cmo1_2 ocupacion del padre
# cmo2_2 ocupacion de la madre 


varp&lt;-c(&quot;Estado&quot;,&quot;p05&quot;,&quot;p06&quot;,&quot;p13&quot;,&quot;SINCO3&quot;,&quot;p23&quot;,&quot;p26&quot;,&quot;p38_11&quot;,&quot;p38m_11&quot;,&quot;p43&quot;,&quot;p44&quot;,
        &quot;p43m&quot;,&quot;p44m&quot;,&quot;cmo1_2&quot;,&quot;cmo2_2&quot;,&quot;mov&quot;,
        &quot;region&quot;,&quot;p133&quot;)
padres_h&lt;-data_emovi2017%&gt;%
    filter(p02 == 1)  %&gt;% #compartir gasot para comer
  filter(between(p05,25,40)) %&gt;% # edad
  #filter(p08 == 1)  %&gt;% 
  filter(p12 == 2)  %&gt;%# ya no estudia
  filter(p26 == 1 | p26==2 ) %&gt;% # sosten principal papa, mama, 
   filter((!is.na(p43) &amp; p43!=98 &amp; p26 == 1 )|
            (!is.na(p43m) &amp; p43m!=98  &amp; p26 == 2 )) %&gt;% # reporta educación de pp
   filter(!is.na(p13))%&gt;% #  reporta educación
  filter(SINCO3 !=&quot;&quot;) %&gt;%# reporta oficio actual
   filter(p68 == 1 | p69 == 1)  %&gt;% # si trabaja
   filter(p132 %in% c(1)) %&gt;%# persona que aportan ingreso
  filter(!p133 %in% c(8,9,NA) )%&gt;%
  select(varp)%&gt;%
  slice(as.integer(unlist(hijos_emovi_hp%&gt;%select(id_hijo))))%&gt;%
  mutate(
         pp_id_hijo = hijos_emovi_hp%&gt;%pull(id_hijo),
         ing_h = hijos_emovi_hp%&gt;%pull(ing_men_p_h),
         cohort = ifelse(p133==1,2,p133)-1
         )%&gt;%
  rename(
          edad_h = p05,
          sexo_h = p06,
          edu_h = p13,
          ocu_h = SINCO3,
          pp_estado = p23,
          pp = p26,
          p_edad_2016= p38_11,
          m_edad_2016 = p38m_11,
          p_edu = p43,
          p_edug = p44,
          m_edu = p43m,
          m_edug = p44m,
          p_ocu = cmo1_2,
          m_ocu = cmo2_2
         )%&gt;%
  mutate(
        p_edu = as.integer(p_edu),
        m_edu = as.integer(m_edu)
  )
  
 
# las ocupaciones no encontradas las sustituimos por un NA
padres_h&lt;-padres_h%&gt;%
  mutate(p_ocu = ifelse(p_ocu==&quot;.&quot;,NA,p_ocu),
         m_ocu = ifelse(m_ocu==&quot;.&quot;,NA,m_ocu))

unique(padres_h$p_ocu)
unique(padres_h$m_ocu)
head(padres_h)</code></pre>
<div id="crear-base-limpia" class="section level2" number="4.1">
<h2 number="4.1"><span class="header-section-number">4.1</span> Crear base limpia</h2>
<pre class="r"><code>filtro_pp_c&lt;-function(df_1,general = 0)
{
  #recibe un hijo de un dataframe, para polimorfismo
  # general = 0y regresa un data frame con los datos
  # ordenados del hijo
  if(df_1[&quot;pp&quot;]==1)
  {
    dfn &lt;- df_1%&gt;%
          filter(pp==1)%&gt;%
          select(starts_with(c(&quot;pp&quot;,&quot;p_&quot;)),
             ing_h,edu_h,ocu_h,edad_h,p_edad_2016,
             region,cohort)%&gt;%
          mutate(pp_edad2016 = p_edad_2016)%&gt;%
          rename(
            id_hijo = pp_id_hijo,
            pp_sexo = pp,
            pp_edad = p_edad_2016,
            pp_educ = p_edu,
            pp_educg = p_edug,
            pp_ocup = p_ocu
          )%&gt;%
        mutate(pp_edad = pp_edad + (14-edad_h))
  }
  if(df_1[&quot;pp&quot;]==2)
    {
    dfn&lt;-df_1%&gt;%
        filter(pp==2)%&gt;%
        select(starts_with(c(&quot;pp&quot;,&quot;m_&quot;)),ing_h,edu_h,
            ocu_h,edad_h,m_edad_2016,
            region,cohort)%&gt;%
       mutate(pp_edad2016 = m_edad_2016)%&gt;%
        rename(
          id_hijo = pp_id_hijo,
          pp_sexo = pp,
          pp_edad = m_edad_2016,
          pp_educ = m_edu,
          pp_educg = m_edug,
          pp_ocup = m_ocu
        )%&gt;%
        mutate(pp_edad = pp_edad + (14-edad_h))
  }
  if(is.na(dfn$pp_edad) &amp; general){
    return(&quot;ND&quot;)
  }
  return(dfn)
}

#comporbamos qeu funcione bien
filtro_pp_c(padres_h[1,])


acomoda_df_c&lt;-function(df){
  #damos un df de una edad,  y
  # nos regresa un data frame acomodado
  aux&lt;-function(i){
    return(df[i,])
  }
  a&lt;-lapply(1:nrow(df),aux)
  L&lt;-lapply(a,filtro_pp_c)
  dfn &lt;-bind_rows(L[1:length(L)])
  return(dfn)
}

dfh&lt;-acomoda_df_c(padres_h)



pro_edad_c &lt;- function(df){
  #le damos el df y nos regresa el promedio de la edade  los padres
  df%&gt;%summarise(
    promedi_edad_padres = mean(pp_edad2016,na.rm=TRUE))
  }

edades_pro&lt;- pro_edad_c(dfh)

edades_pro
#edades de padres faltantes
sum(is.na(dfh$pp_edad2016))
# 
head(dfh)

# 2016-21</code></pre>
</div>
<div id="codificacion-eduación" class="section level2" number="4.2">
<h2 number="4.2"><span class="header-section-number">4.2</span> Codificacion eduación</h2>
<pre class="r"><code>dfh_c&lt;- dfh%&gt;%
   mutate(
   pp_educ_a = ifelse(pp_educ==1,1,    #sin instruccion(1)
          ifelse(pp_educ==2,1+pp_educg,
          ifelse(pp_educ %in% c(3,4),7+pp_educg,
          ifelse(pp_educ %in% c(5,6,7,8,9),10+pp_educg,
          ifelse(pp_educ %in% c(10,11),13+pp_educg,17+pp_educg)))))
  )

  

unique(dfh_c$pp_educ_a)

dfh_c&lt;-dfh_c%&gt;%
  mutate(
   pp_educ_ac = ifelse(pp_educ_a %in% 0:5,&quot;C1&quot;,    
          ifelse(pp_educ_a %in% 6:10 ,&quot;C2&quot;,
          ifelse(pp_educ_a %in% 11:12,&quot;C3&quot;,
          ifelse(pp_educ_a %in% 13:14,&quot;C4&quot;,&quot;C5&quot;))))
  )</code></pre>
</div>
</div>
<div id="padres-construcción-ingresos" class="section level1" number="5">
<h1 number="5"><span class="header-section-number">5</span> Padres construcción ingresos</h1>
<p>Seleccionamos de la ENIGH 1997, no hay entonces 1998</p>
<div id="poblacion-enigh-98" class="section level2" number="5.1">
<h2 number="5.1"><span class="header-section-number">5.1</span> Poblacion enigh 98</h2>
<pre class="r"><code>poblacion&lt;-read.dbf(
              file=&quot;Datos/ENIGH-Historica/1998/POBLA98.dbf&quot;
              )



poblacion_e98&lt;-poblacion%&gt;%
  filter(
    parentesco == &quot;01&quot;,
    between(edad,30,50),
    !is.na(ed_formal),
    !is.na(ed_tecnica),
    !is.na(ocupacion),
    n_empleos==1, # el entrevistado solo proporciona una ocupación
  )%&gt;%
  select(
    folio,
    num_ren,
    edad,
    ed_formal,
    ed_tecnica,
    ocupacion
  )%&gt;%
 mutate(
  ed_formal = as.integer(as.character(ed_formal)),
   ed_tecnica= as.integer(as.character(ed_tecnica)),
  estado = substr(folio,5,6)
 )

#unique(pobla_enigh1998$ed_formal)
#pobla_enigh1998$ed_formal
nrow(poblacion_e98)
head(poblacion_e98$ed_formal)
str(poblacion_e98$ed_formal)#caracter 2 espacios
unique(poblacion_e98$ed_formal)
#pobla_enigh1998$ed_formal==&quot;03&quot;
head(poblacion_e98$ed_tecnica)
str(poblacion_e98$ed_tecnica)#caracter 1 espacio
unique(poblacion_e98$ed_tecnica)
#pobla_enigh1998%&gt;%count(n_empleos), se exploro para quitar una ocupacion
names(poblacion)
str(poblacion$per_ing)</code></pre>
<div id="codificación-educación-enigh-1998" class="section level3" number="5.1.1">
<h3 number="5.1.1"><span class="header-section-number">5.1.1</span> Codificación educación enigh 1998</h3>
<pre class="r"><code># hacemos la codificación de ENIGH2018 a ESRU
#1  Preescolar o kínder
# 2 Primaria
# 3 Secundaria técnica
# 4 Secundaria general
# 5 Preparatoria técnica
# 6 Preparatoria general
# 7 Técnica o comercial con secundaria
# 8 Técnica o comercial con preparatoria
# 9 Normal básica (con primaria o secundari
# 10 Normal de licenciatura
# 11 Profesional (licenciatura o ingeniería)
# 12 Postgrado (maestría o doctorado)
#_____________________________________________________
# 98 NS, no aplica porque pedimos la edución del pp como instrumento


# vemso las combinaciones de educación para codificar

comb&lt;-poblacion_e98%&gt;%
   mutate( combi = paste(as.character(ed_formal),as.character(ed_tecnica)))%&gt;%
  select(ed_formal,ed_tecnica,combi)

  
sort(unique(comb$combi))
# [1] &quot;01 1&quot; &quot;02 1&quot; &quot;03 1&quot; &quot;03 2&quot; &quot;04 1&quot; &quot;05 1&quot; &quot;06 1&quot; &quot;07 1&quot; &quot;07 2&quot; &quot;08 1&quot;
# [11] &quot;08 2&quot; &quot;08 3&quot; &quot;08 4&quot; &quot;08 5&quot; &quot;09 1&quot; &quot;09 4&quot; &quot;09 5&quot; &quot;10 1&quot; &quot;10 2&quot; &quot;10 4&quot;
# [21] &quot;10 5&quot; &quot;11 1&quot; &quot;11 3&quot; &quot;11 4&quot; &quot;11 5&quot; &quot;11 6&quot; &quot;11 7&quot; &quot;12 1&quot; &quot;12 3&quot; &quot;12 5&quot;
# [31] &quot;12 6&quot; &quot;12 7&quot; &quot;13 1&quot; &quot;13 5&quot; &quot;13 6&quot; &quot;13 7&quot; &quot;13 8&quot; &quot;13 9&quot; &quot;14 1&quot; &quot;14 3&quot;
# [41] &quot;14 5&quot; &quot;14 6&quot; &quot;14 7&quot; &quot;14 9&quot; &quot;15 1&quot; &quot;15 3&quot; &quot;15 4&quot; &quot;15 5&quot; &quot;15 6&quot; &quot;15 7&quot;
# [51] &quot;15 9&quot; &quot;16 1&quot; &quot;16 5&quot; &quot;16 7&quot; &quot;16 9&quot;




# &quot;16 1&quot; &quot;16 5&quot; &quot;16 7&quot; &quot;16 9&quot;

#codificamos a a años de educación
poblacion_e98c&lt;-poblacion_e98%&gt;%
   mutate(
   edu_a = ifelse(ed_formal==1 &amp; ed_tecnica==1,0,    #sin instruccion(1)
          ifelse((ed_formal %in% c(2,3,4,5,6,7,8,9,10,11,12,13))
                 &amp; (ed_tecnica %in% c(1,2)),ed_formal-1,
          ifelse(ed_formal==8 &amp; (ed_tecnica %in% c(3,4,5)),9,
          ifelse(ed_formal==9 &amp; (ed_tecnica %in% c(4,5)),10,
          ifelse(ed_formal==10 &amp; (ed_tecnica %in% c(2,4,5)),11,
          ifelse(ed_formal==11 &amp; (ed_tecnica %in% c(3,4,5,5,7)),12,
          ifelse((ed_formal %in%c(12)) &amp; (ed_tecnica %in% c(3,5,6,7)),12,
          ifelse(ed_formal==13 &amp; (ed_tecnica %in% c(5,6,7,8,9)),13,
          ifelse(ed_formal==14 &amp; (ed_tecnica %in% c(1,3,5,6,7,9)),14,
          ifelse(ed_formal==15 &amp; (ed_tecnica %in% c(1,3,4,5,6,7,9)),17,19))))))))))
  )

unique(poblacion_e98c$edu_a)

#codificamos a coghort de educación

poblacion_e98c&lt;-poblacion_e98c%&gt;%
   mutate(
   edu_ac = ifelse(edu_a %in% 0:5,&quot;C1&quot;,    
          ifelse(edu_a %in% 6:10 ,&quot;C2&quot;,
          ifelse(edu_a %in% 11:12,&quot;C3&quot;,
          ifelse(edu_a %in% 13:14,&quot;C4&quot;,&quot;C5&quot;))))
  )

unique(poblacion_e98c$edu_ac )</code></pre>
</div>
<div id="creacion-de-region" class="section level3" number="5.1.2">
<h3 number="5.1.2"><span class="header-section-number">5.1.2</span> Creacion de region</h3>
<pre class="r"><code>poblacion_e98c&lt;-poblacion_e98c%&gt;%
          mutate(
            region = ifelse(estado %in% c(&quot;02&quot;,&quot;26&quot;,&quot;08&quot;,&quot;05&quot;,&quot;19&quot;,&quot;28&quot;),1,
                ifelse(estado %in% c(&quot;12&quot;,&quot;20&quot;,&quot;07&quot;,&quot;30&quot;,&quot;27&quot;,&quot;04&quot;,&quot;31&quot;,&quot;23&quot;),5,0))
          )</code></pre>
</div>
</div>
<div id="ingresos-enigh-98" class="section level2" number="5.2">
<h2 number="5.2"><span class="header-section-number">5.2</span> Ingresos enigh 98</h2>
<pre class="r"><code>ingresos&lt;-read.dbf(
              file=&quot;Datos/ENIGH-Historica/1998/ingresos.dbf&quot;
              )

familias_integrantes &lt;- function(df,nr){
  dfn &lt;- df %&gt;%
    filter(NUM_REN %in% nr)
  return(dfn)
} 



ingresos_acu &lt;- function(df,clavs){
 dfn &lt;- df %&gt;%
   group_by(FOLIO, NUM_REN) %&gt;%
   filter(CLAVE %in% clavs)%&gt;%
   summarise(
   claves_a = paste(CLAVE,collapse = &quot;,&quot;),
  ing_tri_t = sum(ING_TRI),
  ing_men_p = ing_tri_t/3,
  ling_men_p = log(ing_men_p)
  ) %&gt;% ungroup()
 
 
 return(dfn)
}

#hogares &lt;- c(&quot;1&quot;,&quot;2&quot;,&quot;3&quot;,&quot;4&quot;,&quot;5&quot;)
personas_h &lt;- c(&#39;01&#39;)

a&lt;-familias_integrantes(ingresos,personas_h)
head(a)
claves&lt;-c(&quot;P001&quot;,&quot;P002&quot;,&quot;P003&quot;,&quot;P010&quot;,&quot;P011&quot;,&quot;P012&quot;,&quot;P013&quot;,&quot;P014&quot;,&quot;P015&quot;, &quot;P016&quot;,&quot;P017&quot;,&quot;P018&quot;,&quot;P020&quot;,&quot;P021&quot;,&quot;P026&quot;,&quot;P027&quot;,&quot;P035&quot;,&quot;P040&quot;,&quot;P041&quot;,&quot;P042&quot;,&quot;P044&quot;,&quot;P045&quot;)
ingresos_e98&lt;-ingresos_acu(a,claves) 
ingresos_e98&lt;-ingresos_e98%&gt;%
  select(FOLIO,NUM_REN,claves_a,ling_men_p)%&gt;%
  rename(
    folio = FOLIO,
    num_ren = NUM_REN
  )
head(ingresos_e98)</code></pre>
</div>
<div id="base-cruzada-pobla-ing" class="section level2" number="5.3">
<h2 number="5.3"><span class="header-section-number">5.3</span> Base cruzada pobla-ing</h2>
<pre class="r"><code>enigh_98&lt;-full_join(poblacion_e98c,ingresos_e98)%&gt;%
  drop_na()%&gt;%
   mutate(
     ocupacion = substr(ocupacion,1,2)
   )#%&gt;%
  # rename(
  #   EDU=N_INSTR161,
  #   OCU = CMO121
  # )%&gt;%
  # mutate(
  #   EDU = as.character(EDU)
  # )
head(enigh_98)

unique(enigh_98$edad)

# ajuste para nivel de ecucación ESRU

#data_padres2005$EDU &lt;- factor(data_padres2005$EDU)
#data_padres2005$OCU &lt;- factor(data_padres2005$OCU)

#unique(data_padres2005$OCU)
sum(is.na(enigh_98))</code></pre>
</div>
</div>
<div id="eslaticidad-integeneracional-de-ingresos" class="section level1" number="6">
<h1 number="6"><span class="header-section-number">6</span> Eslaticidad integeneracional de ingresos</h1>
<div id="deflactamos-ingresos" class="section level2" number="6.1">
<h2 number="6.1"><span class="header-section-number">6.1</span> Deflactamos ingresos</h2>
<p>INPC Feb 2021 = 110.907 <a href="https://www.banxico.org.mx/SieInternet/consultarDirectorioInternetAction.do?accion=consultarCuadro&amp;idCuadro=CP154&amp;locale=es">Consulta</a></p>
<pre class="r"><code>INPC&lt;-110.907

enigh_98&lt;-enigh_98%&gt;%
  mutate(
  ling_men_p=ling_men_p-log(INPC)
  )</code></pre>
<p>Por la porgramación, para los hijos, se hace dentro del sigueinte programa</p>
</div>
<div id="estimación" class="section level2" number="6.2">
<h2 number="6.2"><span class="header-section-number">6.2</span> Estimación</h2>
<p>Sin controlar por ocupación del hijo</p>
<pre class="r"><code>eii&lt;-function(i){
  
  

# BOOSTRAP  
# Regresión de ingresos de padres  
reg_padres&lt;-lm(
  formula = ling_men_p ~ edu_ac + ocupacion + edad +I(edad*edad),
  data = enigh_98[sample(nrow(enigh_98),nrow(enigh_98), replace = TRUE),]
)

summary(reg_padres)

# numero de padres sin ocupación reportada de hijos
p_socu&lt;-sum(is.na(dfh_c$pp_ocup))
#p_socu


dfh_cna&lt;-dfh_c%&gt;%drop_na(pp_ocup)

# daframe para estimar ingreso padres
data&lt;- data.frame(
   edu_ac= dfh_cna$pp_educ_ac,
   ocupacion= dfh_cna$pp_ocup,
   edad = 0
  )

# BOOSTRAP ingreso HIJOS

# calculamos el ingreso de los hijos con los gemelos
# re-sampleados, ademas codificamos la ocupación del hijo a dos caracteres

auxs&lt;-function(k){
  sample(k,size=length(k),replace=TRUE)
}

dfh_cna &lt;- dfh_cna %&gt;%
  mutate(
   ocu_hc= substring(ocu_h,1,2),
   ing_h=unlist(lapply(
                      lapply(ing_h,auxs),
                      mean
                      )
                ),
   ling_h = log(ing_h)-log(INPC)
  )

dfh_f&lt;-dfh_cna%&gt;%
  mutate(cohort_e = ifelse(ing_h&lt;=2400,1,
                          ifelse(ing_h&lt;=4800,2,
                          ifelse(ing_h&lt;=7200,3,
                          ifelse(ing_h&lt;=12000,4,                          ifelse(ing_h&lt;=24000,5,6))))),
         cohort_dif=cohort-cohort_e)

  
#dfh_cna
#dfh_cna$ocu_hijo
#dfh_cna$ling_h

#str(substr(dfh_cna$ocu_h,1,2))

# estimación ingreso padres
# inputamos al hijo correspondiente

dfhpf&lt;- dfh_f%&gt;%
  mutate(ling_p = predict(
    object = reg_padres,   
    newdata = data)) 
#dfhpf

# Elasticidad intergeneacional del ingreso

reg_hp&lt;-lm(
  formula = ling_h ~ ling_p + edad_h+ I(edad_h*edad_h),#+ ocu_hc,
  data = dfhpf
)
summary(reg_hp)
beta &lt;- reg_hp$coefficients[2]
cohort_dif&lt;-as.integer(dfhpf%&gt;%count(cohort_dif)%&gt;%
                   filter(cohort_dif==0)%&gt;%
                 select(n))

return(data.frame()%&gt;%summarise(
  cohort_dif=cohort_dif,
  beta=beta))

}
set.seed(123)
a&lt;-lapply(1:1500,eii)
resul&lt;-bind_rows(a[1:length(a)])
head(resul)
mean(resul$beta)
sd(resul$beta)
hist(resul$beta)</code></pre>
<pre class="r"><code>hist(resul$cohort_dif)
mean(resul$cohort_dif)</code></pre>
</div>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiRXN0aWFtY2lvbiIKYXV0aG9yOiAiUmFmYWVsIE1hcnTDrW5leiBNYXJ0w61uZXoiCm91dHB1dDogCiAgaHRtbF9kb2N1bWVudDoKICAgIHRvYzogdHJ1ZQogICAgdG9jX2Zsb2F0OiB0cnVlCiAgICB0b2NfZGVwdGg6IDMKICAgIG51bWJlcl9zZWN0aW9uczogdHJ1ZQogICAgY29kZV9kb3dubG9hZDogdHJ1ZQogICAgY29kZV9mb2xkaW5nOiBzaG93Ci0tLQoKCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUsIG1lc3NhZ2UgPSBGQUxTRSwgZXZhbCA9IEZBTFNFKQpgYGAKCgpgYGB7ciBjYXJnYXJfYmlsaW90ZWNhc30KbGlicmFyeSh0aWR5dmVyc2UpCmxpYnJhcnkoaGF2ZW4pICMgaW1wb3J0YSwgZW50cmUgb3Ryb3Mgc29mdHdhcmUsIGRlIFN0YXRhCmxpYnJhcnkoc2psYWJlbGxlZCkgIyBtYW5lamFyIGxhYmVscyBkZSBsYXMgdmFyaWFibGVzIApsaWJyYXJ5KG9wZW54bHN4KSAjIGxlZXIgYXJjaGl2b3MgZGUgZXhjZWwKbGlicmFyeShEVCkgIyB2aXN1YWxpemFyIGEgdGFibGFzCmxpYnJhcnkoZGF0YS50YWJsZSkgIyBjb252ZXJ0aXIgYSB0YWJsYXMKbGlicmFyeShoaWdoY2hhcnRlcikgIyBncsOhZmljYXMgaW50ZXJhY3RpdmFzCmxpYnJhcnkoZm9yZWlnbikKYGBgCgoKIyBGdW5jaW9uZXMgZGUgY2FyZ2EKCmBgYHtyIGZ1bl9jYXJnX0VTUlV9CgpjYXJnYXJfZXNydTwtIGZ1bmN0aW9uKCl7CgpyZXR1cm4ocmVhZF9zdGF0YSgKICAgICAgICAgICAgICAgICAgICAgcGF0aCA9ICJEYXRvcy9FU1JVLUVNT1ZJLTIwMTcvRVNSVS1FTU9WSS0yMDE3LUVudHJldmlzdGFkby5kdGEiLAogICAgICAgICAgICAgICAgICAgICBhdG9taWMudG8uZmFjID0gVFJVRSwKICAgICAgICAgICAgICAgICAgICAgZW5jID0gTlVMTCwKICAgICAgICAgICAgICAgICAgICAgKSkKfQpgYGAKCgpgYGB7ciBjYXJhZ2FyX2VuaWdofQpjYXJnYXJfZW5pZ2g8LSBmdW5jdGlvbihkb2N1KXsKCnJldHVybihyZWFkX3N0YXRhKAogICAgICAgICAgICAgICAgICAgICBwYXRoID0gcGFzdGUoIkRhdG9zL0VOSUdILTIwMTYvIixkb2N1LCIuZHRhIixzZXA9IiIpLAogICAgICAgICAgICAgICAgICAgICBhdG9taWMudG8uZmFjID0gVFJVRSwKICAgICAgICAgICAgICAgICAgICAgZW5jID0gTlVMTCwKICAgICAgICAgICAgICAgICAgICAgKSkKfQoKY2FyZ2FyX2VuaWdoX3NhdjwtIGZ1bmN0aW9uKGRvY3UpewoKcmV0dXJuKHJlYWRfc3BzcygKICAgICAgICAgICAgICAgICAgICAgcGF0aCA9IHBhc3RlKCJEYXRvcy9FTklHSC0yMDE2LyIsZG9jdSwiLnNhdiIsc2VwPSIiKSwKICAgICAgICAgICAgICAgICAgICAgYXRvbWljLnRvLmZhYyA9IFRSVUUsCiAgICAgICAgICAgICAgICAgICAgIGVuYyA9IE5VTEwsCiAgICAgICAgICAgICAgICAgICAgICkpCn0KYGBgCgoKCiMgRmlsdHJhciBoaWpvcyBFU1JVCgojIyBDcmVhbW9zICBwZXIgbW92aWxpZGFkCgpgYGB7ciBjYXJnYV9lc3J1X2NyZWFfbW92fSAKCmRhdGFfZW1vdmkyMDE3PC1jYXJnYXJfZXNydSgpCgpkYXRhX2Vtb3ZpMjAxNzwtZGF0YV9lbW92aTIwMTclPiUKICBtdXRhdGUobW92ID0gaWZlbHNlKHAxNDc+cDE0OCwibWVqb3IiLAogICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHAxNDc8cDE0OCwicGVvciIsImlndWFsIikpLAogICAgICAgICBpZF9obyA9IGFzLmludGVnZXIocm93Lm5hbWVzKGRhdGFfZW1vdmkyMDE3KSkpCmRhdGFfZW1vdmkyMDE3JG1vdjwtc2V0X2xhYmVscygKICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhX2Vtb3ZpMjAxNyRtb3YsCiAgICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxzID0gYygibWVqb3IiID0gIm1lam9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwZW9yIiA9ICJwZW9yIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJpZ3VhbCIgPSAiaWd1YWwiKSkKCmBgYAoKIyMgQ3JhbW9zIGNvaG9ydAoKCgojIyBzZWxlY2Npb24gZGUgaGlqb3MKCkNyaXRlcmlvcyBkZSBmaWx0cmFkbwotIHByZWd1bnRhIHAyLCBjb21wYXJ0ZW4gZWwgbWltc28gZ2FzdG8gcGFyYSBjb21lcjogMSApIFNpIDIgKSBObwotIHByZWd1bnRhIDUgRWRhZGVzIGVudHJlIDI1IHkgNDUgYcOxb3MKLSBwcmVndW50YSBwMDgsIGVzIGVsIGplZmUgZGVsIGhvZ2FyOiAxICkgamVmZSAyKSBjw7NueXVnZSBOTyBJTVBMRU1FTlRBRE8KLSBwcmVndW50YSBwMTIsIGFjdHVhbG1lbnRlIGVzdHVkaWEsIDEpU2kgMilObwotIHAyNiBIYWLDrWEgdW4gamVmZSBkZSBob2dhciBlbiBsYSBpbmZhbmNpYSAoMSBwYWRyZSAyIG1hZHJlKQotIHA0MyB5IHA0M20gUmVwb3J0YSBlZHVjYWNpw7NuIGRlbCBwYWRyZSBvIG1hZHJlIHByaWNpYXBsCi0gcDY4LCBQZXJzb25hcyBxdWUgdHJhYmFqYW4sIDEuIFNpLCAyLiBObwotIHA2OSBzaSB0cmFiYWphIHBlcm8gbGEgc2VtYW5hIHBhc2FkYSBubyAKLSBwMTMyIG51bWVybyBkZSBwZXJzb25hcyBxdWUgYXBvcnRhbiBpbmdyZXNvCi0gcDEzMyBjb2hvcnQgZGUgdG9kYXMgbGFzIHBlcnNvbmFzIHkgdG9kb3MgbG9zIGluZ3Jlc29zICgxIGluZ3Jlc28pCgoKVmFyaWFibGVzIGRlIHNlbGVjY2nDs24gcGFyYSBlc3RpbWFyIGluZ3Jlc28KCi0gRXN0YWRvCgotIHByZWd1bnRhIDUsIGVkYWQKCi0gcHJlZ3VudGEgNiwgc2V4bwoKLSBQcmVndW50YSAxMywgbml2ZWwgZGUgZXNjdWVsYQoKLSBwNzYgb2N1cGFjacOzbgotLVNJTkNPMyBjb2RpZmljYWNpw7NuIG9jdXBhY2nDs24gZW50cmV2aXN0YWRvCgotIHAxMzMgY29ob3J0IGRlIHRvZGFzIGxhcyBwZXJzb25hcyB5IHRvZG9zIGxvcyBpbmdyZXNvcwoKCmBgYHtyIGhpam9zX3NlbF9lc3J1fQojIHBlbnNhbW9zIHF1ZSBsb3MgZGF0b3Mgc2UgbGVlZW4gY29tbyBmYWN0b3JlcyBjYW5kbyBjb3JyZXNwb25kYSwgc2kgc2UgbGVlbiBjb21vIGVudGVyb3Mgbm8gZGViZSBoYWNlcnNlIGVsIGNhc3RpbmcKI2RhdGFfZW1vdmkyMDE3PC1kYXRvc19lCmhpam9zIDwtIGRhdGFfZW1vdmkyMDE3ICU+JQogIGZpbHRlcihwMDIgPT0gMSkgICU+JSAjY29tcGFydGlyIGdhc290IHBhcmEgY29tZXIKICBmaWx0ZXIoYmV0d2VlbihwMDUsMjUsNDApKSAlPiUgIyBlZGFkCiAgI2ZpbHRlcihwMDggPT0gMSkgICU+JSAKICBmaWx0ZXIocDEyID09IDIpICAlPiUgIyB5YSBubyBlc3R1ZGlhCiAgZmlsdGVyKHAyNiA9PSAxIHwgcDI2PT0yICkgJT4lICMgc29zdGVuIHByaW5jaXBhbCBwYXBhLCBtYW1hLCAKICAgZmlsdGVyKCghaXMubmEocDQzKSAmIHA0MyE9OTggJiBwMjYgPT0gMSApIHwKICAgICAgICAgICAgKCFpcy5uYShwNDNtKSAmIHA0M20hPTk4ICAmIHAyNiA9PSAyICkpICU+JSAjIHJlcG9ydGEgZWR1Y2FjacOzbiBkZSBwcAogICBmaWx0ZXIoIWlzLm5hKHAxMykpJT4lICMgIHJlcG9ydGEgZWR1Y2FjacOzbgogIGZpbHRlcihTSU5DTzMgIT0iIikgJT4lIyByZXBvcnRhIG9maWNpbyBhY3R1YWwKICAgZmlsdGVyKHA2OCA9PSAxIHwgcDY5ID09IDEpICAlPiUgIyBzaSB0cmFiYWphCiAgIGZpbHRlcihwMTMyICVpbiUgYygxKSkgJT4lIyBwZXJzb25hIHF1ZSBhcG9ydGFuIGluZ3Jlc28KICBmaWx0ZXIoIXAxMzMgJWluJSBjKDgsOSxOQSkgKSAjIHJlcG9ydGEgaW5ncmVzb3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAjIG5vIGVzdGFuIGxvcyBpbmdyZXNvcyAgaG9nYXIgYWlzbGFkb3MuIAoKI2VkYWRfcHJvbWVkaW9fcGFkcmVzIDwtIG1lYW4oaGlqb3MkcDM4XzExLCBuYS5ybSA9IFRSVUUpCiNlZGFkX3Byb21lZGlvX3BhZHJlcy0yMQoKc3RyKGhpam9zJHAwMikKCnVuaXF1ZShoaWpvcyRwNDMpCmBgYAojIyBoaWpvcyBzZWxlY2Npb25hZG9zCgpIYWNlbW9zIHVuIGNvaG9ydCBkZWwgMSB5IGVsIDIgCgpgYGB7ciBoaWpvc19zZWxfZXNydV9tb2R9CgoKdmFyPC1jKCJFc3RhZG8iLCJwMDUiLCJwMDYiLCJwMTMiLCJTSU5DTzMiLCJwMTMzIiwibW92IiwiaWRfaG8iLCJyZWdpb24iKQpoaWpvc19wYXJhX3NhbDwtaGlqb3MlPiUKICBzZWxlY3QodmFyKSU+JQogIG11dGF0ZShwMTMzID0gaWZlbHNlKHAxMzM9PTEsMixwMTMzKS0xKSMganVudGFtb3MgZWwgY29ob3J0IDEgeSAyIAoKaGlqb3NfcGFyYV9zYWwgPC0gaGlqb3NfcGFyYV9zYWwlPiUKICAgICAgICAgICAgbXV0YXRlKGVzdHJhdG8gPSBpZmVsc2UocDEzMyAlaW4lIGMoMSwyKSwxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UocDEzMyAlaW4lIGMoMyksMiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShwMTMzICVpbiUgYyg0LDUpLDMsNCkpKSkKCgojc3VtKGhpam9zX3BhcmFfc2FsJHAxMzM9PTEpCgpucm93KGhpam9zX3BhcmFfc2FsKQpzYXZlUkRTKGhpam9zX3BhcmFfc2FsLCBmaWxlPSJEYXRvcy9oaWpvc19lbW92aTIwMTcuUmRhIikKCmBgYAoKIyBIaWpvcyBjb25zdHJ1Y2Npw7NuIGluZ3Jlc29zCgpgYGB7ciwgY2FyZ2FyX2VuaWdoMTZ9CnBvYmxhY2lvbl9lMTY8LWNhcmdhcl9lbmlnaF9zYXYoInBvYmxhY2lvbiIpIAp0cmFiYWpvc19lMTY8LWNhcmdhcl9lbmlnaF9zYXYoInRyYWJham9zIikKaW5ncmVzb3NfZTE2PC1jYXJnYXJfZW5pZ2hfc2F2KCJpbmdyZXNvcyIpCmBgYAoKIyMgcG9ibGFjaW9uIGVuaWdoIDE2CmBgYHtyIHBvYmxhY2lvbl9lMTZ9CnBvYmxhY2lvbl9lMTZmPC0gcG9ibGFjaW9uX2UxNiU+JQogICNmaWx0ZXIoYXNpc19lc2MgPT0gIjIiKSU+JSAjIHlhIG5vIGFzaXN0ZSBhIGxhIGVzY3VlbGEKICBzZWxlY3QoZm9saW92aXYsZm9saW9ob2csbnVtcmVuLHNleG8sZWRhZCxuaXZlbGFwcm9iKSU+JQogIGZpbHRlcihiZXR3ZWVuKGFzLmludGVnZXIoZWRhZCksMjUsNDApKQojIG5vIGZpbHRyYW1vcyBwb3IgamVmZSBkZSBob2dhcgoKbnJvdyhwb2JsYWNpb25fZTE2ZikKc3VtKGlzLm5hKHBvYmxhY2lvbl9lMTZmKSkKCmBgYAoKIyMgdHJhYmFqb3MgZW5pZ2ggMTYKCkZpbHRyYW1zIGxvcyB0cmFiYWpvcwoKYGBge3IgdHJhYmFqb3NfZTE2fQp0cmFiYWpvc19lMTZmPC10cmFiYWpvc19lMTYlPiUKc2VsZWN0KGZvbGlvdml2LGZvbGlvaG9nLG51bXJlbikjJT4lCiAjIGZpbHRlcighaXMubmEoc2luY28pKQpOUk9XKHRyYWJham9zX2UxNmYpCiNOUk9XKHRyYWJham9zKQpzdW0oaXMubmEodHJhYmFqb3NfZTE2ZikpCgpgYGAKCiMjIEluZ3Jlc29zIGVuaWdoIDIwMTYKCmBgYHtyIGluZ3Jlc29zX2UxNn0KZmFtaWxpYXNfaW50ZWdyYW50ZXNfZTE2IDwtIGZ1bmN0aW9uKGRmLGZvbGhvZyxucil7CiAgZGZuIDwtIGRmICU+JQogICAgZmlsdGVyKGZvbGlvaG9nICVpbiUgZm9saG9nKSU+JQogICAgZmlsdGVyKG51bXJlbiAlaW4lIG5yKQogIHJldHVybihkZm4pCn0gCgoKCmluZ3Jlc29zX2FjdV9lMTYgPC0gZnVuY3Rpb24oZGYsY2xhdnM9Z2V0X2xhYmVscyhpbmdyZXNvc19lMTYkY2xhdmUpKXsKIGRmbiA8LSBkZiAlPiUKICAgZ3JvdXBfYnkoZm9saW92aXYsIGZvbGlvaG9nLCBudW1yZW4pICU+JQogICBmaWx0ZXIoY2xhdmUgJWluJSBjbGF2cyklPiUKICAgc3VtbWFyaXNlKAogICBjbGF2ZXNfYSA9IHBhc3RlKGNsYXZlLGNvbGxhcHNlID0gIiwiKSwKICBpbmdfdHJpX3QgPSBzdW0oaW5nX3RyaSksCiAgaW5nX21lbl9wID0gaW5nX3RyaV90LzMKICApICU+JSB1bmdyb3VwKCkKIAogCiByZXR1cm4oZGZuKQp9Cgpob2dhcmVzIDwtIGMoIjEiLCIyIiwiMyIsIjQiLCI1IikKcGVyc29uYXNfaCA8LSBjKCcwMScsJzAyJywnMDMnLCcwNCcsJzA1JykKCmE8LWZhbWlsaWFzX2ludGVncmFudGVzX2UxNihpbmdyZXNvc19lMTYsaG9nYXJlcyxwZXJzb25hc19oKQpoZWFkKGEpCmNsYXZlczwtYygiUDAwMSIsIlAwMDIiLCJQMDAzIiwiUDAxMSIsIlAwMjMiLCJQMDI0IiwiUDA1NCIsIlAwNTUiLCJQMDU2IiwgIlAwNTkiLCJQMDYwIiwiUDA2MSIsIlAwNjMiLCJQMDY4IiwiUDA2MCIsIlAwNzAiLCJQMDcxIiwiUDA3MiIsIlAwNzMiLCJQMDc0IiwiUDA3NSIsIlAwNzYiLCJQMDc3IiwiUDA3OCIsIlAwNzkiLCJQMDgwIikKaW5ncmVzb3NfZTE2YTwtaW5ncmVzb3NfYWN1X2UxNihhLGNsYXZlcykgCmluZ3Jlc29zX2UxNmEKYGBgCgoKIyMgQmFzZSBjcnV6YWRhIHBvYi10cmEKCmBgYHtyIGJhc2VfY3J1emFkYX0KZW5pZ2hfMTY8LSBmdWxsX2pvaW4ocG9ibGFjaW9uX2UxNmYsdHJhYmFqb3NfZTE2ZiklPiUKICAgZHJvcF9uYSgpCiNlbmlnaDwtZnVsbF9qb2luKGVuaWdoLGNvbmNlbnRyYWRvKSU+JQogIyBkcm9wX25hKCkKbnJvdyhlbmlnaF8xNikKc3VtKGlzLm5hKGVuaWdoXzE2KSkKYGBgCgojIyBDYW1iaW8gZXRpcXVldGFkbwpQYXNhbW9zIGxhcyBldGlxZXV0ZWFzIGRlIGVkdWNhY2nDs24gZGUgZW1vdmkgYSAKCmBgYHtyIGNhbWJpYV9lX2VzcnVfb2N1fQoKaGlqb3NfZW1vdmkgPC0gcmVhZFJEUyhmaWxlPSJEYXRvcy9oaWpvc19lbW92aTIwMTcuUmRhIikKaGlqb3NfZW1vdmk8LSBoaWpvc19lbW92aSAlPiUKICBtdXRhdGUocDEzX20gPSBpZmVsc2UocDEzICVpbiUgYygxKSwiMSIsCiAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UoIHAxMyA9PSAyLCIyIiwKICAgICAgICAgICAgICAgICAgICAgIGlmZWxzZShwMTMgJWluJSBjKDMsNCksIjMiLAogICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKCBwMTMgJWluJSBjKDUsNiksIjQiLAogICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKHAxMyAlaW4lIGMoNyw4KSwiNiIsCiAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UocDEzICVpbiUgYyg5LDEwKSwiNSIsCiAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UocDEzPT0xMSwiNyIsCiAgICAgICAgICAgICAgICAgICAgICBpZmVsc2UocDEzPT0xMiwiOCIsIjAiKSkpKSkpKSkpCnVuaXF1ZShoaWpvc19lbW92aSRwMTNfbSkKCmVuaWdoXzE2PC1lbmlnaF8xNiU+JQogIG11dGF0ZShuaXZlbGFwcm9iPWlmZWxzZShuaXZlbGFwcm9iPT0iOSIsIjgiLG5pdmVsYXByb2IpKQoKZW5pZ2hfMTZmPC1lbmlnaF8xNiU+JQogIGZpbHRlcihuaXZlbGFwcm9iICVpbiUgdW5pcXVlKGhpam9zX2Vtb3ZpJHAxM19tKSkKCm5yb3coZW5pZ2hfMTZmKQpgYGAKCgojIyBCdXNjYXIgZm9saW9zIGNvbiBjYXJhY3RlcmlzdGljYXMKCmBgYHtyIGJ1c2NhX2ZvbGlvc19lMTZ9CmJ1c2NhPC1mdW5jdGlvbihpKXsKcmV0dXJuKGVuaWdoXzE2ZiU+JQogIGZpbHRlcigKICAgIGFzLmludGVnZXIoc3Vic3RyKGZvbGlvdml2LDEsMikpPT1oaWpvc19lbW92aVtpLF0kRXN0YWRvICYKICAgIHNleG8gPT0gaGlqb3NfZW1vdmlbaSxdJHAwNiAmCiAgICBlZGFkID09IGhpam9zX2Vtb3ZpW2ksXSRwMDUgJgogICAgI3NpbmNvID09IGhpam9zX2Vtb3ZpW2ksXSRTSU5DTzMgJgogICAgbml2ZWxhcHJvYiA9PSBoaWpvc19lbW92aVtpLF0kcDEzX20pJT4lCiAgc2VsZWN0KGZvbGlvdml2LGZvbGlvaG9nKSkKfQoKICAKYTwtbGFwcGx5KDE6bnJvdyhoaWpvc19lbW92aSksIGJ1c2NhKQoKY29udGFkb3I8LTAKZm9yKGkgaW4gMTpucm93KGhpam9zX2Vtb3ZpKSkKe2lmKG5yb3coYVtbaV1dKT4wKQogIGNvbnRhZG9yPC1jb250YWRvciArMQp9CmNvbnRhZG9yCnNhdmVSRFMoYSwgZmlsZT0iRGF0b3MvZm9saGlqb3NfZW5pZ2gxNl9lbW92aS5SZGEiKQpgYGAKCkRlbCB0b3RhbCwgMTA3NyBwZXJzb25hcyB0aWVuZW4gZ2VtZWxvcwoKIyMjIGZpbHRhbW9zIHNvbG8gbG9zIGhpam9zIGVuY29udHJhZG9zCgoKYGBge3IgZXRpcXVlX2hpam9zX2VuY199IAojIGV0aXF1ZXRhbW9zIHBhcmEgbm8gcGVyZGVyIGxhIG51bWVyYWNpb24gcmVzcGVjdG8gYSBsb3MgaGlqb3Mgb3JpZ2luYWxlcwpmb2xoaWpvc19lMTZfZW1vdmkgPC0gcmVhZFJEUyhmaWxlPSJEYXRvcy9mb2xoaWpvc19lbmlnaDE2X2Vtb3ZpLlJkYSIpCm5hbWVzKGZvbGhpam9zX2UxNl9lbW92aSkgPC0gYXMuY2hhcmFjdGVyKDE6bnJvdyhoaWpvc19lbW92aSkpCmxlbmd0aChmb2xoaWpvc19lMTZfZW1vdmkpCmBgYAoKYGBge3IgZmlsdHJhX2hpam9zX2VuY29ufQpMIDwtIGMoKQpmb3IoaSBpbiAxOmxlbmd0aChmb2xoaWpvc19lMTZfZW1vdmkpKXsKICBpZighKG5yb3coZm9saGlqb3NfZTE2X2Vtb3ZpW1tpXV0pPjApKXsKICAgIEw8LWMoTCxpKX0KfQojIFNvbG8gaGlqb3MgcXVlIHNlIGxlcyBwdWRvIGVuY29udHJhciBlbiBlbmlnaC0yMDE2IDEwNzcvMTEzMQpmb2xoaWpvc19lMTZfZW1vdmlmPC1mb2xoaWpvc19lMTZfZW1vdmlbLUxdCiAgICAKCmxlbmd0aChmb2xoaWpvc19lMTZfZW1vdmlmKQoKI25hbWVzKGZvbGhpam9zX2Vtb3ZpZikKI25hbWVzKGZvbGhpam9zX2Vtb3ZpKQpgYGAKCiMjIyBVbmljb3MgZm9saW9zLCBkaWZlcmVudGVzIHRyYWJham9zCgoKCmBgYHtyIGZpbHRyYV9maWxfaGlqX3VuaX0KdW5pY29zX2ZvbGlvczwtZnVuY3Rpb24oaSl7CmZvbGhpam9zX2UxNl9lbW92aWZbW2ldXSU+JQogIGRpc3RpbmN0KCkKfQoKIyBmaWx0cmFtb3MgdW5pY29zIGZvbGlvcyBwb3IgZGlmZXJlbnRlcyB0cmFiYWpvcyBkZSBsYSBtaXNtYSBwZXJzb25hCmE8LWxhcHBseSgxOmxlbmd0aChmb2xoaWpvc19lMTZfZW1vdmlmKSwgdW5pY29zX2ZvbGlvcykKbmFtZXMoYSk8LW5hbWVzKGZvbGhpam9zX2UxNl9lbW92aWYpCmxlbmd0aChhKQoKZm9saGlqb3NfZTE2X2Vtb3ZpZjwtYQpgYGAKCgojIyMgT2JzZXJ2YW1vcyBsYXMgZWRhZGVzIGRlIGxvcyBlbmNvbnRyYWRvcwoKYGBge3IgZ3JhX2VkYWRlc19oX2VuY30KCm15TWVudUl0ZW1zIDwtIGMoImRvd25sb2FkUE5HIiwgImRvd25sb2FkSlBFRyIsICJkb3dubG9hZFBERiIsICdkb3dubG9hZFNWRycsICdwcmludENoYXJ0JykKCmhpam9zX2Vtb3ZpJT4lCiAgc2xpY2UoYXMuaW50ZWdlcihuYW1lcyhmb2xoaWpvc19lMTZfZW1vdmlmKSkpJT4lCiAgc2VsZWN0KHAwNSklPiUKICBjb3VudChwMDUpJT4lCiAgICBoY2hhcnQoJ2NvbHVtbicsCiAgICAgICAgIGhjYWVzKCB5ID0gJ24nKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIiIKICApICU+JQogICNoY19zdWJ0aXRsZSh0ZXh0ID0gIkxhcyBlZGFkZXMgZXN0w6FuIGFncnVwYWRhcyBlbiBpbnRlcnZhbG9zIAogICAjICAgICAgICAgICBkZSAxMCBhw7FvcyAoZGEgY2xpYyBzb2JyZSBGIG8gTSkiKSAlPiUKICAjIGhjX2NyZWRpdHMoCiAgIyAgZW5hYmxlZCA9IFRSVUUsIHRleHQgPSAiU291cmNlOiBTU1MiLAogICMgIHN0eWxlID0gbGlzdChmb250U2l6ZSA9ICIxMnB4IikpJT4lCiAgaGNfeUF4aXModGl0bGUgPSBsaXN0KHRleHQgPSAiTsO6bWVybyBkZSBwYXJ0aWNpcGFudGVzIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJOw7ptZXJvIGRlIHBlcnNvbmFzIiksCiAgICAgICAgICAgY2F0ZWdvcmllcyA9IGFzLmNoYXJhY3RlcigyNTo0MCkpICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCgoKYGBgCgojIyMgT2JzZXJ2YW1vcyBsYXMgZXN0YWRvcyBkZSBsb3MgZW5jb250cmFkb3MKCmBgYHtyIGdyYV9lc3RhZG9zX2hfZTE2fQpoaWpvc19lbW92aSU+JQogIHNsaWNlKGFzLmludGVnZXIobmFtZXMoZm9saGlqb3NfZTE2X2Vtb3ZpZikpKSU+JQogIGNvdW50KEVzdGFkbyklPiUKICAgIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnbicpKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiIgogICkgJT4lCiAgI2hjX3N1YnRpdGxlKHRleHQgPSAiTGFzIGVkYWRlcyBlc3TDoW4gYWdydXBhZGFzIGVuIGludGVydmFsb3MgCiAgICMgICAgICAgICAgIGRlIDEwIGHDsW9zIChkYSBjbGljIHNvYnJlIEYgbyBNKSIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJOw7ptZXJvIGRlIHBhcnRpY2lwYW50ZXMiKSklPiUKICBoY194QXhpcyh0aXRsZT1saXN0KHRleHQ9Ik7Dum1lcm8gZGUgcGVyc29uYXMiKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhoaWpvc19lbW92aSRFc3RhZG8pKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKYGBgCgoKIyMgSW5ncmVzbyBoaWpvIGVuaWdoMTYtZW1vdmkKCmBgYHtyIGluZ3JlX2hpam9fZTE2X2Vtb3ZpfQoKaW5ncmVzb19oaWpvX2UxNl9lbW92aTwtZnVuY3Rpb24oaSl7CiAgaW5ncmVzb3NfZTE2YSU+JQogIGZpbHRlcihmb2xpb3ZpdiAlaW4lIGZvbGhpam9zX2UxNl9lbW92aWZbW2ldXSRmb2xpb3ZpdiAmCiAgICBmb2xpb2hvZyAlaW4lIGZvbGhpam9zX2UxNl9lbW92aWZbW2ldXSRmb2xpb2hvZyklPiVzdW1tYXJpc2UoCiAgICAgaWRfaGlqbyA9IG5hbWVzKGZvbGhpam9zX2UxNl9lbW92aWZbaV0pLAogICAgIGlkX2hvID0gaGlqb3NfZW1vdmlbYXMuaW50ZWdlcihuYW1lcyhmb2xoaWpvc19lMTZfZW1vdmlmW2ldKSksImlkX2hvIl0sCiAgICAgbW92PSBoaWpvc19lbW92aVthcy5pbnRlZ2VyKG5hbWVzKGZvbGhpam9zX2UxNl9lbW92aWZbaV0pKSwibW92Il0sCiAgICAgcmVnaW9uaCA9IGhpam9zX2Vtb3ZpW2FzLmludGVnZXIobmFtZXMoZm9saGlqb3NfZTE2X2Vtb3ZpZltpXSkpLCJyZWdpb24iXSwKICAgICBlZGFkID0gaGlqb3NfZW1vdmlbYXMuaW50ZWdlcihuYW1lcyhmb2xoaWpvc19lMTZfZW1vdmlmW2ldKSksInAwNSJdLAogICAgICBpbmdfbWVuX3BfaCA9bGlzdChpbmdfbWVuX3ApLAogICAgIGNvaG9ydCA9IGhpam9zX2Vtb3ZpW2FzLmludGVnZXIobmFtZXMoZm9saGlqb3NfZTE2X2Vtb3ZpZltpXSkpLCJwMTMzIl0sCiAgICBlc3RyYXRvID0gaGlqb3NfZW1vdmlbYXMuaW50ZWdlcihuYW1lcyhmb2xoaWpvc19lMTZfZW1vdmlmW2ldKSksImVzdHJhdG8iXSwKICAgIGVzdGFkbyA9IGhpam9zX2Vtb3ZpW2FzLmludGVnZXIobmFtZXMoZm9saGlqb3NfZTE2X2Vtb3ZpZltpXSkpLCJFc3RhZG8iXSwKICAgIHNleG8gPSBoaWpvc19lbW92aVthcy5pbnRlZ2VyKG5hbWVzKGZvbGhpam9zX2UxNl9lbW92aWZbaV0pKSwicDA2Il0KICAgICApCn0KIzI3MywzMzIgc29uIHZhY2lvcwojIGluZ3Jlc28gaGlqbyBwZXJvIHVhbGd1bm9zIG5vIHBvZHJpYW4gZXN0YXIgcG9yIG5vIHRlbmVyIHJlZ2lzdHJvIGRlIHNhbGFyaW8KCmE8LWxhcHBseSgxOmxlbmd0aChmb2xoaWpvc19lMTZfZW1vdmlmKSwgaW5ncmVzb19oaWpvX2UxNl9lbW92aSkKaW5ncmVzb19oaWpvZ19lMTZfZW1vdmk8LWEKbGVuZ3RoKGluZ3Jlc29faGlqb2dfZTE2X2Vtb3ZpKQppbmdyZXNvX2hpam9nX2UxNl9lbW92aVtbMzMyXV0KeDwtaW5ncmVzb19oaWpvZ19lMTZfZW1vdmlbWzMzMl1dJGluZ19tZW5fcF9oWzFdCnN1bShpbmdyZXNvX2hpam9nX2UxNl9lbW92aVtbMzMyXV0kaW5nX21lbl9wX2hbWzFdXSxuYS5ybSA9IFRSVUUpCmBgYAojIyBGaWx0cmFtb3Mgc29icmUgaW5ncmVzb3MgZW5jb250cmFkb3MKCmBgYHtyIGZpbF9pbmdyZV9lbmNfZTE2X2Vtb3ZpfQoKTCA8LSBjKCkKZm9yKGkgaW4gMTpsZW5ndGgoaW5ncmVzb19oaWpvZ19lMTZfZW1vdmkpKXsKICBpZihzdW0oaW5ncmVzb19oaWpvZ19lMTZfZW1vdmlbW2ldXSRpbmdfbWVuX3BfaFtbMV1dLG5hLnJtID0gVFJVRSk9PTApewogICAgTDwtYyhMLGkpfQp9Cmxlbmd0aChMKQoKaW5ncmVzb19oaWpvZ19lMTZfZW1vdmk8LWluZ3Jlc29faGlqb2dfZTE2X2Vtb3ZpWy1MXQoKbGVuZ3RoKGluZ3Jlc29faGlqb2dfZTE2X2Vtb3ZpKQppbmdyZXNvX2hpam9nX2UxNl9lbW92aVsxXQppbmdyZXNvX2hpam9nX2UxNl9lbW92aVsyXQoKCmluZ3Jlc29faGlqb2dfZTE2X2Vtb3ZpZjwtYmluZF9yb3dzKGluZ3Jlc29faGlqb2dfZTE2X2Vtb3ZpWzE6bGVuZ3RoKGluZ3Jlc29faGlqb2dfZTE2X2Vtb3ZpKV0pCgoKbnJvdyhpbmdyZXNvX2hpam9nX2UxNl9lbW92aWYpCgpzYXZlUkRTKGluZ3Jlc29faGlqb2dfZTE2X2Vtb3ZpZiwgZmlsZT0iRGF0b3MvaW5ncmVzb19oaWpfZl9lbW92aS5SZGEiKQpgYGAKCiMgSGlqb3MgY29uIGluZ3Jlc28KCmBgYHtyIGZpbHRyb19oaWpvc195YV9pbmdyZXNvfQpoaWpvc19lbW92aV9ocCA8LSByZWFkUkRTKGZpbGU9IkRhdG9zL2luZ3Jlc29faGlqX2ZfZW1vdmkuUmRhIikKCm5yb3coaGlqb3NfZW1vdmlfaHApCmhpam9zX2Vtb3ZpX2hwIAojIHAwNSBlZGFkIGFjdAojIHAwNiBzZXhvIGFjdAojIHAxMyBlZHVjIGhpam8KIyBTSU5DTzMsIG9jdXBhY2nDs24gaGlqbwojIHAyMyBlbiBxZXUgZXN0YWRvIHZpdmlhIGEgbG9zIDE0CiMgcDI2IHByaW5jaXBhbCBzb3N0ZW4gZWPDs21pY28KIyBwMzhfMTEgZWRhZCBwYWRyZSAyMDE2CiMgcDM4bV8xMSBlZGFkIG1hZHJlIDIwMTYKIyBwNDMgbml2ZWwgZWR1Y2F0aXZvIHBhZHJlCiNwNDNtIG5pdmVsIGVkdWNhdGl2byBtYWRyZQojIGNtbzFfMiBvY3VwYWNpb24gZGVsIHBhZHJlCiMgY21vMl8yIG9jdXBhY2lvbiBkZSBsYSBtYWRyZSAKCgp2YXJwPC1jKCJFc3RhZG8iLCJwMDUiLCJwMDYiLCJwMTMiLCJTSU5DTzMiLCJwMjMiLCJwMjYiLCJwMzhfMTEiLCJwMzhtXzExIiwicDQzIiwicDQ0IiwKICAgICAgICAicDQzbSIsInA0NG0iLCJjbW8xXzIiLCJjbW8yXzIiLCJtb3YiLAogICAgICAgICJyZWdpb24iLCJwMTMzIikKcGFkcmVzX2g8LWRhdGFfZW1vdmkyMDE3JT4lCiAgICBmaWx0ZXIocDAyID09IDEpICAlPiUgI2NvbXBhcnRpciBnYXNvdCBwYXJhIGNvbWVyCiAgZmlsdGVyKGJldHdlZW4ocDA1LDI1LDQwKSkgJT4lICMgZWRhZAogICNmaWx0ZXIocDA4ID09IDEpICAlPiUgCiAgZmlsdGVyKHAxMiA9PSAyKSAgJT4lIyB5YSBubyBlc3R1ZGlhCiAgZmlsdGVyKHAyNiA9PSAxIHwgcDI2PT0yICkgJT4lICMgc29zdGVuIHByaW5jaXBhbCBwYXBhLCBtYW1hLCAKICAgZmlsdGVyKCghaXMubmEocDQzKSAmIHA0MyE9OTggJiBwMjYgPT0gMSApfAogICAgICAgICAgICAoIWlzLm5hKHA0M20pICYgcDQzbSE9OTggICYgcDI2ID09IDIgKSkgJT4lICMgcmVwb3J0YSBlZHVjYWNpw7NuIGRlIHBwCiAgIGZpbHRlcighaXMubmEocDEzKSklPiUgIyAgcmVwb3J0YSBlZHVjYWNpw7NuCiAgZmlsdGVyKFNJTkNPMyAhPSIiKSAlPiUjIHJlcG9ydGEgb2ZpY2lvIGFjdHVhbAogICBmaWx0ZXIocDY4ID09IDEgfCBwNjkgPT0gMSkgICU+JSAjIHNpIHRyYWJhamEKICAgZmlsdGVyKHAxMzIgJWluJSBjKDEpKSAlPiUjIHBlcnNvbmEgcXVlIGFwb3J0YW4gaW5ncmVzbwogIGZpbHRlcighcDEzMyAlaW4lIGMoOCw5LE5BKSApJT4lCiAgc2VsZWN0KHZhcnApJT4lCiAgc2xpY2UoYXMuaW50ZWdlcih1bmxpc3QoaGlqb3NfZW1vdmlfaHAlPiVzZWxlY3QoaWRfaGlqbykpKSklPiUKICBtdXRhdGUoCiAgICAgICAgIHBwX2lkX2hpam8gPSBoaWpvc19lbW92aV9ocCU+JXB1bGwoaWRfaGlqbyksCiAgICAgICAgIGluZ19oID0gaGlqb3NfZW1vdmlfaHAlPiVwdWxsKGluZ19tZW5fcF9oKSwKICAgICAgICAgY29ob3J0ID0gaWZlbHNlKHAxMzM9PTEsMixwMTMzKS0xCiAgICAgICAgICklPiUKICByZW5hbWUoCiAgICAgICAgICBlZGFkX2ggPSBwMDUsCiAgICAgICAgICBzZXhvX2ggPSBwMDYsCiAgICAgICAgICBlZHVfaCA9IHAxMywKICAgICAgICAgIG9jdV9oID0gU0lOQ08zLAogICAgICAgICAgcHBfZXN0YWRvID0gcDIzLAogICAgICAgICAgcHAgPSBwMjYsCiAgICAgICAgICBwX2VkYWRfMjAxNj0gcDM4XzExLAogICAgICAgICAgbV9lZGFkXzIwMTYgPSBwMzhtXzExLAogICAgICAgICAgcF9lZHUgPSBwNDMsCiAgICAgICAgICBwX2VkdWcgPSBwNDQsCiAgICAgICAgICBtX2VkdSA9IHA0M20sCiAgICAgICAgICBtX2VkdWcgPSBwNDRtLAogICAgICAgICAgcF9vY3UgPSBjbW8xXzIsCiAgICAgICAgICBtX29jdSA9IGNtbzJfMgogICAgICAgICApJT4lCiAgbXV0YXRlKAogICAgICAgIHBfZWR1ID0gYXMuaW50ZWdlcihwX2VkdSksCiAgICAgICAgbV9lZHUgPSBhcy5pbnRlZ2VyKG1fZWR1KQogICkKICAKIAojIGxhcyBvY3VwYWNpb25lcyBubyBlbmNvbnRyYWRhcyBsYXMgc3VzdGl0dWltb3MgcG9yIHVuIE5BCnBhZHJlc19oPC1wYWRyZXNfaCU+JQogIG11dGF0ZShwX29jdSA9IGlmZWxzZShwX29jdT09Ii4iLE5BLHBfb2N1KSwKICAgICAgICAgbV9vY3UgPSBpZmVsc2UobV9vY3U9PSIuIixOQSxtX29jdSkpCgp1bmlxdWUocGFkcmVzX2gkcF9vY3UpCnVuaXF1ZShwYWRyZXNfaCRtX29jdSkKaGVhZChwYWRyZXNfaCkKCmBgYAoKIyMgQ3JlYXIgYmFzZSBsaW1waWEKCmBgYHtyIGJhc2VfbGltX2hfaW5nfQoKCmZpbHRyb19wcF9jPC1mdW5jdGlvbihkZl8xLGdlbmVyYWwgPSAwKQp7CiAgI3JlY2liZSB1biBoaWpvIGRlIHVuIGRhdGFmcmFtZSwgcGFyYSBwb2xpbW9yZmlzbW8KICAjIGdlbmVyYWwgPSAweSByZWdyZXNhIHVuIGRhdGEgZnJhbWUgY29uIGxvcyBkYXRvcwogICMgb3JkZW5hZG9zIGRlbCBoaWpvCiAgaWYoZGZfMVsicHAiXT09MSkKICB7CiAgICBkZm4gPC0gZGZfMSU+JQogICAgICAgICAgZmlsdGVyKHBwPT0xKSU+JQogICAgICAgICAgc2VsZWN0KHN0YXJ0c193aXRoKGMoInBwIiwicF8iKSksCiAgICAgICAgICAgICBpbmdfaCxlZHVfaCxvY3VfaCxlZGFkX2gscF9lZGFkXzIwMTYsCiAgICAgICAgICAgICByZWdpb24sY29ob3J0KSU+JQogICAgICAgICAgbXV0YXRlKHBwX2VkYWQyMDE2ID0gcF9lZGFkXzIwMTYpJT4lCiAgICAgICAgICByZW5hbWUoCiAgICAgICAgICAgIGlkX2hpam8gPSBwcF9pZF9oaWpvLAogICAgICAgICAgICBwcF9zZXhvID0gcHAsCiAgICAgICAgICAgIHBwX2VkYWQgPSBwX2VkYWRfMjAxNiwKICAgICAgICAgICAgcHBfZWR1YyA9IHBfZWR1LAogICAgICAgICAgICBwcF9lZHVjZyA9IHBfZWR1ZywKICAgICAgICAgICAgcHBfb2N1cCA9IHBfb2N1CiAgICAgICAgICApJT4lCiAgICAgICAgbXV0YXRlKHBwX2VkYWQgPSBwcF9lZGFkICsgKDE0LWVkYWRfaCkpCiAgfQogIGlmKGRmXzFbInBwIl09PTIpCiAgICB7CiAgICBkZm48LWRmXzElPiUKICAgICAgICBmaWx0ZXIocHA9PTIpJT4lCiAgICAgICAgc2VsZWN0KHN0YXJ0c193aXRoKGMoInBwIiwibV8iKSksaW5nX2gsZWR1X2gsCiAgICAgICAgICAgIG9jdV9oLGVkYWRfaCxtX2VkYWRfMjAxNiwKICAgICAgICAgICAgcmVnaW9uLGNvaG9ydCklPiUKICAgICAgIG11dGF0ZShwcF9lZGFkMjAxNiA9IG1fZWRhZF8yMDE2KSU+JQogICAgICAgIHJlbmFtZSgKICAgICAgICAgIGlkX2hpam8gPSBwcF9pZF9oaWpvLAogICAgICAgICAgcHBfc2V4byA9IHBwLAogICAgICAgICAgcHBfZWRhZCA9IG1fZWRhZF8yMDE2LAogICAgICAgICAgcHBfZWR1YyA9IG1fZWR1LAogICAgICAgICAgcHBfZWR1Y2cgPSBtX2VkdWcsCiAgICAgICAgICBwcF9vY3VwID0gbV9vY3UKICAgICAgICApJT4lCiAgICAgICAgbXV0YXRlKHBwX2VkYWQgPSBwcF9lZGFkICsgKDE0LWVkYWRfaCkpCiAgfQogIGlmKGlzLm5hKGRmbiRwcF9lZGFkKSAmIGdlbmVyYWwpewogICAgcmV0dXJuKCJORCIpCiAgfQogIHJldHVybihkZm4pCn0KCiNjb21wb3JiYW1vcyBxZXUgZnVuY2lvbmUgYmllbgpmaWx0cm9fcHBfYyhwYWRyZXNfaFsxLF0pCgoKYWNvbW9kYV9kZl9jPC1mdW5jdGlvbihkZil7CiAgI2RhbW9zIHVuIGRmIGRlIHVuYSBlZGFkLCAgeQogICMgbm9zIHJlZ3Jlc2EgdW4gZGF0YSBmcmFtZSBhY29tb2RhZG8KICBhdXg8LWZ1bmN0aW9uKGkpewogICAgcmV0dXJuKGRmW2ksXSkKICB9CiAgYTwtbGFwcGx5KDE6bnJvdyhkZiksYXV4KQogIEw8LWxhcHBseShhLGZpbHRyb19wcF9jKQogIGRmbiA8LWJpbmRfcm93cyhMWzE6bGVuZ3RoKEwpXSkKICByZXR1cm4oZGZuKQp9CgpkZmg8LWFjb21vZGFfZGZfYyhwYWRyZXNfaCkKCgoKcHJvX2VkYWRfYyA8LSBmdW5jdGlvbihkZil7CiAgI2xlIGRhbW9zIGVsIGRmIHkgbm9zIHJlZ3Jlc2EgZWwgcHJvbWVkaW8gZGUgbGEgZWRhZGUgIGxvcyBwYWRyZXMKICBkZiU+JXN1bW1hcmlzZSgKICAgIHByb21lZGlfZWRhZF9wYWRyZXMgPSBtZWFuKHBwX2VkYWQyMDE2LG5hLnJtPVRSVUUpKQogIH0KCmVkYWRlc19wcm88LSBwcm9fZWRhZF9jKGRmaCkKCmVkYWRlc19wcm8KI2VkYWRlcyBkZSBwYWRyZXMgZmFsdGFudGVzCnN1bShpcy5uYShkZmgkcHBfZWRhZDIwMTYpKQojIApoZWFkKGRmaCkKCiMgMjAxNi0yMQpgYGAKIyMgQ29kaWZpY2FjaW9uIGVkdWFjacOzbgoKCmBgYHtyIGNvZF9lZHVfaGlqb30KCmRmaF9jPC0gZGZoJT4lCiAgIG11dGF0ZSgKICAgcHBfZWR1Y19hID0gaWZlbHNlKHBwX2VkdWM9PTEsMSwgICAgI3NpbiBpbnN0cnVjY2lvbigxKQogICAgICAgICAgaWZlbHNlKHBwX2VkdWM9PTIsMStwcF9lZHVjZywKICAgICAgICAgIGlmZWxzZShwcF9lZHVjICVpbiUgYygzLDQpLDcrcHBfZWR1Y2csCiAgICAgICAgICBpZmVsc2UocHBfZWR1YyAlaW4lIGMoNSw2LDcsOCw5KSwxMCtwcF9lZHVjZywKICAgICAgICAgIGlmZWxzZShwcF9lZHVjICVpbiUgYygxMCwxMSksMTMrcHBfZWR1Y2csMTcrcHBfZWR1Y2cpKSkpKQogICkKCiAgCgp1bmlxdWUoZGZoX2MkcHBfZWR1Y19hKQoKZGZoX2M8LWRmaF9jJT4lCiAgbXV0YXRlKAogICBwcF9lZHVjX2FjID0gaWZlbHNlKHBwX2VkdWNfYSAlaW4lIDA6NSwiQzEiLCAgICAKICAgICAgICAgIGlmZWxzZShwcF9lZHVjX2EgJWluJSA2OjEwICwiQzIiLAogICAgICAgICAgaWZlbHNlKHBwX2VkdWNfYSAlaW4lIDExOjEyLCJDMyIsCiAgICAgICAgICBpZmVsc2UocHBfZWR1Y19hICVpbiUgMTM6MTQsIkM0IiwiQzUiKSkpKQogICkKCmBgYAoKIyBQYWRyZXMgY29uc3RydWNjacOzbiBpbmdyZXNvcwoKU2VsZWNjaW9uYW1vcyBkZSBsYSBFTklHSCAxOTk3LCBubyBoYXkgZW50b25jZXMgMTk5OAoKIyMgUG9ibGFjaW9uIGVuaWdoIDk4CgpgYGB7ciBwb2JsYWNpb25fZTk4fQoKcG9ibGFjaW9uPC1yZWFkLmRiZigKICAgICAgICAgICAgICBmaWxlPSJEYXRvcy9FTklHSC1IaXN0b3JpY2EvMTk5OC9QT0JMQTk4LmRiZiIKICAgICAgICAgICAgICApCgoKCnBvYmxhY2lvbl9lOTg8LXBvYmxhY2lvbiU+JQogIGZpbHRlcigKICAgIHBhcmVudGVzY28gPT0gIjAxIiwKICAgIGJldHdlZW4oZWRhZCwzMCw1MCksCiAgICAhaXMubmEoZWRfZm9ybWFsKSwKICAgICFpcy5uYShlZF90ZWNuaWNhKSwKICAgICFpcy5uYShvY3VwYWNpb24pLAogICAgbl9lbXBsZW9zPT0xLCAjIGVsIGVudHJldmlzdGFkbyBzb2xvIHByb3BvcmNpb25hIHVuYSBvY3VwYWNpw7NuCiAgKSU+JQogIHNlbGVjdCgKICAgIGZvbGlvLAogICAgbnVtX3JlbiwKICAgIGVkYWQsCiAgICBlZF9mb3JtYWwsCiAgICBlZF90ZWNuaWNhLAogICAgb2N1cGFjaW9uCiAgKSU+JQogbXV0YXRlKAogIGVkX2Zvcm1hbCA9IGFzLmludGVnZXIoYXMuY2hhcmFjdGVyKGVkX2Zvcm1hbCkpLAogICBlZF90ZWNuaWNhPSBhcy5pbnRlZ2VyKGFzLmNoYXJhY3RlcihlZF90ZWNuaWNhKSksCiAgZXN0YWRvID0gc3Vic3RyKGZvbGlvLDUsNikKICkKCiN1bmlxdWUocG9ibGFfZW5pZ2gxOTk4JGVkX2Zvcm1hbCkKI3BvYmxhX2VuaWdoMTk5OCRlZF9mb3JtYWwKbnJvdyhwb2JsYWNpb25fZTk4KQpoZWFkKHBvYmxhY2lvbl9lOTgkZWRfZm9ybWFsKQpzdHIocG9ibGFjaW9uX2U5OCRlZF9mb3JtYWwpI2NhcmFjdGVyIDIgZXNwYWNpb3MKdW5pcXVlKHBvYmxhY2lvbl9lOTgkZWRfZm9ybWFsKQojcG9ibGFfZW5pZ2gxOTk4JGVkX2Zvcm1hbD09IjAzIgpoZWFkKHBvYmxhY2lvbl9lOTgkZWRfdGVjbmljYSkKc3RyKHBvYmxhY2lvbl9lOTgkZWRfdGVjbmljYSkjY2FyYWN0ZXIgMSBlc3BhY2lvCnVuaXF1ZShwb2JsYWNpb25fZTk4JGVkX3RlY25pY2EpCiNwb2JsYV9lbmlnaDE5OTglPiVjb3VudChuX2VtcGxlb3MpLCBzZSBleHBsb3JvIHBhcmEgcXVpdGFyIHVuYSBvY3VwYWNpb24KbmFtZXMocG9ibGFjaW9uKQpzdHIocG9ibGFjaW9uJHBlcl9pbmcpCmBgYAoKIyMjIENvZGlmaWNhY2nDs24gZWR1Y2FjacOzbiBlbmlnaCAxOTk4CgpgYGB7ciBjb2RfZWRfZTk4fQojIGhhY2Vtb3MgbGEgY29kaWZpY2FjacOzbiBkZSBFTklHSDIwMTggYSBFU1JVCiMxCVByZWVzY29sYXIgbyBrw61uZGVyCiMgMglQcmltYXJpYQojIDMJU2VjdW5kYXJpYSB0w6ljbmljYQojIDQJU2VjdW5kYXJpYSBnZW5lcmFsCiMgNQlQcmVwYXJhdG9yaWEgdMOpY25pY2EKIyA2CVByZXBhcmF0b3JpYSBnZW5lcmFsCiMgNwlUw6ljbmljYSBvIGNvbWVyY2lhbCBjb24gc2VjdW5kYXJpYQojIDgJVMOpY25pY2EgbyBjb21lcmNpYWwgY29uIHByZXBhcmF0b3JpYQojIDkJTm9ybWFsIGLDoXNpY2EgKGNvbiBwcmltYXJpYSBvIHNlY3VuZGFyaQojIDEwIE5vcm1hbCBkZSBsaWNlbmNpYXR1cmEKIyAxMSBQcm9mZXNpb25hbCAobGljZW5jaWF0dXJhIG8gaW5nZW5pZXLDrWEpCiMgMTIgUG9zdGdyYWRvIChtYWVzdHLDrWEgbyBkb2N0b3JhZG8pCiNfX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fX19fXwojIDk4IE5TLCBubyBhcGxpY2EgcG9ycXVlIHBlZGltb3MgbGEgZWR1Y2nDs24gZGVsIHBwIGNvbW8gaW5zdHJ1bWVudG8KCgojIHZlbXNvIGxhcyBjb21iaW5hY2lvbmVzIGRlIGVkdWNhY2nDs24gcGFyYSBjb2RpZmljYXIKCmNvbWI8LXBvYmxhY2lvbl9lOTglPiUKICAgbXV0YXRlKCBjb21iaSA9IHBhc3RlKGFzLmNoYXJhY3RlcihlZF9mb3JtYWwpLGFzLmNoYXJhY3RlcihlZF90ZWNuaWNhKSkpJT4lCiAgc2VsZWN0KGVkX2Zvcm1hbCxlZF90ZWNuaWNhLGNvbWJpKQoKICAKc29ydCh1bmlxdWUoY29tYiRjb21iaSkpCiMgWzFdICIwMSAxIiAiMDIgMSIgIjAzIDEiICIwMyAyIiAiMDQgMSIgIjA1IDEiICIwNiAxIiAiMDcgMSIgIjA3IDIiICIwOCAxIgojIFsxMV0gIjA4IDIiICIwOCAzIiAiMDggNCIgIjA4IDUiICIwOSAxIiAiMDkgNCIgIjA5IDUiICIxMCAxIiAiMTAgMiIgIjEwIDQiCiMgWzIxXSAiMTAgNSIgIjExIDEiICIxMSAzIiAiMTEgNCIgIjExIDUiICIxMSA2IiAiMTEgNyIgIjEyIDEiICIxMiAzIiAiMTIgNSIKIyBbMzFdICIxMiA2IiAiMTIgNyIgIjEzIDEiICIxMyA1IiAiMTMgNiIgIjEzIDciICIxMyA4IiAiMTMgOSIgIjE0IDEiICIxNCAzIgojIFs0MV0gIjE0IDUiICIxNCA2IiAiMTQgNyIgIjE0IDkiICIxNSAxIiAiMTUgMyIgIjE1IDQiICIxNSA1IiAiMTUgNiIgIjE1IDciCiMgWzUxXSAiMTUgOSIgIjE2IDEiICIxNiA1IiAiMTYgNyIgIjE2IDkiCgoKCgojICIxNiAxIiAiMTYgNSIgIjE2IDciICIxNiA5IgoKI2NvZGlmaWNhbW9zIGEgYSBhw7FvcyBkZSBlZHVjYWNpw7NuCnBvYmxhY2lvbl9lOThjPC1wb2JsYWNpb25fZTk4JT4lCiAgIG11dGF0ZSgKICAgZWR1X2EgPSBpZmVsc2UoZWRfZm9ybWFsPT0xICYgZWRfdGVjbmljYT09MSwwLCAgICAjc2luIGluc3RydWNjaW9uKDEpCiAgICAgICAgICBpZmVsc2UoKGVkX2Zvcm1hbCAlaW4lIGMoMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzKSkKICAgICAgICAgICAgICAgICAmIChlZF90ZWNuaWNhICVpbiUgYygxLDIpKSxlZF9mb3JtYWwtMSwKICAgICAgICAgIGlmZWxzZShlZF9mb3JtYWw9PTggJiAoZWRfdGVjbmljYSAlaW4lIGMoMyw0LDUpKSw5LAogICAgICAgICAgaWZlbHNlKGVkX2Zvcm1hbD09OSAmIChlZF90ZWNuaWNhICVpbiUgYyg0LDUpKSwxMCwKICAgICAgICAgIGlmZWxzZShlZF9mb3JtYWw9PTEwICYgKGVkX3RlY25pY2EgJWluJSBjKDIsNCw1KSksMTEsCiAgICAgICAgICBpZmVsc2UoZWRfZm9ybWFsPT0xMSAmIChlZF90ZWNuaWNhICVpbiUgYygzLDQsNSw1LDcpKSwxMiwKICAgICAgICAgIGlmZWxzZSgoZWRfZm9ybWFsICVpbiVjKDEyKSkgJiAoZWRfdGVjbmljYSAlaW4lIGMoMyw1LDYsNykpLDEyLAogICAgICAgICAgaWZlbHNlKGVkX2Zvcm1hbD09MTMgJiAoZWRfdGVjbmljYSAlaW4lIGMoNSw2LDcsOCw5KSksMTMsCiAgICAgICAgICBpZmVsc2UoZWRfZm9ybWFsPT0xNCAmIChlZF90ZWNuaWNhICVpbiUgYygxLDMsNSw2LDcsOSkpLDE0LAogICAgICAgICAgaWZlbHNlKGVkX2Zvcm1hbD09MTUgJiAoZWRfdGVjbmljYSAlaW4lIGMoMSwzLDQsNSw2LDcsOSkpLDE3LDE5KSkpKSkpKSkpKQogICkKCnVuaXF1ZShwb2JsYWNpb25fZTk4YyRlZHVfYSkKCiNjb2RpZmljYW1vcyBhIGNvZ2hvcnQgZGUgZWR1Y2FjacOzbgoKcG9ibGFjaW9uX2U5OGM8LXBvYmxhY2lvbl9lOThjJT4lCiAgIG11dGF0ZSgKICAgZWR1X2FjID0gaWZlbHNlKGVkdV9hICVpbiUgMDo1LCJDMSIsICAgIAogICAgICAgICAgaWZlbHNlKGVkdV9hICVpbiUgNjoxMCAsIkMyIiwKICAgICAgICAgIGlmZWxzZShlZHVfYSAlaW4lIDExOjEyLCJDMyIsCiAgICAgICAgICBpZmVsc2UoZWR1X2EgJWluJSAxMzoxNCwiQzQiLCJDNSIpKSkpCiAgKQoKdW5pcXVlKHBvYmxhY2lvbl9lOThjJGVkdV9hYyApCgoKYGBgCgojIyMgQ3JlYWNpb24gZGUgcmVnaW9uCmBgYHtyIGNyZWFfcmVnaW9uX2U5OH0KCnBvYmxhY2lvbl9lOThjPC1wb2JsYWNpb25fZTk4YyU+JQogICAgICAgICAgbXV0YXRlKAogICAgICAgICAgICByZWdpb24gPSBpZmVsc2UoZXN0YWRvICVpbiUgYygiMDIiLCIyNiIsIjA4IiwiMDUiLCIxOSIsIjI4IiksMSwKICAgICAgICAgICAgICAgIGlmZWxzZShlc3RhZG8gJWluJSBjKCIxMiIsIjIwIiwiMDciLCIzMCIsIjI3IiwiMDQiLCIzMSIsIjIzIiksNSwwKSkKICAgICAgICAgICkKYGBgCgoKIyMgSW5ncmVzb3MgZW5pZ2ggOTgKCgpgYGB7ciBpbmdyZXNvc19lOTh9CmluZ3Jlc29zPC1yZWFkLmRiZigKICAgICAgICAgICAgICBmaWxlPSJEYXRvcy9FTklHSC1IaXN0b3JpY2EvMTk5OC9pbmdyZXNvcy5kYmYiCiAgICAgICAgICAgICAgKQoKZmFtaWxpYXNfaW50ZWdyYW50ZXMgPC0gZnVuY3Rpb24oZGYsbnIpewogIGRmbiA8LSBkZiAlPiUKICAgIGZpbHRlcihOVU1fUkVOICVpbiUgbnIpCiAgcmV0dXJuKGRmbikKfSAKCgoKaW5ncmVzb3NfYWN1IDwtIGZ1bmN0aW9uKGRmLGNsYXZzKXsKIGRmbiA8LSBkZiAlPiUKICAgZ3JvdXBfYnkoRk9MSU8sIE5VTV9SRU4pICU+JQogICBmaWx0ZXIoQ0xBVkUgJWluJSBjbGF2cyklPiUKICAgc3VtbWFyaXNlKAogICBjbGF2ZXNfYSA9IHBhc3RlKENMQVZFLGNvbGxhcHNlID0gIiwiKSwKICBpbmdfdHJpX3QgPSBzdW0oSU5HX1RSSSksCiAgaW5nX21lbl9wID0gaW5nX3RyaV90LzMsCiAgbGluZ19tZW5fcCA9IGxvZyhpbmdfbWVuX3ApCiAgKSAlPiUgdW5ncm91cCgpCiAKIAogcmV0dXJuKGRmbikKfQoKI2hvZ2FyZXMgPC0gYygiMSIsIjIiLCIzIiwiNCIsIjUiKQpwZXJzb25hc19oIDwtIGMoJzAxJykKCmE8LWZhbWlsaWFzX2ludGVncmFudGVzKGluZ3Jlc29zLHBlcnNvbmFzX2gpCmhlYWQoYSkKY2xhdmVzPC1jKCJQMDAxIiwiUDAwMiIsIlAwMDMiLCJQMDEwIiwiUDAxMSIsIlAwMTIiLCJQMDEzIiwiUDAxNCIsIlAwMTUiLCAiUDAxNiIsIlAwMTciLCJQMDE4IiwiUDAyMCIsIlAwMjEiLCJQMDI2IiwiUDAyNyIsIlAwMzUiLCJQMDQwIiwiUDA0MSIsIlAwNDIiLCJQMDQ0IiwiUDA0NSIpCmluZ3Jlc29zX2U5ODwtaW5ncmVzb3NfYWN1KGEsY2xhdmVzKSAKaW5ncmVzb3NfZTk4PC1pbmdyZXNvc19lOTglPiUKICBzZWxlY3QoRk9MSU8sTlVNX1JFTixjbGF2ZXNfYSxsaW5nX21lbl9wKSU+JQogIHJlbmFtZSgKICAgIGZvbGlvID0gRk9MSU8sCiAgICBudW1fcmVuID0gTlVNX1JFTgogICkKaGVhZChpbmdyZXNvc19lOTgpCgpgYGAKCiMjIEJhc2UgY3J1emFkYSBwb2JsYS1pbmcKCmBgYHtyIGJhc2VfY3J1el9lOTh9CgplbmlnaF85ODwtZnVsbF9qb2luKHBvYmxhY2lvbl9lOThjLGluZ3Jlc29zX2U5OCklPiUKICBkcm9wX25hKCklPiUKICAgbXV0YXRlKAogICAgIG9jdXBhY2lvbiA9IHN1YnN0cihvY3VwYWNpb24sMSwyKQogICApIyU+JQogICMgcmVuYW1lKAogICMgICBFRFU9Tl9JTlNUUjE2MSwKICAjICAgT0NVID0gQ01PMTIxCiAgIyApJT4lCiAgIyBtdXRhdGUoCiAgIyAgIEVEVSA9IGFzLmNoYXJhY3RlcihFRFUpCiAgIyApCmhlYWQoZW5pZ2hfOTgpCgp1bmlxdWUoZW5pZ2hfOTgkZWRhZCkKCiMgYWp1c3RlIHBhcmEgbml2ZWwgZGUgZWN1Y2FjacOzbiBFU1JVCgojZGF0YV9wYWRyZXMyMDA1JEVEVSA8LSBmYWN0b3IoZGF0YV9wYWRyZXMyMDA1JEVEVSkKI2RhdGFfcGFkcmVzMjAwNSRPQ1UgPC0gZmFjdG9yKGRhdGFfcGFkcmVzMjAwNSRPQ1UpCgojdW5pcXVlKGRhdGFfcGFkcmVzMjAwNSRPQ1UpCnN1bShpcy5uYShlbmlnaF85OCkpCmBgYAoKIyBFc2xhdGljaWRhZCBpbnRlZ2VuZXJhY2lvbmFsIGRlIGluZ3Jlc29zCgoKIyMgRGVmbGFjdGFtb3MgaW5ncmVzb3MKCklOUEMgRmViIDIwMjEgPSAxMTAuOTA3IFtDb25zdWx0YV1bXQoKCmBgYHtyfQpJTlBDPC0xMTAuOTA3CgplbmlnaF85ODwtZW5pZ2hfOTglPiUKICBtdXRhdGUoCiAgbGluZ19tZW5fcD1saW5nX21lbl9wLWxvZyhJTlBDKQogICkKYGBgCgpQb3IgbGEgcG9yZ3JhbWFjacOzbiwgcGFyYSBsb3MgaGlqb3MsIHNlIGhhY2UgZGVudHJvIGRlbCBzaWd1ZWludGUgcHJvZ3JhbWEgCgogIFtDb25zdWx0YV06IGh0dHBzOi8vd3d3LmJhbnhpY28ub3JnLm14L1NpZUludGVybmV0L2NvbnN1bHRhckRpcmVjdG9yaW9JbnRlcm5ldEFjdGlvbi5kbz9hY2Npb249Y29uc3VsdGFyQ3VhZHJvJmlkQ3VhZHJvPUNQMTU0JmxvY2FsZT1lcwoKCgoKIyMgRXN0aW1hY2nDs24KClNpbiBjb250cm9sYXIgcG9yIG9jdXBhY2nDs24gZGVsIGhpam8KCgpgYGB7ciBmdW5fcHJpbl9laWl9CmVpaTwtZnVuY3Rpb24oaSl7CiAgCiAgCgojIEJPT1NUUkFQICAKIyBSZWdyZXNpw7NuIGRlIGluZ3Jlc29zIGRlIHBhZHJlcyAgCnJlZ19wYWRyZXM8LWxtKAogIGZvcm11bGEgPSBsaW5nX21lbl9wIH4gZWR1X2FjICsgb2N1cGFjaW9uICsgZWRhZCArSShlZGFkKmVkYWQpLAogIGRhdGEgPSBlbmlnaF85OFtzYW1wbGUobnJvdyhlbmlnaF85OCksbnJvdyhlbmlnaF85OCksIHJlcGxhY2UgPSBUUlVFKSxdCikKCnN1bW1hcnkocmVnX3BhZHJlcykKCiMgbnVtZXJvIGRlIHBhZHJlcyBzaW4gb2N1cGFjacOzbiByZXBvcnRhZGEgZGUgaGlqb3MKcF9zb2N1PC1zdW0oaXMubmEoZGZoX2MkcHBfb2N1cCkpCiNwX3NvY3UKCgpkZmhfY25hPC1kZmhfYyU+JWRyb3BfbmEocHBfb2N1cCkKCiMgZGFmcmFtZSBwYXJhIGVzdGltYXIgaW5ncmVzbyBwYWRyZXMKZGF0YTwtIGRhdGEuZnJhbWUoCiAgIGVkdV9hYz0gZGZoX2NuYSRwcF9lZHVjX2FjLAogICBvY3VwYWNpb249IGRmaF9jbmEkcHBfb2N1cCwKICAgZWRhZCA9IDAKICApCgojIEJPT1NUUkFQIGluZ3Jlc28gSElKT1MKCiMgY2FsY3VsYW1vcyBlbCBpbmdyZXNvIGRlIGxvcyBoaWpvcyBjb24gbG9zIGdlbWVsb3MKIyByZS1zYW1wbGVhZG9zLCBhZGVtYXMgY29kaWZpY2Ftb3MgbGEgb2N1cGFjacOzbiBkZWwgaGlqbyBhIGRvcyBjYXJhY3RlcmVzCgphdXhzPC1mdW5jdGlvbihrKXsKICBzYW1wbGUoayxzaXplPWxlbmd0aChrKSxyZXBsYWNlPVRSVUUpCn0KCmRmaF9jbmEgPC0gZGZoX2NuYSAlPiUKICBtdXRhdGUoCiAgIG9jdV9oYz0gc3Vic3RyaW5nKG9jdV9oLDEsMiksCiAgIGluZ19oPXVubGlzdChsYXBwbHkoCiAgICAgICAgICAgICAgICAgICAgICBsYXBwbHkoaW5nX2gsYXV4cyksCiAgICAgICAgICAgICAgICAgICAgICBtZWFuCiAgICAgICAgICAgICAgICAgICAgICApCiAgICAgICAgICAgICAgICApLAogICBsaW5nX2ggPSBsb2coaW5nX2gpLWxvZyhJTlBDKQogICkKCmRmaF9mPC1kZmhfY25hJT4lCiAgbXV0YXRlKGNvaG9ydF9lID0gaWZlbHNlKGluZ19oPD0yNDAwLDEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGluZ19oPD00ODAwLDIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGluZ19oPD03MjAwLDMsCiAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGluZ19oPD0xMjAwMCw0LCAgICAgICAgICAgICAgICAgICAgICAgICAgaWZlbHNlKGluZ19oPD0yNDAwMCw1LDYpKSkpKSwKICAgICAgICAgY29ob3J0X2RpZj1jb2hvcnQtY29ob3J0X2UpCgogIAojZGZoX2NuYQojZGZoX2NuYSRvY3VfaGlqbwojZGZoX2NuYSRsaW5nX2gKCiNzdHIoc3Vic3RyKGRmaF9jbmEkb2N1X2gsMSwyKSkKCiMgZXN0aW1hY2nDs24gaW5ncmVzbyBwYWRyZXMKIyBpbnB1dGFtb3MgYWwgaGlqbyBjb3JyZXNwb25kaWVudGUKCmRmaHBmPC0gZGZoX2YlPiUKICBtdXRhdGUobGluZ19wID0gcHJlZGljdCgKICAgIG9iamVjdCA9IHJlZ19wYWRyZXMsICAgCiAgICBuZXdkYXRhID0gZGF0YSkpIAojZGZocGYKCiMgRWxhc3RpY2lkYWQgaW50ZXJnZW5lYWNpb25hbCBkZWwgaW5ncmVzbwoKcmVnX2hwPC1sbSgKICBmb3JtdWxhID0gbGluZ19oIH4gbGluZ19wICsgZWRhZF9oKyBJKGVkYWRfaCplZGFkX2gpLCMrIG9jdV9oYywKICBkYXRhID0gZGZocGYKKQpzdW1tYXJ5KHJlZ19ocCkKYmV0YSA8LSByZWdfaHAkY29lZmZpY2llbnRzWzJdCmNvaG9ydF9kaWY8LWFzLmludGVnZXIoZGZocGYlPiVjb3VudChjb2hvcnRfZGlmKSU+JQogICAgICAgICAgICAgICAgICAgZmlsdGVyKGNvaG9ydF9kaWY9PTApJT4lCiAgICAgICAgICAgICAgICAgc2VsZWN0KG4pKQoKcmV0dXJuKGRhdGEuZnJhbWUoKSU+JXN1bW1hcmlzZSgKICBjb2hvcnRfZGlmPWNvaG9ydF9kaWYsCiAgYmV0YT1iZXRhKSkKCn0Kc2V0LnNlZWQoMTIzKQphPC1sYXBwbHkoMToxNTAwLGVpaSkKcmVzdWw8LWJpbmRfcm93cyhhWzE6bGVuZ3RoKGEpXSkKaGVhZChyZXN1bCkKbWVhbihyZXN1bCRiZXRhKQpzZChyZXN1bCRiZXRhKQpoaXN0KHJlc3VsJGJldGEpCmBgYAoKCmBgYHtyIGhpdF9uMH0KaGlzdChyZXN1bCRjb2hvcnRfZGlmKQptZWFuKHJlc3VsJGNvaG9ydF9kaWYpCgpgYGAKCgoK</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("Estimacion.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
