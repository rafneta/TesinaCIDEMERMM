<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Rafael Martínez Martínez" />


<title>Módulo de Movilidad Social Intergeneracional (MMSI) 2016</title>

<script src="site_libs/header-attrs-2.5/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="estilo.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Tesina CIDE-ME Rafael Martínez-Martínez</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Estimacion.html">Estimación</a>
</li>
<li>
  <a href="ESRU2017.html">Datos ESRU - EMOVI</a>
</li>
<li>
  <a href="AA.html">Aprendizaje Automático</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Módulo de Movilidad Social Intergeneracional (MMSI) 2016</h1>
<h4 class="author">Rafael Martínez Martínez</h4>

</div>


<div id="justificar">
<p>El Módulo de Movilidad Social Intergeneracional (MMSI) 2016 se levantó en el tercer y cuarto trimestres de 2016. Tuvo como objetivo generar información estadística sobre movilidad social intergeneracional de la población de 25 a 64 años en México, observando la influencia que tienen características como el nivel educativo, el nivel socioeconómico y la ocupación de los ascendentes económicos, a partir de una determinada condición en la posición socioeconómica actual de sus descendientes <a href="https://www.inegi.org.mx/programas/mmsi/2016/#Microdatos">MMSI-2016</a>.</p>
</div>
<pre class="r"><code>library(tidyverse)
library(haven) # importa, entre otros software, de Stata
library(sjlabelled) # manejar labels de las variables 
library(openxlsx) # leer archivos de excel
library(DT) # visualizar a tablas
library(data.table) # convertir a tablas
library(highcharter) # gráficas interactivas
library(webshot)</code></pre>
<pre class="r"><code>cargar_mmsi&lt;- function(){

return( read_spss(
                      path  = &quot;Datos/MMSI/MMSI_2016.sav&quot;,
                      atomic.to.fac = TRUE
                      #user_na = FALSE,
                     ))
}


data_mmsi&lt;-cargar_mmsi()
data_mmsi[data_mmsi==&quot;&quot;]&lt;-NA</code></pre>
<div id="información-nacional" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Información Nacional</h1>
<pre class="r"><code>#AGREGAMOS ETIQUETA A LOS MISSINGS PARA LAS GRAFICAS
data_mmsi$P8_3N&lt;-add_labels(
                          data_mmsi$P8_3N,
                          labels = c(&quot;NA&quot; = NA))</code></pre>
<pre class="r"><code>get_labels(data_mmsi$P8_3N)</code></pre>
<div id="entrevistados-por-estado" class="section level2" number="1.1">
<h2 number="1.1"><span class="header-section-number">1.1</span> Entrevistados por estado</h2>
<pre class="r"><code>myMenuItems &lt;- c(&quot;downloadPNG&quot;, &quot;downloadJPEG&quot;, &quot;downloadPDF&quot;, &#39;downloadSVG&#39;, &#39;printChart&#39;)


gra_tol_est &lt;- function(df){
 df %&gt;%
  count(ent_ENH) %&gt;%
  hchart(&#39;treemap&#39;,
         hcaes(x = paste(get_labels(ent_ENH),&#39; &#39;,&#39;(&#39;, n,&#39;)&#39;, sep = &#39;&#39;), value=&#39;n&#39;, color = &#39;n&#39;)
  ) %&gt;%
  hc_add_theme(hc_theme_ffx()) %&gt;%
  hc_title(
    text = &quot;Número de entrevistados por estado&quot;
  )%&gt;% 
  hc_subtitle(text = paste(&quot;Total de participates: &quot; , toString(nrow(data_mmsi)))) %&gt;%
  hc_exporting(enabled = TRUE,
               filename = &quot;archivo&quot;,
               sourceWidth =  1000,
               sourceHeight = 640,
               scale = 10,
              
               buttons = list(contextButton = list(menuItems = myMenuItems))
  )
}

gra_tol_est(data_mmsi)</code></pre>
</div>
<div id="sexo-por-estado" class="section level2" number="1.2">
<h2 number="1.2"><span class="header-section-number">1.2</span> Sexo por estado</h2>
<pre class="r"><code>gra_sex_est&lt;- function(df){

df %&gt;%
  count(ent_ENH, P1_1)%&gt;% 
  hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;,  group = as_label(P1_1)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Número de entrevistados por estado y sexo&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Estados&quot;),
           categories = get_labels(data_mmsi$ent_ENH)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}

gra_sex_est(data_mmsi)</code></pre>
</div>
<div id="escolaridad-sexo" class="section level2" number="1.3">
<h2 number="1.3"><span class="header-section-number">1.3</span> Escolaridad sexo</h2>
<pre class="r"><code>gra_sex_edu &lt;- function(df){
df %&gt;%
  count(P8_3N,P1_1)%&gt;% 
  hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;,  group = as_label(P1_1)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Escolaridad por  sexo&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Escolaridad&quot;),
           categories = get_labels(data_mmsi$P8_3N)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}

gra_sex_edu(data_mmsi)</code></pre>
</div>
</div>
<div id="percepción-de-la-situación-economica" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Percepción de la situación economica</h1>
<pre class="r"><code>gra_per_eco_act&lt;- function(df){
  df%&gt;%
  count(P12_1)%&gt;% 
  hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Opinión sobre situación económica actual&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Posición económica&quot;),
           categories = get_labels(df$P12_1)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}
gra_per_eco_act(data_mmsi)</code></pre>
<pre class="r"><code>gra_per_eco_ant&lt;- function(df){
  df%&gt;%
  count(P12_2)%&gt;% 
  hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Opinión sobre situación económica de los padres&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Posición económica&quot;),
           categories = get_labels(df$P12_2)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}
gra_per_eco_ant(data_mmsi)</code></pre>
<pre class="r"><code>skey&lt;-data_mmsi%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()

#skey

for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}

#skey$weight&lt;-as.double(skey$weight)

#for (a in unique(skey$from)){
#skey[skey$from ==a, &quot;weight&quot;] &lt;- round(skey[skey$from ==a, &quot;weight&quot;] / #sum(skey[skey$from==a,3]),2)
#}

#skey

skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
<pre class="r"><code>skey&lt;-data_mmsi%&gt;%
  filter(P1_1==1)%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()


for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}


skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
  hc_subtitle(text = &quot;Hombres&quot;) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
<pre class="r"><code>skey&lt;-data_mmsi%&gt;%
  filter(P1_1==2)%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()


for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}


skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
  hc_subtitle(text = &quot;Mujeres&quot;) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
<div id="percepción-de-movilidad-por-grupo-de-edad-decenal" class="section level2" number="2.1">
<h2 number="2.1"><span class="header-section-number">2.1</span> Percepción de movilidad por grupo de edad (decenal)</h2>
<pre class="r"><code># Per_SitEco
data_mmsi %&gt;%
  count(Edad_Ag2,Per_SitEco)%&gt;% 
  group_by(Edad_Ag2) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al grupo de edad&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Grupo de edad&quot;),
           categories = get_labels(data_mmsi$Edad_Ag2)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-grupo-de-edad-quinquenal" class="section level2" number="2.2">
<h2 number="2.2"><span class="header-section-number">2.2</span> Percepción de movilidad por grupo de edad (quinquenal)</h2>
<pre class="r"><code># Per_SitEco
data_mmsi %&gt;%
  count(Edad_Ag1,Per_SitEco)%&gt;% 
  group_by(Edad_Ag1) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al grupo de edad&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 5 años&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Grupo de edad&quot;),
           categories = get_labels(data_mmsi$Edad_Ag1)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-nivel-de-escolaridad" class="section level2" number="2.3">
<h2 number="2.3"><span class="header-section-number">2.3</span> Percepción de movilidad por nivel de escolaridad</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(NivEsc_Inf,Per_SitEco)%&gt;% 
  group_by(NivEsc_Inf) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al nivel de escolaridad&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;El nivel de escolaridad del informante&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Nivel Escolar&quot;),
           categories = get_labels(data_mmsi$NivEsc_Inf)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-nivel-de-escolaridad-del-provedor-principal" class="section level2" number="2.4">
<h2 number="2.4"><span class="header-section-number">2.4</span> Percepción de movilidad por nivel de escolaridad del provedor principal</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(NivEsc_PP2,Per_SitEco)%&gt;% 
  group_by(NivEsc_PP2) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al nivel de escolaridad&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;El nivel de escolaridad del provedor principal&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Nivel Escolar&quot;),
           categories = get_labels(data_mmsi$NivEsc_PP2)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-división-de-oucpación-del-informante" class="section level2" number="2.5">
<h2 number="2.5"><span class="header-section-number">2.5</span> Percepción de movilidad por división de oucpación del informante</h2>
<pre class="r"><code># Per_SitEco


data_mmsi %&gt;%
  count(DivOcu_Act,Per_SitEco)%&gt;% 
  group_by(DivOcu_Act) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de por división de ocupación&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;El nivel de ocuapción del informante&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Nivel de ocuapción&quot;),
           categories = get_labels(data_mmsi$DivOcu_Act)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-división-de-acupación-del-provedor-principal" class="section level2" number="2.6">
<h2 number="2.6"><span class="header-section-number">2.6</span> Percepción de movilidad por división de acupación del provedor principal</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(DivOcu_PP,Per_SitEco)%&gt;% 
  group_by(DivOcu_PP) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de por división de ocupación&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;El nivel de ocuapción del provedor principal&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Nivel de ocuapción&quot;),
           categories = get_labels(data_mmsi$DivOcu_PP)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-autodescripción-étnica" class="section level2" number="2.7">
<h2 number="2.7"><span class="header-section-number">2.7</span> Percepción de movilidad por autodescripción étnica</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(P10_3,Per_SitEco)%&gt;% 
  group_by(P10_3) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al grupo étnico&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Grupo étnico&quot;),
           categories = get_labels(data_mmsi$P10_3)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-autoclasifiación-de-color-de-piel" class="section level2" number="2.8">
<h2 number="2.8"><span class="header-section-number">2.8</span> Percepción de movilidad por autoclasifiación de color de piel</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(P10_2,Per_SitEco)%&gt;% 
  group_by(P10_2) %&gt;%
  mutate(freq = round(100 * n/sum(n), 0))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al color de piel&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;Para el color de piel se revisa la escala&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Color de piel&quot;),
           categories = get_labels(data_mmsi$P10_2)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="movilidad-por-entidad-federativa" class="section level2" number="2.9">
<h2 number="2.9"><span class="header-section-number">2.9</span> Movilidad por entidad federativa</h2>
<pre class="r"><code>mov_estado&lt;-function(a_){
  skey&lt;-data_mmsi%&gt;%
  filter(ent_ENH==a_)%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()

for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}

for (a in unique(skey$to)){
skey$to[skey$to == a] &lt;-paste(a,&#39;h&#39;)
}
  
skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
   hc_subtitle(text = get_labels(data_mmsi$ent_ENH)[as.integer(a_)]) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}

mov_estado_h&lt;-function(a_){

skey&lt;-data_mmsi%&gt;%
  filter(P1_1==1 &amp; ent_ENH==a_ )%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()


for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}

for (a in unique(skey$to)){
skey$to[skey$to == a] &lt;-paste(a,&#39;h&#39;)
}


skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
  hc_subtitle(text = paste(get_labels(data_mmsi$ent_ENH)[as.integer(a_)],&quot;Hombres&quot;,
                           sep =&quot;: &quot;)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))

}

mov_estado_m&lt;-function(a_){
skey&lt;-data_mmsi%&gt;%
  filter(P1_1==2 &amp; ent_ENH==a_ )%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()


for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}

for (a in unique(skey$to)){
skey$to[skey$to == a] &lt;-paste(a,&#39;h&#39;)
}

skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
  hc_subtitle(text = paste(get_labels(data_mmsi$ent_ENH)[as.integer(a_)],&quot;Mujeres&quot;,
                           sep =&quot;: &quot;)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}

mov_estado(&quot;01&quot;)
mov_estado_h(&quot;01&quot;)
mov_estado_m(&quot;01&quot;)

mov_estado(&quot;02&quot;)
mov_estado_h(&quot;02&quot;)
mov_estado_m(&quot;02&quot;)

mov_estado(&quot;03&quot;)
mov_estado_h(&quot;03&quot;)
mov_estado_m(&quot;03&quot;)

mov_estado(&quot;04&quot;)
mov_estado_h(&quot;04&quot;)
mov_estado_m(&quot;04&quot;)

mov_estado(&quot;05&quot;)
mov_estado_h(&quot;05&quot;)
mov_estado_m(&quot;05&quot;)</code></pre>
</div>
</div>
<div id="filtrado-de-datos-de-los-hijos" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Filtrado de datos de los hijos</h1>
<p>Selección de variables de los hijos para su mapeo a enig-2016.</p>
<pre class="r"><code>var&lt;-c()

#Folioviv -&gt; diferente 
#Foliohog -&gt; diferente
#Id_pobla -&gt; diferente
#ent_ENH -&gt;  cualquiera 2 digitos de Folioviv (primeros)
#est_socio_ENH -&gt; viviendas est_socio
varg &lt;- c(&quot;Folioviv&quot;,&quot;Foliohog&quot;,&quot;Id_pobla&quot;,&quot;ent_ENH&quot;,&quot;est_socio_ENH&quot;)
var &lt;-c(var, varg)


#P1_1 -&gt; poblacion sexo
#P1_2 -&gt; poblacion edad
#P1_3 -&gt; poblacion parentesco
varid &lt;- c(&quot;P1_1&quot;,&quot;P1_2&quot;,&quot;P1_3&quot;)
var &lt;- c(var,varid)




#P8_3N -&gt; poblacion nivelaprob #41
#P8_3G -&gt; poblacion gradoaprob ###42 pendiente para afinar la educación
varedu &lt;- c(&quot;P8_3N&quot;)
var &lt;- c(var, varedu)



#P9_1-&gt; poblacion edo_conyug #45
varcony&lt;- c(&quot;P9_1&quot;)
var&lt;-c(var,varcony)

#P11_1_1-&gt; hogares num_pickup  #43
#P11_1_2-&gt; hogares num_van  #42
#P11_1_3-&gt; hogares num_auto  #40
varautos&lt;-c(&quot;P11_1_1&quot;,&quot;P11_1_2&quot;,&quot;P11_1_3&quot;)
var&lt;-c(var,varautos)


##P11_2 y P11_3 &lt;- viviendas tenencia #28
varviv&lt;-c(&quot;P11_2&quot;,&quot;P11_3&quot;)
var&lt;-c(var,varviv)

##P11_4_


##P11_5_2 y P_11_5_3   &lt;- hogares tarjeta #116
vartar&lt;-c(&quot;P11_5_2&quot;,&quot;P11_5_3&quot;)
var&lt;-c(var,vartar)

#P11_6 &lt;- gastoshogares clave C020 
vardoc&lt;-c(&quot;P11_6&quot;)
var&lt;-c(var,vardoc)



#P11_7_1&lt;- hogares telefono #36
#P11_7_2&lt;- hogares celular #37
#P11_7_3&lt;- hogares tv_paga #38
#P11_7_4&lt;- hogares conex_inte #39
#P11_7_5&lt;- hogares num_ester, num_grab, num_radio #58,60,62
#P11_7_6&lt;- hogares num_tvd #67
#P11_7_7&lt;- hogares num_dvd #68
#P11_7_8&lt;- hogares num_licua # 72
#P11_7_9&lt;- hogares num_tosta # 74
#P11_7_10&lt;- hogares num_micro # 76
#P11_7_11&lt;- hogares num_refri # 78
#P11_7_12&lt;- hogares num_estuf # 80
#P11_7_13&lt;- hogares num_lavad # 82
#P11_7_14&lt;- hogares num_planc # 84
#P11_7_15&lt;- hogares num_maqui # 86
#P11_7_16&lt;- hogares num_venti # 88
#P11_7_17&lt;- hogares num_juego # 96
#####P11_7_18&lt;- no tenemos tabletas
#P11_7_19&lt;- hogares num_compu # 92
#P11_7_20&lt;- hogares num_impre # 94
####P11_7_21&lt;- animales de trbajo no se agregaron
####P11_7_22&lt;- ganando no se agregaron
varhog&lt;-c(&quot;P11_7_1&quot;,&quot;P11_7_2&quot;,&quot;P11_7_3&quot;,&quot;P11_7_4&quot;,&quot;P11_7_5&quot;,&quot;P11_7_6&quot;,
          &quot;P11_7_7&quot;,&quot;P11_7_8&quot;,&quot;P11_7_9&quot;,&quot;P11_7_10&quot;,&quot;P11_7_11&quot;,&quot;P11_7_12&quot;,
          &quot;P11_7_13&quot;,&quot;P11_7_14&quot;,&quot;P11_7_15&quot;,&quot;P11_7_16&quot;,&quot;P11_7_17&quot;,&quot;P11_7_19&quot;,
          &quot;P11_7_20&quot;)
var&lt;-c(var,varhog)


##### Variables creadas

# Condición de ocupación del informante, Actual
# ConOcu_Act &lt;- Nos quedamso cons los ocupados 1

# División principal de ocupación del informante
# DivOcu_Act &lt;- trabajos sinco


# Nivel de escolaridad del informante
# NivEsc_Inf &lt;- concentradohogar educa_jefe #12

varvc&lt;-c(&quot;Edad_Ag2&quot;,&quot;Edad_Ag1&quot;,&quot;NivEsc_Inf&quot;,&quot;ConOcu_Act&quot;, &quot;DivOcu_Act&quot;)
var &lt;- c(var,varvc)




filtrado_var_hijos &lt;- function(df,var){
  dfn&lt;- df %&gt;%
        select(all_of(var))
  return(dfn)
}</code></pre>
<p>Seleccionamos:</p>
<ul>
<li>Entidad Federativa (ent_ENH, en cualquiera enigh 2 digitos del folio de vivienda)</li>
<li>Estrato socieconómico (est_socio_ENH viviendas, viviendas est_soc)</li>
<li>Sexo (P1_1, poblacion sexo)</li>
<li>Edad (P1_2, poblacion edad)</li>
<li>Parentesco (P1_3, poblacion parentesco)</li>
<li>Nivel de educación informante, (NivEsc_Inf, concentradohogar educa_jefe)</li>
<li>Division de ocuapción del informante (DivOcu_Act, trabajos sinco)</li>
</ul>
<pre class="r"><code>vari &lt;- c(&quot;ent_ENH&quot;, &quot;est_socio_ENH&quot;, &quot;P1_1&quot;,
          &quot;P1_2&quot;,&quot;P1_3&quot;,&quot;NivEsc_Inf&quot;,&quot;DivOcu_Act&quot;)
data_mmsi &lt;-cargar_mmsi()
hijos&lt;-filtrado_var_hijos(data_mmsi,vari)

# jefes de familia
hijos&lt;-hijos%&gt;%
  filter(P1_3==&quot;1&quot;)
nrow(hijos)
saveRDS(hijos, file=&quot;Datos/hijos_mmsi.Rda&quot;)</code></pre>
<pre class="r"><code>gra_sex_est(hijos)</code></pre>
<p>Tomamos al entrevistado que es el jefe de hogar, lo cual nos da un total de <em>12706</em> observaciones (aproximadamente 1.5 el número total de ESRU-2017)</p>
<pre class="r"><code># P1_3: ¿Qué es usted del jefe del hogar?
# 1 jefe
# 2 Espas@ compañera@

filtrado_carac &lt;- function(df){ 
        dfn&lt;- df%&gt;%
              filter(P1_3==&quot;1&quot;)
        return(dfn)
}


a&lt;-filtrado_var_hijos(data_mmsi,vari)

carac_fil&lt;- filtrado_carac(a)
head(carac_fil)</code></pre>
<p>hola</p>
<pre class="r"><code>#get_label(data_mmsi[c(var)])
#get_labels(data_mmsi[c(var)])</code></pre>
<div id="gráfica-total-por-estado" class="section level2" number="3.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> Gráfica total por estado</h2>
<pre class="r"><code>gra_tol_est(carac_fil) </code></pre>
</div>
<div id="gráfica-por-estado-y-sexo" class="section level2" number="3.2">
<h2 number="3.2"><span class="header-section-number">3.2</span> Gráfica por estado y sexo</h2>
<pre class="r"><code>gra_sex_est(carac_fil)</code></pre>
</div>
<div id="gráfica-por-sexo-y-educación" class="section level2" number="3.3">
<h2 number="3.3"><span class="header-section-number">3.3</span> Gráfica por sexo y educación</h2>
<pre class="r"><code>gra_sex_edu(data_mmsi)</code></pre>
</div>
</div>
<div id="reconocimiento-de-padres" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Reconocimiento de padres</h1>
<p>Tomamos a los padres para los cuales temenosmos el ingreso del hijo</p>
<pre class="r"><code>padres_h&lt;-data_mmsi%&gt;%
  filter(P1_3==&quot;1&quot;)%&gt;%
  slice(as.integer(unlist(ingre_hij_f%&gt;%select(id_hijo))))%&gt;%
  mutate(id_hijo =as.vector(ingre_hij_f%&gt;%select(id_hijo) ))

padres_h

unique(padres_h$P1_3)
nrow(padres_h)
padres_h$id_hijo</code></pre>
<p>filtramos las variables de los padres</p>
<ul>
<li><p>Estado de residencia pp P2_1EST_D</p></li>
<li><p>Identificación provedor pricipal P2_5</p></li>
<li><p>NIvel de escolaridad del padre P3_5N</p></li>
<li><p>Escolaridad pp NivEsc_PP (nivel)</p></li>
<li><p>Ocupación pp DivOcu_PP (sinco)</p></li>
</ul>
<pre class="r"><code>varph&lt;-c(&quot;P2_1EST_D&quot;,&quot;P2_5&quot;,&quot;P3_5N&quot;, &quot;NivEsc_PP&quot;,&quot;DivOcu_PP&quot;,&quot;id_hijo&quot;)
padres_hv&lt;- padres_h%&gt;%
            select(all_of(varph))

padres_hv$DivOcu_PP</code></pre>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTcOzZHVsbyBkZSBNb3ZpbGlkYWQgU29jaWFsIEludGVyZ2VuZXJhY2lvbmFsIChNTVNJKSAyMDE2IgphdXRob3I6ICJSYWZhZWwgTWFydMOtbmV6IE1hcnTDrW5leiIKb3V0cHV0OiAKICBodG1sX2RvY3VtZW50OgogICAgdG9jOiB0cnVlCiAgICB0b2NfZmxvYXQ6IHRydWUKICAgIG51bWJlcl9zZWN0aW9uczogdHJ1ZQogICAgY29kZV9kb3dubG9hZDogdHJ1ZQogICAgY29kZV9mb2xkaW5nOiBzaG93Ci0tLQoKYGBge3Igc2V0dXAsIGluY2x1ZGU9RkFMU0V9CmtuaXRyOjpvcHRzX2NodW5rJHNldChlY2hvID0gVFJVRSwgbWVzc2FnZSA9IEZBTFNFLCBldmFsPUZBTFNFKQpgYGAKCjxkaXYgaWQgPSAianVzdGlmaWNhciI+CkVsIE3Ds2R1bG8gZGUgTW92aWxpZGFkIFNvY2lhbCBJbnRlcmdlbmVyYWNpb25hbCAoTU1TSSkgMjAxNiBzZSBsZXZhbnTDsyBlbiBlbCB0ZXJjZXIgeSBjdWFydG8gdHJpbWVzdHJlcyBkZSAyMDE2LiBUdXZvIGNvbW8gb2JqZXRpdm8gZ2VuZXJhciBpbmZvcm1hY2nDs24gZXN0YWTDrXN0aWNhIHNvYnJlIG1vdmlsaWRhZCBzb2NpYWwgaW50ZXJnZW5lcmFjaW9uYWwgZGUgbGEgcG9ibGFjacOzbiBkZSAyNSBhIDY0IGHDsW9zIGVuIE3DqXhpY28sIG9ic2VydmFuZG8gbGEgaW5mbHVlbmNpYSBxdWUgdGllbmVuIGNhcmFjdGVyw61zdGljYXMgY29tbyBlbCBuaXZlbCBlZHVjYXRpdm8sIGVsIG5pdmVsIHNvY2lvZWNvbsOzbWljbyB5IGxhIG9jdXBhY2nDs24gZGUgbG9zIGFzY2VuZGVudGVzIGVjb27Ds21pY29zLCBhIHBhcnRpciBkZSB1bmEgZGV0ZXJtaW5hZGEgY29uZGljacOzbiBlbiBsYSBwb3NpY2nDs24gc29jaW9lY29uw7NtaWNhIGFjdHVhbCBkZSBzdXMgZGVzY2VuZGllbnRlcyBbTU1TSS0yMDE2XVtdLgo8L2Rpdj4KICBbTU1TSS0yMDE2XTogaHR0cHM6Ly93d3cuaW5lZ2kub3JnLm14L3Byb2dyYW1hcy9tbXNpLzIwMTYvI01pY3JvZGF0b3MKICAKICAKYGBge3IgY2FyZ2FyX2JpbGlvdGVjYXN9CmxpYnJhcnkodGlkeXZlcnNlKQpsaWJyYXJ5KGhhdmVuKSAjIGltcG9ydGEsIGVudHJlIG90cm9zIHNvZnR3YXJlLCBkZSBTdGF0YQpsaWJyYXJ5KHNqbGFiZWxsZWQpICMgbWFuZWphciBsYWJlbHMgZGUgbGFzIHZhcmlhYmxlcyAKbGlicmFyeShvcGVueGxzeCkgIyBsZWVyIGFyY2hpdm9zIGRlIGV4Y2VsCmxpYnJhcnkoRFQpICMgdmlzdWFsaXphciBhIHRhYmxhcwpsaWJyYXJ5KGRhdGEudGFibGUpICMgY29udmVydGlyIGEgdGFibGFzCmxpYnJhcnkoaGlnaGNoYXJ0ZXIpICMgZ3LDoWZpY2FzIGludGVyYWN0aXZhcwpsaWJyYXJ5KHdlYnNob3QpCmBgYAoKYGBge3IgY2FyZ2FyIGRhdG9zfQoKY2FyZ2FyX21tc2k8LSBmdW5jdGlvbigpewoKcmV0dXJuKCByZWFkX3Nwc3MoCiAgICAgICAgICAgICAgICAgICAgICBwYXRoICA9ICJEYXRvcy9NTVNJL01NU0lfMjAxNi5zYXYiLAogICAgICAgICAgICAgICAgICAgICAgYXRvbWljLnRvLmZhYyA9IFRSVUUKICAgICAgICAgICAgICAgICAgICAgICN1c2VyX25hID0gRkFMU0UsCiAgICAgICAgICAgICAgICAgICAgICkpCn0KCgpkYXRhX21tc2k8LWNhcmdhcl9tbXNpKCkKZGF0YV9tbXNpW2RhdGFfbW1zaT09IiJdPC1OQQpgYGAKCiMgSW5mb3JtYWNpw7NuIE5hY2lvbmFsCgpgYGB7cn0KCiNBR1JFR0FNT1MgRVRJUVVFVEEgQSBMT1MgTUlTU0lOR1MgUEFSQSBMQVMgR1JBRklDQVMKZGF0YV9tbXNpJFA4XzNOPC1hZGRfbGFiZWxzKAogICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFfbW1zaSRQOF8zTiwKICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHMgPSBjKCJOQSIgPSBOQSkpCmBgYAoKCmBgYHtyfQpnZXRfbGFiZWxzKGRhdGFfbW1zaSRQOF8zTikKYGBgCgoKIyMgRW50cmV2aXN0YWRvcyBwb3IgZXN0YWRvCgpgYGB7ciBlbnRyZXZpc3RhZG9zX2VzdGFkbywgZmlnLndpZHRoID0gMTAwLCBmaWcuaGVpZ2h0PSA0MH0KCm15TWVudUl0ZW1zIDwtIGMoImRvd25sb2FkUE5HIiwgImRvd25sb2FkSlBFRyIsICJkb3dubG9hZFBERiIsICdkb3dubG9hZFNWRycsICdwcmludENoYXJ0JykKCgpncmFfdG9sX2VzdCA8LSBmdW5jdGlvbihkZil7CiBkZiAlPiUKICBjb3VudChlbnRfRU5IKSAlPiUKICBoY2hhcnQoJ3RyZWVtYXAnLAogICAgICAgICBoY2Flcyh4ID0gcGFzdGUoZ2V0X2xhYmVscyhlbnRfRU5IKSwnICcsJygnLCBuLCcpJywgc2VwID0gJycpLCB2YWx1ZT0nbicsIGNvbG9yID0gJ24nKQogICkgJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSAlPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiTsO6bWVybyBkZSBlbnRyZXZpc3RhZG9zIHBvciBlc3RhZG8iCiAgKSU+JSAKICBoY19zdWJ0aXRsZSh0ZXh0ID0gcGFzdGUoIlRvdGFsIGRlIHBhcnRpY2lwYXRlczogIiAsIHRvU3RyaW5nKG5yb3coZGF0YV9tbXNpKSkpKSAlPiUKICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImFyY2hpdm8iLAogICAgICAgICAgICAgICBzb3VyY2VXaWR0aCA9ICAxMDAwLAogICAgICAgICAgICAgICBzb3VyY2VIZWlnaHQgPSA2NDAsCiAgICAgICAgICAgICAgIHNjYWxlID0gMTAsCiAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkKICApCn0KCmdyYV90b2xfZXN0KGRhdGFfbW1zaSkKYGBgCgojIyBTZXhvIHBvciBlc3RhZG8gCgpgYGB7ciBlc3RhZG9fc2V4bywgZmlnLndpZHRoPTEwfQoKCmdyYV9zZXhfZXN0PC0gZnVuY3Rpb24oZGYpewoKZGYgJT4lCiAgY291bnQoZW50X0VOSCwgUDFfMSklPiUgCiAgaGNoYXJ0KCdjb2x1bW4nLAogICAgICAgICBoY2FlcyggeSA9ICduJywgIGdyb3VwID0gYXNfbGFiZWwoUDFfMSkpKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiTsO6bWVybyBkZSBlbnRyZXZpc3RhZG9zIHBvciBlc3RhZG8geSBzZXhvIgogICkgJT4lCiAgI2hjX3N1YnRpdGxlKHRleHQgPSAiTGFzIGVkYWRlcyBlc3TDoW4gYWdydXBhZGFzIGVuIGludGVydmFsb3MgCiAgICMgICAgICAgICAgIGRlIDEwIGHDsW9zIChkYSBjbGljIHNvYnJlIEYgbyBNKSIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJOw7ptZXJvIGRlIHBhcnRpY2lwYW50ZXMiKSklPiUKICBoY194QXhpcyh0aXRsZT1saXN0KHRleHQ9IkVzdGFkb3MiKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkYXRhX21tc2kkZW50X0VOSCkpICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCn0KCmdyYV9zZXhfZXN0KGRhdGFfbW1zaSkKCmBgYAoKIyMgRXNjb2xhcmlkYWQgc2V4bwoKYGBge3IgZXNjb2xhcmlkYWRfc2V4bywgZmlnLndpZHRoPTEwfQoKZ3JhX3NleF9lZHUgPC0gZnVuY3Rpb24oZGYpewpkZiAlPiUKICBjb3VudChQOF8zTixQMV8xKSU+JSAKICBoY2hhcnQoJ2NvbHVtbicsCiAgICAgICAgIGhjYWVzKCB5ID0gJ24nLCAgZ3JvdXAgPSBhc19sYWJlbChQMV8xKSkpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJFc2NvbGFyaWRhZCBwb3IgIHNleG8iCiAgKSAlPiUKICAjaGNfc3VidGl0bGUodGV4dCA9ICJMYXMgZWRhZGVzIGVzdMOhbiBhZ3J1cGFkYXMgZW4gaW50ZXJ2YWxvcyAKICAgIyAgICAgICAgICAgZGUgMTAgYcOxb3MgKGRhIGNsaWMgc29icmUgRiBvIE0pIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIk7Dum1lcm8gZGUgcGFydGljaXBhbnRlcyIpKSU+JQogIGhjX3hBeGlzKHRpdGxlPWxpc3QodGV4dD0iRXNjb2xhcmlkYWQiKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkYXRhX21tc2kkUDhfM04pKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQp9CgpncmFfc2V4X2VkdShkYXRhX21tc2kpCgpgYGAKCiMgUGVyY2VwY2nDs24gZGUgbGEgc2l0dWFjacOzbiBlY29ub21pY2EgCgpgYGB7cn0KCmdyYV9wZXJfZWNvX2FjdDwtIGZ1bmN0aW9uKGRmKXsKICBkZiU+JQogIGNvdW50KFAxMl8xKSU+JSAKICBoY2hhcnQoJ2NvbHVtbicsCiAgICAgICAgIGhjYWVzKCB5ID0gJ24nKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIk9waW5pw7NuIHNvYnJlIHNpdHVhY2nDs24gZWNvbsOzbWljYSBhY3R1YWwiCiAgKSAlPiUKICAjaGNfc3VidGl0bGUodGV4dCA9ICJMYXMgZWRhZGVzIGVzdMOhbiBhZ3J1cGFkYXMgZW4gaW50ZXJ2YWxvcyAKICAgIyAgICAgICAgICAgZGUgMTAgYcOxb3MgKGRhIGNsaWMgc29icmUgRiBvIE0pIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIk7Dum1lcm8gZGUgcGFydGljaXBhbnRlcyIpKSU+JQogIGhjX3hBeGlzKHRpdGxlPWxpc3QodGV4dD0iUG9zaWNpw7NuIGVjb27Ds21pY2EiKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkZiRQMTJfMSkpICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCn0KZ3JhX3Blcl9lY29fYWN0KGRhdGFfbW1zaSkKYGBgCgoKYGBge3J9CmdyYV9wZXJfZWNvX2FudDwtIGZ1bmN0aW9uKGRmKXsKICBkZiU+JQogIGNvdW50KFAxMl8yKSU+JSAKICBoY2hhcnQoJ2NvbHVtbicsCiAgICAgICAgIGhjYWVzKCB5ID0gJ24nKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIk9waW5pw7NuIHNvYnJlIHNpdHVhY2nDs24gZWNvbsOzbWljYSBkZSBsb3MgcGFkcmVzIgogICkgJT4lCiAgI2hjX3N1YnRpdGxlKHRleHQgPSAiTGFzIGVkYWRlcyBlc3TDoW4gYWdydXBhZGFzIGVuIGludGVydmFsb3MgCiAgICMgICAgICAgICAgIGRlIDEwIGHDsW9zIChkYSBjbGljIHNvYnJlIEYgbyBNKSIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJOw7ptZXJvIGRlIHBhcnRpY2lwYW50ZXMiKSklPiUKICBoY194QXhpcyh0aXRsZT1saXN0KHRleHQ9IlBvc2ljacOzbiBlY29uw7NtaWNhIiksCiAgICAgICAgICAgY2F0ZWdvcmllcyA9IGdldF9sYWJlbHMoZGYkUDEyXzIpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQp9CmdyYV9wZXJfZWNvX2FudChkYXRhX21tc2kpCmBgYAoKCmBgYHtyfQoKCnNrZXk8LWRhdGFfbW1zaSU+JQogIHNlbGVjdChQMTJfMixQMTJfMSklPiUKICBkYXRhX3RvX3NhbmtleSgpCgojc2tleQoKZm9yIChhIGluIHVuaXF1ZShza2V5JGZyb20pKXsKc2tleSRmcm9tW3NrZXkkZnJvbSA9PSBhXSA8LXBhc3RlKGEsJ3AnKQp9Cgojc2tleSR3ZWlnaHQ8LWFzLmRvdWJsZShza2V5JHdlaWdodCkKCiNmb3IgKGEgaW4gdW5pcXVlKHNrZXkkZnJvbSkpewojc2tleVtza2V5JGZyb20gPT1hLCAid2VpZ2h0Il0gPC0gcm91bmQoc2tleVtza2V5JGZyb20gPT1hLCAid2VpZ2h0Il0gLyAjc3VtKHNrZXlbc2tleSRmcm9tPT1hLDNdKSwyKQojfQoKI3NrZXkKCnNrZXklPiUKaGNoYXJ0KCdzYW5rZXknLG5vZGVXaWR0aD01MCwKICAgICAgIG9wYWNpdHk9MSwgbGlua09wYWNpdHk9MC4wNSwgbWluTGlua1dpZHRoPTIsCiAgICAgICBuYW1lID0gIk1vdmlsaWRhZCIsbm9kZVBhZGRpbmcgPSAxNSxjbGlwPUZBTFNFLAogICAgICAgZGVzY3JpcHRpb24gPSAiaG9sYSIpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcmVsYXRpdmEiCiAgKSU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCgpgYGAKCgpgYGB7cn0KCnNrZXk8LWRhdGFfbW1zaSU+JQogIGZpbHRlcihQMV8xPT0xKSU+JQogIHNlbGVjdChQMTJfMixQMTJfMSklPiUKICBkYXRhX3RvX3NhbmtleSgpCgoKZm9yIChhIGluIHVuaXF1ZShza2V5JGZyb20pKXsKc2tleSRmcm9tW3NrZXkkZnJvbSA9PSBhXSA8LXBhc3RlKGEsJ3AnKQp9CgoKc2tleSU+JQpoY2hhcnQoJ3NhbmtleScsbm9kZVdpZHRoPTUwLAogICAgICAgb3BhY2l0eT0xLCBsaW5rT3BhY2l0eT0wLjA1LCBtaW5MaW5rV2lkdGg9MiwKICAgICAgIG5hbWUgPSAiTW92aWxpZGFkIixub2RlUGFkZGluZyA9IDE1LGNsaXA9RkFMU0UsCiAgICAgICBkZXNjcmlwdGlvbiA9ICJob2xhIiklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCByZWxhdGl2YSIKICApJT4lCiAgaGNfc3VidGl0bGUodGV4dCA9ICJIb21icmVzIikgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCmBgYAoKYGBge3J9Cgpza2V5PC1kYXRhX21tc2klPiUKICBmaWx0ZXIoUDFfMT09MiklPiUKICBzZWxlY3QoUDEyXzIsUDEyXzEpJT4lCiAgZGF0YV90b19zYW5rZXkoKQoKCmZvciAoYSBpbiB1bmlxdWUoc2tleSRmcm9tKSl7CnNrZXkkZnJvbVtza2V5JGZyb20gPT0gYV0gPC1wYXN0ZShhLCdwJykKfQoKCnNrZXklPiUKaGNoYXJ0KCdzYW5rZXknLG5vZGVXaWR0aD01MCwKICAgICAgIG9wYWNpdHk9MSwgbGlua09wYWNpdHk9MC4wNSwgbWluTGlua1dpZHRoPTIsCiAgICAgICBuYW1lID0gIk1vdmlsaWRhZCIsbm9kZVBhZGRpbmcgPSAxNSxjbGlwPUZBTFNFLAogICAgICAgZGVzY3JpcHRpb24gPSAiaG9sYSIpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcmVsYXRpdmEiCiAgKSU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSAiTXVqZXJlcyIpICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCgpgYGAKIyMgUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHBvciBncnVwbyBkZSBlZGFkIChkZWNlbmFsKQoKYGBge3J9CiMgUGVyX1NpdEVjbwpkYXRhX21tc2kgJT4lCiAgY291bnQoRWRhZF9BZzIsUGVyX1NpdEVjbyklPiUgCiAgZ3JvdXBfYnkoRWRhZF9BZzIpICU+JQogIG11dGF0ZShmcmVxID0gcm91bmQoMTAwICogbi9zdW0obiksIDEpKSU+JQogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnZnJlcScsICBncm91cCA9IGFzX2xhYmVsKFBlcl9TaXRFY28pKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBkZSBhY3VlcmRvIGFsIGdydXBvIGRlIGVkYWQiCiAgKSAlPiUKICBoY19zdWJ0aXRsZSh0ZXh0ID0gIkxhcyBlZGFkZXMgZXN0w6FuIGFncnVwYWRhcyBlbiBpbnRlcnZhbG9zIAogICAjICAgICAgICAgICBkZSAxMCBhw7FvcyIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJQb3JjZW50YWplIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJHcnVwbyBkZSBlZGFkIiksCiAgICAgICAgICAgY2F0ZWdvcmllcyA9IGdldF9sYWJlbHMoZGF0YV9tbXNpJEVkYWRfQWcyKSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCmBgYAoKIyMgUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHBvciBncnVwbyBkZSBlZGFkIChxdWlucXVlbmFsKQoKYGBge3J9CiMgUGVyX1NpdEVjbwpkYXRhX21tc2kgJT4lCiAgY291bnQoRWRhZF9BZzEsUGVyX1NpdEVjbyklPiUgCiAgZ3JvdXBfYnkoRWRhZF9BZzEpICU+JQogIG11dGF0ZShmcmVxID0gcm91bmQoMTAwICogbi9zdW0obiksIDEpKSU+JQogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnZnJlcScsICBncm91cCA9IGFzX2xhYmVsKFBlcl9TaXRFY28pKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBkZSBhY3VlcmRvIGFsIGdydXBvIGRlIGVkYWQiCiAgKSAlPiUKICBoY19zdWJ0aXRsZSh0ZXh0ID0gIkxhcyBlZGFkZXMgZXN0w6FuIGFncnVwYWRhcyBlbiBpbnRlcnZhbG9zIAogICAjICAgICAgICAgICBkZSA1IGHDsW9zIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIlBvcmNlbnRhamUiKSklPiUKICBoY194QXhpcyh0aXRsZT1saXN0KHRleHQ9IkdydXBvIGRlIGVkYWQiKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkYXRhX21tc2kkRWRhZF9BZzEpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKYGBgCgojIyBQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcG9yIG5pdmVsIGRlIGVzY29sYXJpZGFkCgpgYGB7cn0KIyBQZXJfU2l0RWNvCgpkYXRhX21tc2kgJT4lCiAgY291bnQoTml2RXNjX0luZixQZXJfU2l0RWNvKSU+JSAKICBncm91cF9ieShOaXZFc2NfSW5mKSAlPiUKICBtdXRhdGUoZnJlcSA9IHJvdW5kKDEwMCAqIG4vc3VtKG4pLCAxKSklPiUKICBoY2hhcnQoJ2NvbHVtbicsCiAgICAgICAgIGhjYWVzKCB5ID0gJ2ZyZXEnLCAgZ3JvdXAgPSBhc19sYWJlbChQZXJfU2l0RWNvKSkpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgZGUgYWN1ZXJkbyBhbCBuaXZlbCBkZSBlc2NvbGFyaWRhZCIKICApICU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSAiRWwgbml2ZWwgZGUgZXNjb2xhcmlkYWQgZGVsIGluZm9ybWFudGUiKSAlPiUKICAjIGhjX2NyZWRpdHMoCiAgIyAgZW5hYmxlZCA9IFRSVUUsIHRleHQgPSAiU291cmNlOiBTU1MiLAogICMgIHN0eWxlID0gbGlzdChmb250U2l6ZSA9ICIxMnB4IikpJT4lCiAgaGNfeUF4aXModGl0bGUgPSBsaXN0KHRleHQgPSAiUG9yY2VudGFqZSIpKSU+JQogIGhjX3hBeGlzKHRpdGxlPWxpc3QodGV4dD0iTml2ZWwgRXNjb2xhciIpLAogICAgICAgICAgIGNhdGVnb3JpZXMgPSBnZXRfbGFiZWxzKGRhdGFfbW1zaSROaXZFc2NfSW5mKSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCmBgYAoKIyMgUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHBvciBuaXZlbCBkZSBlc2NvbGFyaWRhZCBkZWwgcHJvdmVkb3IgcHJpbmNpcGFsCgpgYGB7cn0KIyBQZXJfU2l0RWNvCgpkYXRhX21tc2kgJT4lCiAgY291bnQoTml2RXNjX1BQMixQZXJfU2l0RWNvKSU+JSAKICBncm91cF9ieShOaXZFc2NfUFAyKSAlPiUKICBtdXRhdGUoZnJlcSA9IHJvdW5kKDEwMCAqIG4vc3VtKG4pLCAxKSklPiUKICBoY2hhcnQoJ2NvbHVtbicsCiAgICAgICAgIGhjYWVzKCB5ID0gJ2ZyZXEnLCAgZ3JvdXAgPSBhc19sYWJlbChQZXJfU2l0RWNvKSkpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgZGUgYWN1ZXJkbyBhbCBuaXZlbCBkZSBlc2NvbGFyaWRhZCIKICApICU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSAiRWwgbml2ZWwgZGUgZXNjb2xhcmlkYWQgZGVsIHByb3ZlZG9yIHByaW5jaXBhbCIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJQb3JjZW50YWplIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJOaXZlbCBFc2NvbGFyIiksCiAgICAgICAgICAgY2F0ZWdvcmllcyA9IGdldF9sYWJlbHMoZGF0YV9tbXNpJE5pdkVzY19QUDIpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKYGBgCgoKIyMgUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHBvciBkaXZpc2nDs24gZGUgb3VjcGFjacOzbiBkZWwgaW5mb3JtYW50ZQoKYGBge3J9CiMgUGVyX1NpdEVjbwoKCmRhdGFfbW1zaSAlPiUKICBjb3VudChEaXZPY3VfQWN0LFBlcl9TaXRFY28pJT4lIAogIGdyb3VwX2J5KERpdk9jdV9BY3QpICU+JQogIG11dGF0ZShmcmVxID0gcm91bmQoMTAwICogbi9zdW0obiksIDEpKSU+JQogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnZnJlcScsICBncm91cCA9IGFzX2xhYmVsKFBlcl9TaXRFY28pKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBkZSBwb3IgZGl2aXNpw7NuIGRlIG9jdXBhY2nDs24iCiAgKSAlPiUKICBoY19zdWJ0aXRsZSh0ZXh0ID0gIkVsIG5pdmVsIGRlIG9jdWFwY2nDs24gZGVsIGluZm9ybWFudGUiKSAlPiUKICAjIGhjX2NyZWRpdHMoCiAgIyAgZW5hYmxlZCA9IFRSVUUsIHRleHQgPSAiU291cmNlOiBTU1MiLAogICMgIHN0eWxlID0gbGlzdChmb250U2l6ZSA9ICIxMnB4IikpJT4lCiAgaGNfeUF4aXModGl0bGUgPSBsaXN0KHRleHQgPSAiUG9yY2VudGFqZSIpKSU+JQogIGhjX3hBeGlzKHRpdGxlPWxpc3QodGV4dD0iTml2ZWwgZGUgb2N1YXBjacOzbiIpLAogICAgICAgICAgIGNhdGVnb3JpZXMgPSBnZXRfbGFiZWxzKGRhdGFfbW1zaSREaXZPY3VfQWN0KSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCmBgYAoKCiMjIFBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBwb3IgZGl2aXNpw7NuIGRlIGFjdXBhY2nDs24gZGVsIHByb3ZlZG9yIHByaW5jaXBhbAoKYGBge3J9CiMgUGVyX1NpdEVjbwoKZGF0YV9tbXNpICU+JQogIGNvdW50KERpdk9jdV9QUCxQZXJfU2l0RWNvKSU+JSAKICBncm91cF9ieShEaXZPY3VfUFApICU+JQogIG11dGF0ZShmcmVxID0gcm91bmQoMTAwICogbi9zdW0obiksIDEpKSU+JQogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnZnJlcScsICBncm91cCA9IGFzX2xhYmVsKFBlcl9TaXRFY28pKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBkZSBwb3IgZGl2aXNpw7NuIGRlIG9jdXBhY2nDs24iCiAgKSAlPiUKICBoY19zdWJ0aXRsZSh0ZXh0ID0gIkVsIG5pdmVsIGRlIG9jdWFwY2nDs24gZGVsIHByb3ZlZG9yIHByaW5jaXBhbCIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJQb3JjZW50YWplIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJOaXZlbCBkZSBvY3VhcGNpw7NuIiksCiAgICAgICAgICAgY2F0ZWdvcmllcyA9IGdldF9sYWJlbHMoZGF0YV9tbXNpJERpdk9jdV9QUCkpICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCgpgYGAKCiMjIFBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBwb3IgYXV0b2Rlc2NyaXBjacOzbiDDqXRuaWNhCgpgYGB7cn0KIyBQZXJfU2l0RWNvCgpkYXRhX21tc2kgJT4lCiAgY291bnQoUDEwXzMsUGVyX1NpdEVjbyklPiUgCiAgZ3JvdXBfYnkoUDEwXzMpICU+JQogIG11dGF0ZShmcmVxID0gcm91bmQoMTAwICogbi9zdW0obiksIDEpKSU+JQogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnZnJlcScsICBncm91cCA9IGFzX2xhYmVsKFBlcl9TaXRFY28pKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBkZSBhY3VlcmRvIGFsIGdydXBvIMOpdG5pY28iCiAgKSAlPiUKICBoY19zdWJ0aXRsZSh0ZXh0ID0gIiIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJQb3JjZW50YWplIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJHcnVwbyDDqXRuaWNvIiksCiAgICAgICAgICAgY2F0ZWdvcmllcyA9IGdldF9sYWJlbHMoZGF0YV9tbXNpJFAxMF8zKSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCmBgYAoKCiMjIFBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBwb3IgYXV0b2NsYXNpZmlhY2nDs24gZGUgY29sb3IgZGUgcGllbAoKYGBge3J9CiMgUGVyX1NpdEVjbwoKZGF0YV9tbXNpICU+JQogIGNvdW50KFAxMF8yLFBlcl9TaXRFY28pJT4lIAogIGdyb3VwX2J5KFAxMF8yKSAlPiUKICBtdXRhdGUoZnJlcSA9IHJvdW5kKDEwMCAqIG4vc3VtKG4pLCAwKSklPiUKICBoY2hhcnQoJ2NvbHVtbicsCiAgICAgICAgIGhjYWVzKCB5ID0gJ2ZyZXEnLCAgZ3JvdXAgPSBhc19sYWJlbChQZXJfU2l0RWNvKSkpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgZGUgYWN1ZXJkbyBhbCBjb2xvciBkZSBwaWVsIgogICkgJT4lCiAgaGNfc3VidGl0bGUodGV4dCA9ICJQYXJhIGVsIGNvbG9yIGRlIHBpZWwgc2UgcmV2aXNhIGxhIGVzY2FsYSIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJQb3JjZW50YWplIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJDb2xvciBkZSBwaWVsIiksCiAgICAgICAgICAgY2F0ZWdvcmllcyA9IGdldF9sYWJlbHMoZGF0YV9tbXNpJFAxMF8yKSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCmBgYAoKCiMjIE1vdmlsaWRhZCBwb3IgZW50aWRhZCBmZWRlcmF0aXZhCgpgYGB7cn0KCm1vdl9lc3RhZG88LWZ1bmN0aW9uKGFfKXsKICBza2V5PC1kYXRhX21tc2klPiUKICBmaWx0ZXIoZW50X0VOSD09YV8pJT4lCiAgc2VsZWN0KFAxMl8yLFAxMl8xKSU+JQogIGRhdGFfdG9fc2Fua2V5KCkKCmZvciAoYSBpbiB1bmlxdWUoc2tleSRmcm9tKSl7CnNrZXkkZnJvbVtza2V5JGZyb20gPT0gYV0gPC1wYXN0ZShhLCdwJykKfQoKZm9yIChhIGluIHVuaXF1ZShza2V5JHRvKSl7CnNrZXkkdG9bc2tleSR0byA9PSBhXSA8LXBhc3RlKGEsJ2gnKQp9CiAgCnNrZXklPiUKaGNoYXJ0KCdzYW5rZXknLG5vZGVXaWR0aD01MCwKICAgICAgIG9wYWNpdHk9MSwgbGlua09wYWNpdHk9MC4wNSwgbWluTGlua1dpZHRoPTIsCiAgICAgICBuYW1lID0gIk1vdmlsaWRhZCIsbm9kZVBhZGRpbmcgPSAxNSxjbGlwPUZBTFNFLAogICAgICAgZGVzY3JpcHRpb24gPSAiaG9sYSIpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcmVsYXRpdmEiCiAgKSU+JQogICBoY19zdWJ0aXRsZSh0ZXh0ID0gZ2V0X2xhYmVscyhkYXRhX21tc2kkZW50X0VOSClbYXMuaW50ZWdlcihhXyldKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQp9Cgptb3ZfZXN0YWRvX2g8LWZ1bmN0aW9uKGFfKXsKCnNrZXk8LWRhdGFfbW1zaSU+JQogIGZpbHRlcihQMV8xPT0xICYgZW50X0VOSD09YV8gKSU+JQogIHNlbGVjdChQMTJfMixQMTJfMSklPiUKICBkYXRhX3RvX3NhbmtleSgpCgoKZm9yIChhIGluIHVuaXF1ZShza2V5JGZyb20pKXsKc2tleSRmcm9tW3NrZXkkZnJvbSA9PSBhXSA8LXBhc3RlKGEsJ3AnKQp9Cgpmb3IgKGEgaW4gdW5pcXVlKHNrZXkkdG8pKXsKc2tleSR0b1tza2V5JHRvID09IGFdIDwtcGFzdGUoYSwnaCcpCn0KCgpza2V5JT4lCmhjaGFydCgnc2Fua2V5Jyxub2RlV2lkdGg9NTAsCiAgICAgICBvcGFjaXR5PTEsIGxpbmtPcGFjaXR5PTAuMDUsIG1pbkxpbmtXaWR0aD0yLAogICAgICAgbmFtZSA9ICJNb3ZpbGlkYWQiLG5vZGVQYWRkaW5nID0gMTUsY2xpcD1GQUxTRSwKICAgICAgIGRlc2NyaXB0aW9uID0gImhvbGEiKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHJlbGF0aXZhIgogICklPiUKICBoY19zdWJ0aXRsZSh0ZXh0ID0gcGFzdGUoZ2V0X2xhYmVscyhkYXRhX21tc2kkZW50X0VOSClbYXMuaW50ZWdlcihhXyldLCJIb21icmVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwID0iOiAiKSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCn0KCm1vdl9lc3RhZG9fbTwtZnVuY3Rpb24oYV8pewpza2V5PC1kYXRhX21tc2klPiUKICBmaWx0ZXIoUDFfMT09MiAmIGVudF9FTkg9PWFfICklPiUKICBzZWxlY3QoUDEyXzIsUDEyXzEpJT4lCiAgZGF0YV90b19zYW5rZXkoKQoKCmZvciAoYSBpbiB1bmlxdWUoc2tleSRmcm9tKSl7CnNrZXkkZnJvbVtza2V5JGZyb20gPT0gYV0gPC1wYXN0ZShhLCdwJykKfQoKZm9yIChhIGluIHVuaXF1ZShza2V5JHRvKSl7CnNrZXkkdG9bc2tleSR0byA9PSBhXSA8LXBhc3RlKGEsJ2gnKQp9Cgpza2V5JT4lCmhjaGFydCgnc2Fua2V5Jyxub2RlV2lkdGg9NTAsCiAgICAgICBvcGFjaXR5PTEsIGxpbmtPcGFjaXR5PTAuMDUsIG1pbkxpbmtXaWR0aD0yLAogICAgICAgbmFtZSA9ICJNb3ZpbGlkYWQiLG5vZGVQYWRkaW5nID0gMTUsY2xpcD1GQUxTRSwKICAgICAgIGRlc2NyaXB0aW9uID0gImhvbGEiKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHJlbGF0aXZhIgogICklPiUKICBoY19zdWJ0aXRsZSh0ZXh0ID0gcGFzdGUoZ2V0X2xhYmVscyhkYXRhX21tc2kkZW50X0VOSClbYXMuaW50ZWdlcihhXyldLCJNdWplcmVzIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VwID0iOiAiKSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKfQoKbW92X2VzdGFkbygiMDEiKQptb3ZfZXN0YWRvX2goIjAxIikKbW92X2VzdGFkb19tKCIwMSIpCgptb3ZfZXN0YWRvKCIwMiIpCm1vdl9lc3RhZG9faCgiMDIiKQptb3ZfZXN0YWRvX20oIjAyIikKCm1vdl9lc3RhZG8oIjAzIikKbW92X2VzdGFkb19oKCIwMyIpCm1vdl9lc3RhZG9fbSgiMDMiKQoKbW92X2VzdGFkbygiMDQiKQptb3ZfZXN0YWRvX2goIjA0IikKbW92X2VzdGFkb19tKCIwNCIpCgptb3ZfZXN0YWRvKCIwNSIpCm1vdl9lc3RhZG9faCgiMDUiKQptb3ZfZXN0YWRvX20oIjA1IikKCgpgYGAKCgojIEZpbHRyYWRvIGRlIGRhdG9zIGRlIGxvcyBoaWpvcwoKU2VsZWNjacOzbiBkZSB2YXJpYWJsZXMgZGUgbG9zIGhpam9zIHBhcmEgc3UgbWFwZW8gYSBlbmlnLTIwMTYuCgpgYGB7cn0KdmFyPC1jKCkKCiNGb2xpb3ZpdiAtPiBkaWZlcmVudGUgCiNGb2xpb2hvZyAtPiBkaWZlcmVudGUKI0lkX3BvYmxhIC0+IGRpZmVyZW50ZQojZW50X0VOSCAtPiAgY3VhbHF1aWVyYSAyIGRpZ2l0b3MgZGUgRm9saW92aXYgKHByaW1lcm9zKQojZXN0X3NvY2lvX0VOSCAtPiB2aXZpZW5kYXMgZXN0X3NvY2lvCnZhcmcgPC0gYygiRm9saW92aXYiLCJGb2xpb2hvZyIsIklkX3BvYmxhIiwiZW50X0VOSCIsImVzdF9zb2Npb19FTkgiKQp2YXIgPC1jKHZhciwgdmFyZykKCgojUDFfMSAtPiBwb2JsYWNpb24gc2V4bwojUDFfMiAtPiBwb2JsYWNpb24gZWRhZAojUDFfMyAtPiBwb2JsYWNpb24gcGFyZW50ZXNjbwp2YXJpZCA8LSBjKCJQMV8xIiwiUDFfMiIsIlAxXzMiKQp2YXIgPC0gYyh2YXIsdmFyaWQpCgoKCgojUDhfM04gLT4gcG9ibGFjaW9uIG5pdmVsYXByb2IgIzQxCiNQOF8zRyAtPiBwb2JsYWNpb24gZ3JhZG9hcHJvYiAjIyM0MiBwZW5kaWVudGUgcGFyYSBhZmluYXIgbGEgZWR1Y2FjacOzbgp2YXJlZHUgPC0gYygiUDhfM04iKQp2YXIgPC0gYyh2YXIsIHZhcmVkdSkKCgoKI1A5XzEtPiBwb2JsYWNpb24gZWRvX2Nvbnl1ZyAjNDUKdmFyY29ueTwtIGMoIlA5XzEiKQp2YXI8LWModmFyLHZhcmNvbnkpCgojUDExXzFfMS0+IGhvZ2FyZXMgbnVtX3BpY2t1cCAgIzQzCiNQMTFfMV8yLT4gaG9nYXJlcyBudW1fdmFuICAjNDIKI1AxMV8xXzMtPiBob2dhcmVzIG51bV9hdXRvICAjNDAKdmFyYXV0b3M8LWMoIlAxMV8xXzEiLCJQMTFfMV8yIiwiUDExXzFfMyIpCnZhcjwtYyh2YXIsdmFyYXV0b3MpCgoKIyNQMTFfMiB5IFAxMV8zIDwtIHZpdmllbmRhcyB0ZW5lbmNpYSAjMjgKdmFydml2PC1jKCJQMTFfMiIsIlAxMV8zIikKdmFyPC1jKHZhcix2YXJ2aXYpCgojI1AxMV80XwoKCiMjUDExXzVfMiB5IFBfMTFfNV8zICAgPC0gaG9nYXJlcyB0YXJqZXRhICMxMTYKdmFydGFyPC1jKCJQMTFfNV8yIiwiUDExXzVfMyIpCnZhcjwtYyh2YXIsdmFydGFyKQoKI1AxMV82IDwtIGdhc3Rvc2hvZ2FyZXMgY2xhdmUgQzAyMCAKdmFyZG9jPC1jKCJQMTFfNiIpCnZhcjwtYyh2YXIsdmFyZG9jKQoKCgojUDExXzdfMTwtIGhvZ2FyZXMgdGVsZWZvbm8gIzM2CiNQMTFfN18yPC0gaG9nYXJlcyBjZWx1bGFyICMzNwojUDExXzdfMzwtIGhvZ2FyZXMgdHZfcGFnYSAjMzgKI1AxMV83XzQ8LSBob2dhcmVzIGNvbmV4X2ludGUgIzM5CiNQMTFfN181PC0gaG9nYXJlcyBudW1fZXN0ZXIsIG51bV9ncmFiLCBudW1fcmFkaW8gIzU4LDYwLDYyCiNQMTFfN182PC0gaG9nYXJlcyBudW1fdHZkICM2NwojUDExXzdfNzwtIGhvZ2FyZXMgbnVtX2R2ZCAjNjgKI1AxMV83Xzg8LSBob2dhcmVzIG51bV9saWN1YSAjIDcyCiNQMTFfN185PC0gaG9nYXJlcyBudW1fdG9zdGEgIyA3NAojUDExXzdfMTA8LSBob2dhcmVzIG51bV9taWNybyAjIDc2CiNQMTFfN18xMTwtIGhvZ2FyZXMgbnVtX3JlZnJpICMgNzgKI1AxMV83XzEyPC0gaG9nYXJlcyBudW1fZXN0dWYgIyA4MAojUDExXzdfMTM8LSBob2dhcmVzIG51bV9sYXZhZCAjIDgyCiNQMTFfN18xNDwtIGhvZ2FyZXMgbnVtX3BsYW5jICMgODQKI1AxMV83XzE1PC0gaG9nYXJlcyBudW1fbWFxdWkgIyA4NgojUDExXzdfMTY8LSBob2dhcmVzIG51bV92ZW50aSAjIDg4CiNQMTFfN18xNzwtIGhvZ2FyZXMgbnVtX2p1ZWdvICMgOTYKIyMjIyNQMTFfN18xODwtIG5vIHRlbmVtb3MgdGFibGV0YXMKI1AxMV83XzE5PC0gaG9nYXJlcyBudW1fY29tcHUgIyA5MgojUDExXzdfMjA8LSBob2dhcmVzIG51bV9pbXByZSAjIDk0CiMjIyNQMTFfN18yMTwtIGFuaW1hbGVzIGRlIHRyYmFqbyBubyBzZSBhZ3JlZ2Fyb24KIyMjI1AxMV83XzIyPC0gZ2FuYW5kbyBubyBzZSBhZ3JlZ2Fyb24KdmFyaG9nPC1jKCJQMTFfN18xIiwiUDExXzdfMiIsIlAxMV83XzMiLCJQMTFfN180IiwiUDExXzdfNSIsIlAxMV83XzYiLAogICAgICAgICAgIlAxMV83XzciLCJQMTFfN184IiwiUDExXzdfOSIsIlAxMV83XzEwIiwiUDExXzdfMTEiLCJQMTFfN18xMiIsCiAgICAgICAgICAiUDExXzdfMTMiLCJQMTFfN18xNCIsIlAxMV83XzE1IiwiUDExXzdfMTYiLCJQMTFfN18xNyIsIlAxMV83XzE5IiwKICAgICAgICAgICJQMTFfN18yMCIpCnZhcjwtYyh2YXIsdmFyaG9nKQoKCiMjIyMjIFZhcmlhYmxlcyBjcmVhZGFzCgojIENvbmRpY2nDs24gZGUgb2N1cGFjacOzbiBkZWwgaW5mb3JtYW50ZSwgQWN0dWFsCiMgQ29uT2N1X0FjdCA8LSBOb3MgcXVlZGFtc28gY29ucyBsb3Mgb2N1cGFkb3MgMQoKIyBEaXZpc2nDs24gcHJpbmNpcGFsIGRlIG9jdXBhY2nDs24gZGVsIGluZm9ybWFudGUKIyBEaXZPY3VfQWN0IDwtIHRyYWJham9zIHNpbmNvCgoKIyBOaXZlbCBkZSBlc2NvbGFyaWRhZCBkZWwgaW5mb3JtYW50ZQojIE5pdkVzY19JbmYgPC0gY29uY2VudHJhZG9ob2dhciBlZHVjYV9qZWZlICMxMgoKdmFydmM8LWMoIkVkYWRfQWcyIiwiRWRhZF9BZzEiLCJOaXZFc2NfSW5mIiwiQ29uT2N1X0FjdCIsICJEaXZPY3VfQWN0IikKdmFyIDwtIGModmFyLHZhcnZjKQoKCgoKZmlsdHJhZG9fdmFyX2hpam9zIDwtIGZ1bmN0aW9uKGRmLHZhcil7CiAgZGZuPC0gZGYgJT4lCiAgICAgICAgc2VsZWN0KGFsbF9vZih2YXIpKQogIHJldHVybihkZm4pCn0KYGBgCgpTZWxlY2Npb25hbW9zOgoKLSBFbnRpZGFkIEZlZGVyYXRpdmEgKGVudF9FTkgsIGVuIGN1YWxxdWllcmEgZW5pZ2ggMiBkaWdpdG9zIGRlbCBmb2xpbyBkZSB2aXZpZW5kYSkKLSBFc3RyYXRvIHNvY2llY29uw7NtaWNvIChlc3Rfc29jaW9fRU5IIHZpdmllbmRhcywgdml2aWVuZGFzIGVzdF9zb2MpCi0gU2V4byAoUDFfMSwgcG9ibGFjaW9uIHNleG8pCi0gRWRhZCAoUDFfMiwgcG9ibGFjaW9uIGVkYWQpCi0gUGFyZW50ZXNjbyAoUDFfMywgcG9ibGFjaW9uIHBhcmVudGVzY28pCi0gTml2ZWwgZGUgZWR1Y2FjacOzbiBpbmZvcm1hbnRlLCAoTml2RXNjX0luZiwgY29uY2VudHJhZG9ob2dhciBlZHVjYV9qZWZlKQotIERpdmlzaW9uIGRlIG9jdWFwY2nDs24gZGVsIGluZm9ybWFudGUgKERpdk9jdV9BY3QsIHRyYWJham9zIHNpbmNvKQoKYGBge3J9CnZhcmkgPC0gYygiZW50X0VOSCIsICJlc3Rfc29jaW9fRU5IIiwgIlAxXzEiLAogICAgICAgICAgIlAxXzIiLCJQMV8zIiwiTml2RXNjX0luZiIsIkRpdk9jdV9BY3QiKQpkYXRhX21tc2kgPC1jYXJnYXJfbW1zaSgpCmhpam9zPC1maWx0cmFkb192YXJfaGlqb3MoZGF0YV9tbXNpLHZhcmkpCgojIGplZmVzIGRlIGZhbWlsaWEKaGlqb3M8LWhpam9zJT4lCiAgZmlsdGVyKFAxXzM9PSIxIikKbnJvdyhoaWpvcykKc2F2ZVJEUyhoaWpvcywgZmlsZT0iRGF0b3MvaGlqb3NfbW1zaS5SZGEiKQpgYGAKCmBgYHtyfQpncmFfc2V4X2VzdChoaWpvcykKCmBgYAoKCgpUb21hbW9zIGFsIGVudHJldmlzdGFkbyBxdWUgZXMgZWwgamVmZSBkZSBob2dhciwgbG8gY3VhbCBub3MgZGEgdW4gdG90YWwgZGUgXzEyNzA2XyBvYnNlcnZhY2lvbmVzIChhcHJveGltYWRhbWVudGUgMS41IGVsIG7Dum1lcm8gdG90YWwgZGUgRVNSVS0yMDE3KQoKYGBge3J9CgojIFAxXzM6IMK/UXXDqSBlcyB1c3RlZCBkZWwgamVmZSBkZWwgaG9nYXI/CiMgMSBqZWZlCiMgMiBFc3Bhc0AgY29tcGHDsWVyYUAKCmZpbHRyYWRvX2NhcmFjIDwtIGZ1bmN0aW9uKGRmKXsgCiAgICAgICAgZGZuPC0gZGYlPiUKICAgICAgICAgICAgICBmaWx0ZXIoUDFfMz09IjEiKQogICAgICAgIHJldHVybihkZm4pCn0KCgphPC1maWx0cmFkb192YXJfaGlqb3MoZGF0YV9tbXNpLHZhcmkpCgpjYXJhY19maWw8LSBmaWx0cmFkb19jYXJhYyhhKQpoZWFkKGNhcmFjX2ZpbCkKYGBgCgoKaG9sYQoKYGBge3IsIGV2YWw9RkFMU0V9CiNnZXRfbGFiZWwoZGF0YV9tbXNpW2ModmFyKV0pCiNnZXRfbGFiZWxzKGRhdGFfbW1zaVtjKHZhcildKQpgYGAKCgoKCiMjIEdyw6FmaWNhIHRvdGFsIHBvciBlc3RhZG8KCmBgYHtyfQpncmFfdG9sX2VzdChjYXJhY19maWwpIApgYGAKCiMjIEdyw6FmaWNhIHBvciBlc3RhZG8geSBzZXhvCgpgYGB7cn0KZ3JhX3NleF9lc3QoY2FyYWNfZmlsKQpgYGAKIyMgR3LDoWZpY2EgcG9yIHNleG8geSBlZHVjYWNpw7NuIAoKYGBge3J9CmdyYV9zZXhfZWR1KGRhdGFfbW1zaSkKYGBgCgojIFJlY29ub2NpbWllbnRvIGRlIHBhZHJlcwoKVG9tYW1vcyBhIGxvcyBwYWRyZXMgcGFyYSBsb3MgY3VhbGVzIHRlbWVub3Ntb3MgZWwgaW5ncmVzbyBkZWwgaGlqbwoKYGBge3J9CnBhZHJlc19oPC1kYXRhX21tc2klPiUKICBmaWx0ZXIoUDFfMz09IjEiKSU+JQogIHNsaWNlKGFzLmludGVnZXIodW5saXN0KGluZ3JlX2hpal9mJT4lc2VsZWN0KGlkX2hpam8pKSkpJT4lCiAgbXV0YXRlKGlkX2hpam8gPWFzLnZlY3RvcihpbmdyZV9oaWpfZiU+JXNlbGVjdChpZF9oaWpvKSApKQoKcGFkcmVzX2gKCnVuaXF1ZShwYWRyZXNfaCRQMV8zKQpucm93KHBhZHJlc19oKQpwYWRyZXNfaCRpZF9oaWpvCmBgYAoKZmlsdHJhbW9zIGxhcyB2YXJpYWJsZXMgZGUgbG9zIHBhZHJlcyAKCi0gRXN0YWRvIGRlIHJlc2lkZW5jaWEgcHAgUDJfMUVTVF9ECi0gSWRlbnRpZmljYWNpw7NuIHByb3ZlZG9yIHByaWNpcGFsIFAyXzUKLSBOSXZlbCBkZSBlc2NvbGFyaWRhZCBkZWwgcGFkcmUgUDNfNU4KCi0gRXNjb2xhcmlkYWQgcHAgTml2RXNjX1BQIChuaXZlbCkKLSBPY3VwYWNpw7NuIHBwIERpdk9jdV9QUCAoc2luY28pCgpgYGB7cn0KdmFycGg8LWMoIlAyXzFFU1RfRCIsIlAyXzUiLCJQM181TiIsICJOaXZFc2NfUFAiLCJEaXZPY3VfUFAiLCJpZF9oaWpvIikKcGFkcmVzX2h2PC0gcGFkcmVzX2glPiUKICAgICAgICAgICAgc2VsZWN0KGFsbF9vZih2YXJwaCkpCgpwYWRyZXNfaHYkRGl2T2N1X1BQCmBgYAoKCgoK</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("MMSI2016.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
