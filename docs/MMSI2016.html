<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Rafael Martínez Martínez" />


<title>Módulo de Movilidad Social Intergeneracional (MMSI) 2016</title>

<script src="site_libs/header-attrs-2.5/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="site_libs/anchor-sections-1.0/anchor-sections.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>

<link rel="stylesheet" href="estilo.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Tesina CIDE-ME Rafael Martínez-Martínez</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Estimacion.html">Estimación</a>
</li>
<li>
  <a href="ESRU2017.html">Datos ESRU - EMOVI 2017</a>
</li>
<li>
  <a href="MMSI2016.html">Datos MMSI 2016</a>
</li>
<li>
  <a href="ENIGH2016.html">Datos ENIGH 2016</a>
</li>
<li>
  <a href="hijos.html">Ingreso Hijos </a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
<li role="separator" class="divider"></li>
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Módulo de Movilidad Social Intergeneracional (MMSI) 2016</h1>
<h4 class="author">Rafael Martínez Martínez</h4>

</div>


<div id="justificar">
<p>El Módulo de Movilidad Social Intergeneracional (MMSI) 2016 se levantó en el tercer y cuarto trimestres de 2016. Tuvo como objetivo generar información estadística sobre movilidad social intergeneracional de la población de 25 a 64 años en México, observando la influencia que tienen características como el nivel educativo, el nivel socioeconómico y la ocupación de los ascendentes económicos, a partir de una determinada condición en la posición socioeconómica actual de sus descendientes <a href="https://www.inegi.org.mx/programas/mmsi/2016/#Microdatos">MMSI-2016</a>.</p>
</div>
<pre class="r"><code>library(tidyverse)
library(haven) # importa, entre otros software, de Stata
library(sjlabelled) # manejar labels de las variables 
library(openxlsx) # leer archivos de excel
library(DT) # visualizar a tablas
library(data.table) # convertir a tablas
library(highcharter) # gráficas interactivas
library(webshot)</code></pre>
<pre class="r"><code>cargar_mmsi&lt;- function(){

return( read_spss(
                      path  = &quot;Datos/MMSI/MMSI_2016.sav&quot;,
                      atomic.to.fac = TRUE
                      #user_na = FALSE,
                     ))
}


data_mmsi&lt;-cargar_mmsi()
data_mmsi[data_mmsi==&quot;&quot;]&lt;-NA</code></pre>
<div id="información-nacional" class="section level1" number="1">
<h1 number="1"><span class="header-section-number">1</span> Información Nacional</h1>
<pre class="r"><code>#AGREGAMOS ETIQUETA A LOS MISSINGS PARA LAS GRAFICAS
data_mmsi$P8_3N&lt;-add_labels(
                          data_mmsi$P8_3N,
                          labels = c(&quot;NA&quot; = NA))</code></pre>
<pre class="r"><code>get_labels(data_mmsi$P8_3N)</code></pre>
<div id="entrevistados-por-estado" class="section level2" number="1.1">
<h2 number="1.1"><span class="header-section-number">1.1</span> Entrevistados por estado</h2>
<pre class="r"><code>myMenuItems &lt;- c(&quot;downloadPNG&quot;, &quot;downloadJPEG&quot;, &quot;downloadPDF&quot;, &#39;downloadSVG&#39;, &#39;printChart&#39;)


gra_tol_est &lt;- function(df){
 df %&gt;%
  count(ent_ENH) %&gt;%
  hchart(&#39;treemap&#39;,
         hcaes(x = paste(get_labels(ent_ENH),&#39; &#39;,&#39;(&#39;, n,&#39;)&#39;, sep = &#39;&#39;), value=&#39;n&#39;, color = &#39;n&#39;)
  ) %&gt;%
  hc_add_theme(hc_theme_ffx()) %&gt;%
  hc_title(
    text = &quot;Número de entrevistados por estado&quot;
  )%&gt;% 
  hc_subtitle(text = paste(&quot;Total de participates: &quot; , toString(nrow(data_mmsi)))) %&gt;%
  hc_exporting(enabled = TRUE,
               filename = &quot;archivo&quot;,
               sourceWidth =  1000,
               sourceHeight = 640,
               scale = 10,
              
               buttons = list(contextButton = list(menuItems = myMenuItems))
  )
}

gra_tol_est(data_mmsi)</code></pre>
</div>
<div id="sexo-por-estado" class="section level2" number="1.2">
<h2 number="1.2"><span class="header-section-number">1.2</span> Sexo por estado</h2>
<pre class="r"><code>gra_sex_est&lt;- function(df){

df %&gt;%
  count(ent_ENH, P1_1)%&gt;% 
  hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;,  group = as_label(P1_1)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Número de entrevistados por estado y sexo&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Estados&quot;),
           categories = get_labels(data_mmsi$ent_ENH)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}

gra_sex_est(data_mmsi)</code></pre>
</div>
<div id="escolaridad-sexo" class="section level2" number="1.3">
<h2 number="1.3"><span class="header-section-number">1.3</span> Escolaridad sexo</h2>
<pre class="r"><code>gra_sex_edu &lt;- function(df){
df %&gt;%
  count(P8_3N,P1_1)%&gt;% 
  hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;,  group = as_label(P1_1)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Escolaridad por  sexo&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Escolaridad&quot;),
           categories = get_labels(data_mmsi$P8_3N)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}

gra_sex_edu(data_mmsi)</code></pre>
</div>
</div>
<div id="percepción-de-la-situación-economica" class="section level1" number="2">
<h1 number="2"><span class="header-section-number">2</span> Percepción de la situación economica</h1>
<pre class="r"><code>gra_per_eco_act&lt;- function(df){
  df%&gt;%
  count(P12_1)%&gt;% 
  hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Opinión sobre situación económica actual&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Posición económica&quot;),
           categories = get_labels(df$P12_1)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}
gra_per_eco_act(data_mmsi)</code></pre>
<pre class="r"><code>gra_per_eco_ant&lt;- function(df){
  df%&gt;%
  count(P12_2)%&gt;% 
  hchart(&#39;column&#39;,
         hcaes( y = &#39;n&#39;))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Opinión sobre situación económica de los padres&quot;
  ) %&gt;%
  #hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años (da clic sobre F o M)&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Número de participantes&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Posición económica&quot;),
           categories = get_labels(df$P12_2)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}
gra_per_eco_ant(data_mmsi)</code></pre>
<pre class="r"><code>skey&lt;-data_mmsi%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()

#skey

for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}

#skey$weight&lt;-as.double(skey$weight)

#for (a in unique(skey$from)){
#skey[skey$from ==a, &quot;weight&quot;] &lt;- round(skey[skey$from ==a, &quot;weight&quot;] / #sum(skey[skey$from==a,3]),2)
#}

#skey

skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
<pre class="r"><code>skey&lt;-data_mmsi%&gt;%
  filter(P1_1==1)%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()


for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}


skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
  hc_subtitle(text = &quot;Hombres&quot;) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
<pre class="r"><code>skey&lt;-data_mmsi%&gt;%
  filter(P1_1==2)%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()


for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}


skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
  hc_subtitle(text = &quot;Mujeres&quot;) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
<div id="percepción-de-movilidad-por-grupo-de-edad-decenal" class="section level2" number="2.1">
<h2 number="2.1"><span class="header-section-number">2.1</span> Percepción de movilidad por grupo de edad (decenal)</h2>
<pre class="r"><code># Per_SitEco
data_mmsi %&gt;%
  count(Edad_Ag2,Per_SitEco)%&gt;% 
  group_by(Edad_Ag2) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al grupo de edad&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 10 años&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Grupo de edad&quot;),
           categories = get_labels(data_mmsi$Edad_Ag2)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-grupo-de-edad-quinquenal" class="section level2" number="2.2">
<h2 number="2.2"><span class="header-section-number">2.2</span> Percepción de movilidad por grupo de edad (quinquenal)</h2>
<pre class="r"><code># Per_SitEco
data_mmsi %&gt;%
  count(Edad_Ag1,Per_SitEco)%&gt;% 
  group_by(Edad_Ag1) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al grupo de edad&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;Las edades están agrupadas en intervalos 
   #           de 5 años&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Grupo de edad&quot;),
           categories = get_labels(data_mmsi$Edad_Ag1)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-nivel-de-escolaridad" class="section level2" number="2.3">
<h2 number="2.3"><span class="header-section-number">2.3</span> Percepción de movilidad por nivel de escolaridad</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(NivEsc_Inf,Per_SitEco)%&gt;% 
  group_by(NivEsc_Inf) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al nivel de escolaridad&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;El nivel de escolaridad del informante&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Nivel Escolar&quot;),
           categories = get_labels(data_mmsi$NivEsc_Inf)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-nivel-de-escolaridad-del-provedor-principal" class="section level2" number="2.4">
<h2 number="2.4"><span class="header-section-number">2.4</span> Percepción de movilidad por nivel de escolaridad del provedor principal</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(NivEsc_PP2,Per_SitEco)%&gt;% 
  group_by(NivEsc_PP2) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al nivel de escolaridad&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;El nivel de escolaridad del provedor principal&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Nivel Escolar&quot;),
           categories = get_labels(data_mmsi$NivEsc_PP2)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-división-de-oucpación-del-informante" class="section level2" number="2.5">
<h2 number="2.5"><span class="header-section-number">2.5</span> Percepción de movilidad por división de oucpación del informante</h2>
<pre class="r"><code># Per_SitEco


data_mmsi %&gt;%
  count(DivOcu_Act,Per_SitEco)%&gt;% 
  group_by(DivOcu_Act) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de por división de ocupación&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;El nivel de ocuapción del informante&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Nivel de ocuapción&quot;),
           categories = get_labels(data_mmsi$DivOcu_Act)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-división-de-acupación-del-provedor-principal" class="section level2" number="2.6">
<h2 number="2.6"><span class="header-section-number">2.6</span> Percepción de movilidad por división de acupación del provedor principal</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(DivOcu_PP,Per_SitEco)%&gt;% 
  group_by(DivOcu_PP) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de por división de ocupación&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;El nivel de ocuapción del provedor principal&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Nivel de ocuapción&quot;),
           categories = get_labels(data_mmsi$DivOcu_PP)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-autodescripción-étnica" class="section level2" number="2.7">
<h2 number="2.7"><span class="header-section-number">2.7</span> Percepción de movilidad por autodescripción étnica</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(P10_3,Per_SitEco)%&gt;% 
  group_by(P10_3) %&gt;%
  mutate(freq = round(100 * n/sum(n), 1))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al grupo étnico&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Grupo étnico&quot;),
           categories = get_labels(data_mmsi$P10_3)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="percepción-de-movilidad-por-autoclasifiación-de-color-de-piel" class="section level2" number="2.8">
<h2 number="2.8"><span class="header-section-number">2.8</span> Percepción de movilidad por autoclasifiación de color de piel</h2>
<pre class="r"><code># Per_SitEco

data_mmsi %&gt;%
  count(P10_2,Per_SitEco)%&gt;% 
  group_by(P10_2) %&gt;%
  mutate(freq = round(100 * n/sum(n), 0))%&gt;%
  hchart(&#39;column&#39;,
         hcaes( y = &#39;freq&#39;,  group = as_label(Per_SitEco)))%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad de acuerdo al color de piel&quot;
  ) %&gt;%
  hc_subtitle(text = &quot;Para el color de piel se revisa la escala&quot;) %&gt;%
  # hc_credits(
  #  enabled = TRUE, text = &quot;Source: SSS&quot;,
  #  style = list(fontSize = &quot;12px&quot;))%&gt;%
  hc_yAxis(title = list(text = &quot;Porcentaje&quot;))%&gt;%
  hc_xAxis(title=list(text=&quot;Color de piel&quot;),
           categories = get_labels(data_mmsi$P10_2)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))</code></pre>
</div>
<div id="movilidad-por-entidad-federativa" class="section level2" number="2.9">
<h2 number="2.9"><span class="header-section-number">2.9</span> Movilidad por entidad federativa</h2>
<pre class="r"><code>mov_estado&lt;-function(a_){
  skey&lt;-data_mmsi%&gt;%
  filter(ent_ENH==a_)%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()

for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}

for (a in unique(skey$to)){
skey$to[skey$to == a] &lt;-paste(a,&#39;h&#39;)
}
  
skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
   hc_subtitle(text = get_labels(data_mmsi$ent_ENH)[as.integer(a_)]) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}

mov_estado_h&lt;-function(a_){

skey&lt;-data_mmsi%&gt;%
  filter(P1_1==1 &amp; ent_ENH==a_ )%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()


for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}

for (a in unique(skey$to)){
skey$to[skey$to == a] &lt;-paste(a,&#39;h&#39;)
}


skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
  hc_subtitle(text = paste(get_labels(data_mmsi$ent_ENH)[as.integer(a_)],&quot;Hombres&quot;,
                           sep =&quot;: &quot;)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))

}

mov_estado_m&lt;-function(a_){
skey&lt;-data_mmsi%&gt;%
  filter(P1_1==2 &amp; ent_ENH==a_ )%&gt;%
  select(P12_2,P12_1)%&gt;%
  data_to_sankey()


for (a in unique(skey$from)){
skey$from[skey$from == a] &lt;-paste(a,&#39;p&#39;)
}

for (a in unique(skey$to)){
skey$to[skey$to == a] &lt;-paste(a,&#39;h&#39;)
}

skey%&gt;%
hchart(&#39;sankey&#39;,nodeWidth=50,
       opacity=1, linkOpacity=0.05, minLinkWidth=2,
       name = &quot;Movilidad&quot;,nodePadding = 15,clip=FALSE,
       description = &quot;hola&quot;)%&gt;%
  hc_add_theme(hc_theme_ffx())%&gt;%
  hc_title(
    text = &quot;Percepción de movilidad relativa&quot;
  )%&gt;%
  hc_subtitle(text = paste(get_labels(data_mmsi$ent_ENH)[as.integer(a_)],&quot;Mujeres&quot;,
                           sep =&quot;: &quot;)) %&gt;%
    hc_exporting(enabled = TRUE,
               filename = &quot;datos&quot;,
               buttons = list(contextButton = list(menuItems = myMenuItems)))
}

mov_estado(&quot;01&quot;)
mov_estado_h(&quot;01&quot;)
mov_estado_m(&quot;01&quot;)

mov_estado(&quot;02&quot;)
mov_estado_h(&quot;02&quot;)
mov_estado_m(&quot;02&quot;)

mov_estado(&quot;03&quot;)
mov_estado_h(&quot;03&quot;)
mov_estado_m(&quot;03&quot;)

mov_estado(&quot;04&quot;)
mov_estado_h(&quot;04&quot;)
mov_estado_m(&quot;04&quot;)

mov_estado(&quot;05&quot;)
mov_estado_h(&quot;05&quot;)
mov_estado_m(&quot;05&quot;)</code></pre>
</div>
</div>
<div id="filtrado-de-datos-de-los-hijos" class="section level1" number="3">
<h1 number="3"><span class="header-section-number">3</span> Filtrado de datos de los hijos</h1>
<p>Selección de variables de los hijos para su mapeo a enig-2016.</p>
<pre class="r"><code>var&lt;-c()

#Folioviv -&gt; diferente 
#Foliohog -&gt; diferente
#Id_pobla -&gt; diferente
#ent_ENH -&gt;  cualquiera 2 digitos de Folioviv (primeros)
#est_socio_ENH -&gt; viviendas est_socio
varg &lt;- c(&quot;Folioviv&quot;,&quot;Foliohog&quot;,&quot;Id_pobla&quot;,&quot;ent_ENH&quot;,&quot;est_socio_ENH&quot;)
var &lt;-c(var, varg)


#P1_1 -&gt; poblacion sexo
#P1_2 -&gt; poblacion edad
#P1_3 -&gt; poblacion parentesco
varid &lt;- c(&quot;P1_1&quot;,&quot;P1_2&quot;,&quot;P1_3&quot;)
var &lt;- c(var,varid)




#P8_3N -&gt; poblacion nivelaprob #41
#P8_3G -&gt; poblacion gradoaprob ###42 pendiente para afinar la educación
varedu &lt;- c(&quot;P8_3N&quot;)
var &lt;- c(var, varedu)



#P9_1-&gt; poblacion edo_conyug #45
varcony&lt;- c(&quot;P9_1&quot;)
var&lt;-c(var,varcony)

#P11_1_1-&gt; hogares num_pickup  #43
#P11_1_2-&gt; hogares num_van  #42
#P11_1_3-&gt; hogares num_auto  #40
varautos&lt;-c(&quot;P11_1_1&quot;,&quot;P11_1_2&quot;,&quot;P11_1_3&quot;)
var&lt;-c(var,varautos)


##P11_2 y P11_3 &lt;- viviendas tenencia #28
varviv&lt;-c(&quot;P11_2&quot;,&quot;P11_3&quot;)
var&lt;-c(var,varviv)

##P11_4_


##P11_5_2 y P_11_5_3   &lt;- hogares tarjeta #116
vartar&lt;-c(&quot;P11_5_2&quot;,&quot;P11_5_3&quot;)
var&lt;-c(var,vartar)

#P11_6 &lt;- gastoshogares clave C020 
vardoc&lt;-c(&quot;P11_6&quot;)
var&lt;-c(var,vardoc)



#P11_7_1&lt;- hogares telefono #36
#P11_7_2&lt;- hogares celular #37
#P11_7_3&lt;- hogares tv_paga #38
#P11_7_4&lt;- hogares conex_inte #39
#P11_7_5&lt;- hogares num_ester, num_grab, num_radio #58,60,62
#P11_7_6&lt;- hogares num_tvd #67
#P11_7_7&lt;- hogares num_dvd #68
#P11_7_8&lt;- hogares num_licua # 72
#P11_7_9&lt;- hogares num_tosta # 74
#P11_7_10&lt;- hogares num_micro # 76
#P11_7_11&lt;- hogares num_refri # 78
#P11_7_12&lt;- hogares num_estuf # 80
#P11_7_13&lt;- hogares num_lavad # 82
#P11_7_14&lt;- hogares num_planc # 84
#P11_7_15&lt;- hogares num_maqui # 86
#P11_7_16&lt;- hogares num_venti # 88
#P11_7_17&lt;- hogares num_juego # 96
#####P11_7_18&lt;- no tenemos tabletas
#P11_7_19&lt;- hogares num_compu # 92
#P11_7_20&lt;- hogares num_impre # 94
####P11_7_21&lt;- animales de trbajo no se agregaron
####P11_7_22&lt;- ganando no se agregaron
varhog&lt;-c(&quot;P11_7_1&quot;,&quot;P11_7_2&quot;,&quot;P11_7_3&quot;,&quot;P11_7_4&quot;,&quot;P11_7_5&quot;,&quot;P11_7_6&quot;,
          &quot;P11_7_7&quot;,&quot;P11_7_8&quot;,&quot;P11_7_9&quot;,&quot;P11_7_10&quot;,&quot;P11_7_11&quot;,&quot;P11_7_12&quot;,
          &quot;P11_7_13&quot;,&quot;P11_7_14&quot;,&quot;P11_7_15&quot;,&quot;P11_7_16&quot;,&quot;P11_7_17&quot;,&quot;P11_7_19&quot;,
          &quot;P11_7_20&quot;)
var&lt;-c(var,varhog)


##### Variables creadas

# Condición de ocupación del informante, Actual
# ConOcu_Act &lt;- Nos quedamso cons los ocupados 1

# División principal de ocupación del informante
# DivOcu_Act &lt;- trabajos sinco


# Nivel de escolaridad del informante
# NivEsc_Inf &lt;- concentradohogar educa_jefe #12

varvc&lt;-c(&quot;Edad_Ag2&quot;,&quot;Edad_Ag1&quot;,&quot;NivEsc_Inf&quot;,&quot;ConOcu_Act&quot;, &quot;DivOcu_Act&quot;)
var &lt;- c(var,varvc)




filtrado_var_hijos &lt;- function(df,var){
  dfn&lt;- df %&gt;%
        select(all_of(var))
  return(dfn)
}</code></pre>
<p>Seleccionamos:</p>
<ul>
<li>Entidad Federativa (ent_ENH, en cualquiera enigh 2 digitos del folio de vivienda)</li>
<li>Estrato socieconómico (est_socio_ENH viviendas, viviendas est_soc)</li>
<li>Sexo (P1_1, poblacion sexo)</li>
<li>Edad (P1_2, poblacion edad)</li>
<li>Parentesco (P1_3, poblacion parentesco)</li>
<li>Nivel de educación informante, (NivEsc_Inf, concentradohogar educa_jefe)</li>
<li>Division de ocuapción del informante (DivOcu_Act, trabajos sinco)</li>
</ul>
<pre class="r"><code>vari &lt;- c(&quot;ent_ENH&quot;, &quot;est_socio_ENH&quot;, &quot;P1_1&quot;,
          &quot;P1_2&quot;,&quot;P1_3&quot;,&quot;NivEsc_Inf&quot;,&quot;DivOcu_Act&quot;)
data_mmsi &lt;-cargar_mmsi()
hijos&lt;-filtrado_var_hijos(data_mmsi,vari)

# jefes de familia
hijos&lt;-hijos%&gt;%
  filter(P1_3==&quot;1&quot;)
nrow(hijos)
saveRDS(hijos, file=&quot;Datos/hijos_mmsi.Rda&quot;)</code></pre>
<pre class="r"><code>gra_sex_est(hijos)</code></pre>
<p>Tomamos al entrevistado que es el jefe de hogar, lo cual nos da un total de <em>12706</em> observaciones (aproximadamente 1.5 el número total de ESRU-2017)</p>
<pre class="r"><code># P1_3: ¿Qué es usted del jefe del hogar?
# 1 jefe
# 2 Espas@ compañera@

filtrado_carac &lt;- function(df){ 
        dfn&lt;- df%&gt;%
              filter(P1_3==&quot;1&quot;)
        return(dfn)
}


a&lt;-filtrado_var_hijos(data_mmsi,vari)

carac_fil&lt;- filtrado_carac(a)
head(carac_fil)</code></pre>
<p>hola</p>
<pre class="r"><code>#get_label(data_mmsi[c(var)])
#get_labels(data_mmsi[c(var)])</code></pre>
<div id="gráfica-total-por-estado" class="section level2" number="3.1">
<h2 number="3.1"><span class="header-section-number">3.1</span> Gráfica total por estado</h2>
<pre class="r"><code>gra_tol_est(carac_fil) </code></pre>
</div>
<div id="gráfica-por-estado-y-sexo" class="section level2" number="3.2">
<h2 number="3.2"><span class="header-section-number">3.2</span> Gráfica por estado y sexo</h2>
<pre class="r"><code>gra_sex_est(carac_fil)</code></pre>
</div>
<div id="gráfica-por-sexo-y-educación" class="section level2" number="3.3">
<h2 number="3.3"><span class="header-section-number">3.3</span> Gráfica por sexo y educación</h2>
<pre class="r"><code>gra_sex_edu(data_mmsi)</code></pre>
</div>
</div>
<div id="reconocimiento-de-padres" class="section level1" number="4">
<h1 number="4"><span class="header-section-number">4</span> Reconocimiento de padres</h1>
<p>Tomamos a los padres para los cuales temenosmos el ingreso del hijo</p>
<pre class="r"><code>padres_h&lt;-data_mmsi%&gt;%
  filter(P1_3==&quot;1&quot;)%&gt;%
  slice(as.integer(unlist(ingre_hij_f%&gt;%select(id_hijo))))%&gt;%
  mutate(id_hijo =as.vector(ingre_hij_f%&gt;%select(id_hijo) ))

padres_h

unique(padres_h$P1_3)
nrow(padres_h)
padres_h$id_hijo</code></pre>
<p>filtramos las variables de los padres</p>
<ul>
<li><p>Estado de residencia pp P2_1EST_D</p></li>
<li><p>Identificación provedor pricipal P2_5</p></li>
<li><p>NIvel de escolaridad del padre P3_5N</p></li>
<li><p>Escolaridad pp NivEsc_PP (nivel)</p></li>
<li><p>Ocupación pp DivOcu_PP (sinco)</p></li>
</ul>
<pre class="r"><code>varph&lt;-c(&quot;P2_1EST_D&quot;,&quot;P2_5&quot;,&quot;P3_5N&quot;, &quot;NivEsc_PP&quot;,&quot;DivOcu_PP&quot;,&quot;id_hijo&quot;)
padres_hv&lt;- padres_h%&gt;%
            select(all_of(varph))

padres_hv$DivOcu_PP</code></pre>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTcOzZHVsbyBkZSBNb3ZpbGlkYWQgU29jaWFsIEludGVyZ2VuZXJhY2lvbmFsIChNTVNJKSAyMDE2IgphdXRob3I6ICJSYWZhZWwgTWFydMOtbmV6IE1hcnTDrW5leiIKb3V0cHV0OiAKICBodG1sX2RvY3VtZW50OgogICAgdG9jOiB0cnVlCiAgICB0b2NfZmxvYXQ6IHRydWUKICAgIG51bWJlcl9zZWN0aW9uczogdHJ1ZQogICAgY29kZV9kb3dubG9hZDogdHJ1ZQogICAgY29kZV9mb2xkaW5nOiBzaG93Ci0tLQoKYGBge3Igc2V0dXAsIGluY2x1ZGU9RkFMU0V9CmtuaXRyOjpvcHRzX2NodW5rJHNldChlY2hvID0gVFJVRSwgbWVzc2FnZSA9IEZBTFNFLGV2YWw9RkFMU0UpCmBgYAoKPGRpdiBpZCA9ICJqdXN0aWZpY2FyIj4KRWwgTcOzZHVsbyBkZSBNb3ZpbGlkYWQgU29jaWFsIEludGVyZ2VuZXJhY2lvbmFsIChNTVNJKSAyMDE2IHNlIGxldmFudMOzIGVuIGVsIHRlcmNlciB5IGN1YXJ0byB0cmltZXN0cmVzIGRlIDIwMTYuIFR1dm8gY29tbyBvYmpldGl2byBnZW5lcmFyIGluZm9ybWFjacOzbiBlc3RhZMOtc3RpY2Egc29icmUgbW92aWxpZGFkIHNvY2lhbCBpbnRlcmdlbmVyYWNpb25hbCBkZSBsYSBwb2JsYWNpw7NuIGRlIDI1IGEgNjQgYcOxb3MgZW4gTcOpeGljbywgb2JzZXJ2YW5kbyBsYSBpbmZsdWVuY2lhIHF1ZSB0aWVuZW4gY2FyYWN0ZXLDrXN0aWNhcyBjb21vIGVsIG5pdmVsIGVkdWNhdGl2bywgZWwgbml2ZWwgc29jaW9lY29uw7NtaWNvIHkgbGEgb2N1cGFjacOzbiBkZSBsb3MgYXNjZW5kZW50ZXMgZWNvbsOzbWljb3MsIGEgcGFydGlyIGRlIHVuYSBkZXRlcm1pbmFkYSBjb25kaWNpw7NuIGVuIGxhIHBvc2ljacOzbiBzb2Npb2Vjb27Ds21pY2EgYWN0dWFsIGRlIHN1cyBkZXNjZW5kaWVudGVzIFtNTVNJLTIwMTZdW10uCjwvZGl2PgogIFtNTVNJLTIwMTZdOiBodHRwczovL3d3dy5pbmVnaS5vcmcubXgvcHJvZ3JhbWFzL21tc2kvMjAxNi8jTWljcm9kYXRvcwogIAogIApgYGB7ciBjYXJnYXJfYmlsaW90ZWNhc30KbGlicmFyeSh0aWR5dmVyc2UpCmxpYnJhcnkoaGF2ZW4pICMgaW1wb3J0YSwgZW50cmUgb3Ryb3Mgc29mdHdhcmUsIGRlIFN0YXRhCmxpYnJhcnkoc2psYWJlbGxlZCkgIyBtYW5lamFyIGxhYmVscyBkZSBsYXMgdmFyaWFibGVzIApsaWJyYXJ5KG9wZW54bHN4KSAjIGxlZXIgYXJjaGl2b3MgZGUgZXhjZWwKbGlicmFyeShEVCkgIyB2aXN1YWxpemFyIGEgdGFibGFzCmxpYnJhcnkoZGF0YS50YWJsZSkgIyBjb252ZXJ0aXIgYSB0YWJsYXMKbGlicmFyeShoaWdoY2hhcnRlcikgIyBncsOhZmljYXMgaW50ZXJhY3RpdmFzCmxpYnJhcnkod2Vic2hvdCkKYGBgCgpgYGB7ciBjYXJnYXIgZGF0b3N9CgpjYXJnYXJfbW1zaTwtIGZ1bmN0aW9uKCl7CgpyZXR1cm4oIHJlYWRfc3BzcygKICAgICAgICAgICAgICAgICAgICAgIHBhdGggID0gIkRhdG9zL01NU0kvTU1TSV8yMDE2LnNhdiIsCiAgICAgICAgICAgICAgICAgICAgICBhdG9taWMudG8uZmFjID0gVFJVRQogICAgICAgICAgICAgICAgICAgICAgI3VzZXJfbmEgPSBGQUxTRSwKICAgICAgICAgICAgICAgICAgICAgKSkKfQoKCmRhdGFfbW1zaTwtY2FyZ2FyX21tc2koKQpkYXRhX21tc2lbZGF0YV9tbXNpPT0iIl08LU5BCmBgYAoKIyBJbmZvcm1hY2nDs24gTmFjaW9uYWwKCmBgYHtyfQoKI0FHUkVHQU1PUyBFVElRVUVUQSBBIExPUyBNSVNTSU5HUyBQQVJBIExBUyBHUkFGSUNBUwpkYXRhX21tc2kkUDhfM048LWFkZF9sYWJlbHMoCiAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YV9tbXNpJFA4XzNOLAogICAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVscyA9IGMoIk5BIiA9IE5BKSkKYGBgCgoKYGBge3J9CmdldF9sYWJlbHMoZGF0YV9tbXNpJFA4XzNOKQpgYGAKCgojIyBFbnRyZXZpc3RhZG9zIHBvciBlc3RhZG8KCmBgYHtyIGVudHJldmlzdGFkb3NfZXN0YWRvLCBmaWcud2lkdGggPSAxMDAsIGZpZy5oZWlnaHQ9IDQwfQoKbXlNZW51SXRlbXMgPC0gYygiZG93bmxvYWRQTkciLCAiZG93bmxvYWRKUEVHIiwgImRvd25sb2FkUERGIiwgJ2Rvd25sb2FkU1ZHJywgJ3ByaW50Q2hhcnQnKQoKCmdyYV90b2xfZXN0IDwtIGZ1bmN0aW9uKGRmKXsKIGRmICU+JQogIGNvdW50KGVudF9FTkgpICU+JQogIGhjaGFydCgndHJlZW1hcCcsCiAgICAgICAgIGhjYWVzKHggPSBwYXN0ZShnZXRfbGFiZWxzKGVudF9FTkgpLCcgJywnKCcsIG4sJyknLCBzZXAgPSAnJyksIHZhbHVlPSduJywgY29sb3IgPSAnbicpCiAgKSAlPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpICU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJOw7ptZXJvIGRlIGVudHJldmlzdGFkb3MgcG9yIGVzdGFkbyIKICApJT4lIAogIGhjX3N1YnRpdGxlKHRleHQgPSBwYXN0ZSgiVG90YWwgZGUgcGFydGljaXBhdGVzOiAiICwgdG9TdHJpbmcobnJvdyhkYXRhX21tc2kpKSkpICU+JQogIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiYXJjaGl2byIsCiAgICAgICAgICAgICAgIHNvdXJjZVdpZHRoID0gIDEwMDAsCiAgICAgICAgICAgICAgIHNvdXJjZUhlaWdodCA9IDY0MCwKICAgICAgICAgICAgICAgc2NhbGUgPSAxMCwKICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKQogICkKfQoKZ3JhX3RvbF9lc3QoZGF0YV9tbXNpKQpgYGAKCiMjIFNleG8gcG9yIGVzdGFkbyAKCmBgYHtyIGVzdGFkb19zZXhvLCBmaWcud2lkdGg9MTB9CgoKZ3JhX3NleF9lc3Q8LSBmdW5jdGlvbihkZil7CgpkZiAlPiUKICBjb3VudChlbnRfRU5ILCBQMV8xKSU+JSAKICBoY2hhcnQoJ2NvbHVtbicsCiAgICAgICAgIGhjYWVzKCB5ID0gJ24nLCAgZ3JvdXAgPSBhc19sYWJlbChQMV8xKSkpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJOw7ptZXJvIGRlIGVudHJldmlzdGFkb3MgcG9yIGVzdGFkbyB5IHNleG8iCiAgKSAlPiUKICAjaGNfc3VidGl0bGUodGV4dCA9ICJMYXMgZWRhZGVzIGVzdMOhbiBhZ3J1cGFkYXMgZW4gaW50ZXJ2YWxvcyAKICAgIyAgICAgICAgICAgZGUgMTAgYcOxb3MgKGRhIGNsaWMgc29icmUgRiBvIE0pIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIk7Dum1lcm8gZGUgcGFydGljaXBhbnRlcyIpKSU+JQogIGhjX3hBeGlzKHRpdGxlPWxpc3QodGV4dD0iRXN0YWRvcyIpLAogICAgICAgICAgIGNhdGVnb3JpZXMgPSBnZXRfbGFiZWxzKGRhdGFfbW1zaSRlbnRfRU5IKSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKfQoKZ3JhX3NleF9lc3QoZGF0YV9tbXNpKQoKYGBgCgojIyBFc2NvbGFyaWRhZCBzZXhvCgpgYGB7ciBlc2NvbGFyaWRhZF9zZXhvLCBmaWcud2lkdGg9MTB9CgpncmFfc2V4X2VkdSA8LSBmdW5jdGlvbihkZil7CmRmICU+JQogIGNvdW50KFA4XzNOLFAxXzEpJT4lIAogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnbicsICBncm91cCA9IGFzX2xhYmVsKFAxXzEpKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIkVzY29sYXJpZGFkIHBvciAgc2V4byIKICApICU+JQogICNoY19zdWJ0aXRsZSh0ZXh0ID0gIkxhcyBlZGFkZXMgZXN0w6FuIGFncnVwYWRhcyBlbiBpbnRlcnZhbG9zIAogICAjICAgICAgICAgICBkZSAxMCBhw7FvcyAoZGEgY2xpYyBzb2JyZSBGIG8gTSkiKSAlPiUKICAjIGhjX2NyZWRpdHMoCiAgIyAgZW5hYmxlZCA9IFRSVUUsIHRleHQgPSAiU291cmNlOiBTU1MiLAogICMgIHN0eWxlID0gbGlzdChmb250U2l6ZSA9ICIxMnB4IikpJT4lCiAgaGNfeUF4aXModGl0bGUgPSBsaXN0KHRleHQgPSAiTsO6bWVybyBkZSBwYXJ0aWNpcGFudGVzIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJFc2NvbGFyaWRhZCIpLAogICAgICAgICAgIGNhdGVnb3JpZXMgPSBnZXRfbGFiZWxzKGRhdGFfbW1zaSRQOF8zTikpICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCn0KCmdyYV9zZXhfZWR1KGRhdGFfbW1zaSkKCmBgYAoKIyBQZXJjZXBjacOzbiBkZSBsYSBzaXR1YWNpw7NuIGVjb25vbWljYSAKCmBgYHtyfQoKZ3JhX3Blcl9lY29fYWN0PC0gZnVuY3Rpb24oZGYpewogIGRmJT4lCiAgY291bnQoUDEyXzEpJT4lIAogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnbicpKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiT3BpbmnDs24gc29icmUgc2l0dWFjacOzbiBlY29uw7NtaWNhIGFjdHVhbCIKICApICU+JQogICNoY19zdWJ0aXRsZSh0ZXh0ID0gIkxhcyBlZGFkZXMgZXN0w6FuIGFncnVwYWRhcyBlbiBpbnRlcnZhbG9zIAogICAjICAgICAgICAgICBkZSAxMCBhw7FvcyAoZGEgY2xpYyBzb2JyZSBGIG8gTSkiKSAlPiUKICAjIGhjX2NyZWRpdHMoCiAgIyAgZW5hYmxlZCA9IFRSVUUsIHRleHQgPSAiU291cmNlOiBTU1MiLAogICMgIHN0eWxlID0gbGlzdChmb250U2l6ZSA9ICIxMnB4IikpJT4lCiAgaGNfeUF4aXModGl0bGUgPSBsaXN0KHRleHQgPSAiTsO6bWVybyBkZSBwYXJ0aWNpcGFudGVzIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJQb3NpY2nDs24gZWNvbsOzbWljYSIpLAogICAgICAgICAgIGNhdGVnb3JpZXMgPSBnZXRfbGFiZWxzKGRmJFAxMl8xKSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKfQpncmFfcGVyX2Vjb19hY3QoZGF0YV9tbXNpKQpgYGAKCgpgYGB7cn0KZ3JhX3Blcl9lY29fYW50PC0gZnVuY3Rpb24oZGYpewogIGRmJT4lCiAgY291bnQoUDEyXzIpJT4lIAogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnbicpKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiT3BpbmnDs24gc29icmUgc2l0dWFjacOzbiBlY29uw7NtaWNhIGRlIGxvcyBwYWRyZXMiCiAgKSAlPiUKICAjaGNfc3VidGl0bGUodGV4dCA9ICJMYXMgZWRhZGVzIGVzdMOhbiBhZ3J1cGFkYXMgZW4gaW50ZXJ2YWxvcyAKICAgIyAgICAgICAgICAgZGUgMTAgYcOxb3MgKGRhIGNsaWMgc29icmUgRiBvIE0pIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIk7Dum1lcm8gZGUgcGFydGljaXBhbnRlcyIpKSU+JQogIGhjX3hBeGlzKHRpdGxlPWxpc3QodGV4dD0iUG9zaWNpw7NuIGVjb27Ds21pY2EiKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkZiRQMTJfMikpICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCn0KZ3JhX3Blcl9lY29fYW50KGRhdGFfbW1zaSkKYGBgCgoKYGBge3J9CgoKc2tleTwtZGF0YV9tbXNpJT4lCiAgc2VsZWN0KFAxMl8yLFAxMl8xKSU+JQogIGRhdGFfdG9fc2Fua2V5KCkKCiNza2V5Cgpmb3IgKGEgaW4gdW5pcXVlKHNrZXkkZnJvbSkpewpza2V5JGZyb21bc2tleSRmcm9tID09IGFdIDwtcGFzdGUoYSwncCcpCn0KCiNza2V5JHdlaWdodDwtYXMuZG91YmxlKHNrZXkkd2VpZ2h0KQoKI2ZvciAoYSBpbiB1bmlxdWUoc2tleSRmcm9tKSl7CiNza2V5W3NrZXkkZnJvbSA9PWEsICJ3ZWlnaHQiXSA8LSByb3VuZChza2V5W3NrZXkkZnJvbSA9PWEsICJ3ZWlnaHQiXSAvICNzdW0oc2tleVtza2V5JGZyb209PWEsM10pLDIpCiN9Cgojc2tleQoKc2tleSU+JQpoY2hhcnQoJ3NhbmtleScsbm9kZVdpZHRoPTUwLAogICAgICAgb3BhY2l0eT0xLCBsaW5rT3BhY2l0eT0wLjA1LCBtaW5MaW5rV2lkdGg9MiwKICAgICAgIG5hbWUgPSAiTW92aWxpZGFkIixub2RlUGFkZGluZyA9IDE1LGNsaXA9RkFMU0UsCiAgICAgICBkZXNjcmlwdGlvbiA9ICJob2xhIiklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCByZWxhdGl2YSIKICApJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCmBgYAoKCmBgYHtyfQoKc2tleTwtZGF0YV9tbXNpJT4lCiAgZmlsdGVyKFAxXzE9PTEpJT4lCiAgc2VsZWN0KFAxMl8yLFAxMl8xKSU+JQogIGRhdGFfdG9fc2Fua2V5KCkKCgpmb3IgKGEgaW4gdW5pcXVlKHNrZXkkZnJvbSkpewpza2V5JGZyb21bc2tleSRmcm9tID09IGFdIDwtcGFzdGUoYSwncCcpCn0KCgpza2V5JT4lCmhjaGFydCgnc2Fua2V5Jyxub2RlV2lkdGg9NTAsCiAgICAgICBvcGFjaXR5PTEsIGxpbmtPcGFjaXR5PTAuMDUsIG1pbkxpbmtXaWR0aD0yLAogICAgICAgbmFtZSA9ICJNb3ZpbGlkYWQiLG5vZGVQYWRkaW5nID0gMTUsY2xpcD1GQUxTRSwKICAgICAgIGRlc2NyaXB0aW9uID0gImhvbGEiKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHJlbGF0aXZhIgogICklPiUKICBoY19zdWJ0aXRsZSh0ZXh0ID0gIkhvbWJyZXMiKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKYGBgCgpgYGB7cn0KCnNrZXk8LWRhdGFfbW1zaSU+JQogIGZpbHRlcihQMV8xPT0yKSU+JQogIHNlbGVjdChQMTJfMixQMTJfMSklPiUKICBkYXRhX3RvX3NhbmtleSgpCgoKZm9yIChhIGluIHVuaXF1ZShza2V5JGZyb20pKXsKc2tleSRmcm9tW3NrZXkkZnJvbSA9PSBhXSA8LXBhc3RlKGEsJ3AnKQp9CgoKc2tleSU+JQpoY2hhcnQoJ3NhbmtleScsbm9kZVdpZHRoPTUwLAogICAgICAgb3BhY2l0eT0xLCBsaW5rT3BhY2l0eT0wLjA1LCBtaW5MaW5rV2lkdGg9MiwKICAgICAgIG5hbWUgPSAiTW92aWxpZGFkIixub2RlUGFkZGluZyA9IDE1LGNsaXA9RkFMU0UsCiAgICAgICBkZXNjcmlwdGlvbiA9ICJob2xhIiklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCByZWxhdGl2YSIKICApJT4lCiAgaGNfc3VidGl0bGUodGV4dCA9ICJNdWplcmVzIikgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCmBgYAojIyBQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcG9yIGdydXBvIGRlIGVkYWQgKGRlY2VuYWwpCgpgYGB7cn0KIyBQZXJfU2l0RWNvCmRhdGFfbW1zaSAlPiUKICBjb3VudChFZGFkX0FnMixQZXJfU2l0RWNvKSU+JSAKICBncm91cF9ieShFZGFkX0FnMikgJT4lCiAgbXV0YXRlKGZyZXEgPSByb3VuZCgxMDAgKiBuL3N1bShuKSwgMSkpJT4lCiAgaGNoYXJ0KCdjb2x1bW4nLAogICAgICAgICBoY2FlcyggeSA9ICdmcmVxJywgIGdyb3VwID0gYXNfbGFiZWwoUGVyX1NpdEVjbykpKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIGRlIGFjdWVyZG8gYWwgZ3J1cG8gZGUgZWRhZCIKICApICU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSAiTGFzIGVkYWRlcyBlc3TDoW4gYWdydXBhZGFzIGVuIGludGVydmFsb3MgCiAgICMgICAgICAgICAgIGRlIDEwIGHDsW9zIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIlBvcmNlbnRhamUiKSklPiUKICBoY194QXhpcyh0aXRsZT1saXN0KHRleHQ9IkdydXBvIGRlIGVkYWQiKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkYXRhX21tc2kkRWRhZF9BZzIpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKYGBgCgojIyBQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcG9yIGdydXBvIGRlIGVkYWQgKHF1aW5xdWVuYWwpCgpgYGB7cn0KIyBQZXJfU2l0RWNvCmRhdGFfbW1zaSAlPiUKICBjb3VudChFZGFkX0FnMSxQZXJfU2l0RWNvKSU+JSAKICBncm91cF9ieShFZGFkX0FnMSkgJT4lCiAgbXV0YXRlKGZyZXEgPSByb3VuZCgxMDAgKiBuL3N1bShuKSwgMSkpJT4lCiAgaGNoYXJ0KCdjb2x1bW4nLAogICAgICAgICBoY2FlcyggeSA9ICdmcmVxJywgIGdyb3VwID0gYXNfbGFiZWwoUGVyX1NpdEVjbykpKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIGRlIGFjdWVyZG8gYWwgZ3J1cG8gZGUgZWRhZCIKICApICU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSAiTGFzIGVkYWRlcyBlc3TDoW4gYWdydXBhZGFzIGVuIGludGVydmFsb3MgCiAgICMgICAgICAgICAgIGRlIDUgYcOxb3MiKSAlPiUKICAjIGhjX2NyZWRpdHMoCiAgIyAgZW5hYmxlZCA9IFRSVUUsIHRleHQgPSAiU291cmNlOiBTU1MiLAogICMgIHN0eWxlID0gbGlzdChmb250U2l6ZSA9ICIxMnB4IikpJT4lCiAgaGNfeUF4aXModGl0bGUgPSBsaXN0KHRleHQgPSAiUG9yY2VudGFqZSIpKSU+JQogIGhjX3hBeGlzKHRpdGxlPWxpc3QodGV4dD0iR3J1cG8gZGUgZWRhZCIpLAogICAgICAgICAgIGNhdGVnb3JpZXMgPSBnZXRfbGFiZWxzKGRhdGFfbW1zaSRFZGFkX0FnMSkpICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCgpgYGAKCiMjIFBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBwb3Igbml2ZWwgZGUgZXNjb2xhcmlkYWQKCmBgYHtyfQojIFBlcl9TaXRFY28KCmRhdGFfbW1zaSAlPiUKICBjb3VudChOaXZFc2NfSW5mLFBlcl9TaXRFY28pJT4lIAogIGdyb3VwX2J5KE5pdkVzY19JbmYpICU+JQogIG11dGF0ZShmcmVxID0gcm91bmQoMTAwICogbi9zdW0obiksIDEpKSU+JQogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnZnJlcScsICBncm91cCA9IGFzX2xhYmVsKFBlcl9TaXRFY28pKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBkZSBhY3VlcmRvIGFsIG5pdmVsIGRlIGVzY29sYXJpZGFkIgogICkgJT4lCiAgaGNfc3VidGl0bGUodGV4dCA9ICJFbCBuaXZlbCBkZSBlc2NvbGFyaWRhZCBkZWwgaW5mb3JtYW50ZSIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJQb3JjZW50YWplIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJOaXZlbCBFc2NvbGFyIiksCiAgICAgICAgICAgY2F0ZWdvcmllcyA9IGdldF9sYWJlbHMoZGF0YV9tbXNpJE5pdkVzY19JbmYpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKYGBgCgojIyBQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcG9yIG5pdmVsIGRlIGVzY29sYXJpZGFkIGRlbCBwcm92ZWRvciBwcmluY2lwYWwKCmBgYHtyfQojIFBlcl9TaXRFY28KCmRhdGFfbW1zaSAlPiUKICBjb3VudChOaXZFc2NfUFAyLFBlcl9TaXRFY28pJT4lIAogIGdyb3VwX2J5KE5pdkVzY19QUDIpICU+JQogIG11dGF0ZShmcmVxID0gcm91bmQoMTAwICogbi9zdW0obiksIDEpKSU+JQogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnZnJlcScsICBncm91cCA9IGFzX2xhYmVsKFBlcl9TaXRFY28pKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBkZSBhY3VlcmRvIGFsIG5pdmVsIGRlIGVzY29sYXJpZGFkIgogICkgJT4lCiAgaGNfc3VidGl0bGUodGV4dCA9ICJFbCBuaXZlbCBkZSBlc2NvbGFyaWRhZCBkZWwgcHJvdmVkb3IgcHJpbmNpcGFsIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIlBvcmNlbnRhamUiKSklPiUKICBoY194QXhpcyh0aXRsZT1saXN0KHRleHQ9Ik5pdmVsIEVzY29sYXIiKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkYXRhX21tc2kkTml2RXNjX1BQMikpICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCgpgYGAKCgojIyBQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcG9yIGRpdmlzacOzbiBkZSBvdWNwYWNpw7NuIGRlbCBpbmZvcm1hbnRlCgpgYGB7cn0KIyBQZXJfU2l0RWNvCgoKZGF0YV9tbXNpICU+JQogIGNvdW50KERpdk9jdV9BY3QsUGVyX1NpdEVjbyklPiUgCiAgZ3JvdXBfYnkoRGl2T2N1X0FjdCkgJT4lCiAgbXV0YXRlKGZyZXEgPSByb3VuZCgxMDAgKiBuL3N1bShuKSwgMSkpJT4lCiAgaGNoYXJ0KCdjb2x1bW4nLAogICAgICAgICBoY2FlcyggeSA9ICdmcmVxJywgIGdyb3VwID0gYXNfbGFiZWwoUGVyX1NpdEVjbykpKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIGRlIHBvciBkaXZpc2nDs24gZGUgb2N1cGFjacOzbiIKICApICU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSAiRWwgbml2ZWwgZGUgb2N1YXBjacOzbiBkZWwgaW5mb3JtYW50ZSIpICU+JQogICMgaGNfY3JlZGl0cygKICAjICBlbmFibGVkID0gVFJVRSwgdGV4dCA9ICJTb3VyY2U6IFNTUyIsCiAgIyAgc3R5bGUgPSBsaXN0KGZvbnRTaXplID0gIjEycHgiKSklPiUKICBoY195QXhpcyh0aXRsZSA9IGxpc3QodGV4dCA9ICJQb3JjZW50YWplIikpJT4lCiAgaGNfeEF4aXModGl0bGU9bGlzdCh0ZXh0PSJOaXZlbCBkZSBvY3VhcGNpw7NuIiksCiAgICAgICAgICAgY2F0ZWdvcmllcyA9IGdldF9sYWJlbHMoZGF0YV9tbXNpJERpdk9jdV9BY3QpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKYGBgCgoKIyMgUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHBvciBkaXZpc2nDs24gZGUgYWN1cGFjacOzbiBkZWwgcHJvdmVkb3IgcHJpbmNpcGFsCgpgYGB7cn0KIyBQZXJfU2l0RWNvCgpkYXRhX21tc2kgJT4lCiAgY291bnQoRGl2T2N1X1BQLFBlcl9TaXRFY28pJT4lIAogIGdyb3VwX2J5KERpdk9jdV9QUCkgJT4lCiAgbXV0YXRlKGZyZXEgPSByb3VuZCgxMDAgKiBuL3N1bShuKSwgMSkpJT4lCiAgaGNoYXJ0KCdjb2x1bW4nLAogICAgICAgICBoY2FlcyggeSA9ICdmcmVxJywgIGdyb3VwID0gYXNfbGFiZWwoUGVyX1NpdEVjbykpKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIGRlIHBvciBkaXZpc2nDs24gZGUgb2N1cGFjacOzbiIKICApICU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSAiRWwgbml2ZWwgZGUgb2N1YXBjacOzbiBkZWwgcHJvdmVkb3IgcHJpbmNpcGFsIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIlBvcmNlbnRhamUiKSklPiUKICBoY194QXhpcyh0aXRsZT1saXN0KHRleHQ9Ik5pdmVsIGRlIG9jdWFwY2nDs24iKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkYXRhX21tc2kkRGl2T2N1X1BQKSkgJT4lCiAgICBoY19leHBvcnRpbmcoZW5hYmxlZCA9IFRSVUUsCiAgICAgICAgICAgICAgIGZpbGVuYW1lID0gImRhdG9zIiwKICAgICAgICAgICAgICAgYnV0dG9ucyA9IGxpc3QoY29udGV4dEJ1dHRvbiA9IGxpc3QobWVudUl0ZW1zID0gbXlNZW51SXRlbXMpKSkKCmBgYAoKIyMgUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHBvciBhdXRvZGVzY3JpcGNpw7NuIMOpdG5pY2EKCmBgYHtyfQojIFBlcl9TaXRFY28KCmRhdGFfbW1zaSAlPiUKICBjb3VudChQMTBfMyxQZXJfU2l0RWNvKSU+JSAKICBncm91cF9ieShQMTBfMykgJT4lCiAgbXV0YXRlKGZyZXEgPSByb3VuZCgxMDAgKiBuL3N1bShuKSwgMSkpJT4lCiAgaGNoYXJ0KCdjb2x1bW4nLAogICAgICAgICBoY2FlcyggeSA9ICdmcmVxJywgIGdyb3VwID0gYXNfbGFiZWwoUGVyX1NpdEVjbykpKSU+JQogIGhjX2FkZF90aGVtZShoY190aGVtZV9mZngoKSklPiUKICBoY190aXRsZSgKICAgIHRleHQgPSAiUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIGRlIGFjdWVyZG8gYWwgZ3J1cG8gw6l0bmljbyIKICApICU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSAiIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIlBvcmNlbnRhamUiKSklPiUKICBoY194QXhpcyh0aXRsZT1saXN0KHRleHQ9IkdydXBvIMOpdG5pY28iKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkYXRhX21tc2kkUDEwXzMpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKYGBgCgoKIyMgUGVyY2VwY2nDs24gZGUgbW92aWxpZGFkIHBvciBhdXRvY2xhc2lmaWFjacOzbiBkZSBjb2xvciBkZSBwaWVsCgpgYGB7cn0KIyBQZXJfU2l0RWNvCgpkYXRhX21tc2kgJT4lCiAgY291bnQoUDEwXzIsUGVyX1NpdEVjbyklPiUgCiAgZ3JvdXBfYnkoUDEwXzIpICU+JQogIG11dGF0ZShmcmVxID0gcm91bmQoMTAwICogbi9zdW0obiksIDApKSU+JQogIGhjaGFydCgnY29sdW1uJywKICAgICAgICAgaGNhZXMoIHkgPSAnZnJlcScsICBncm91cCA9IGFzX2xhYmVsKFBlcl9TaXRFY28pKSklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCBkZSBhY3VlcmRvIGFsIGNvbG9yIGRlIHBpZWwiCiAgKSAlPiUKICBoY19zdWJ0aXRsZSh0ZXh0ID0gIlBhcmEgZWwgY29sb3IgZGUgcGllbCBzZSByZXZpc2EgbGEgZXNjYWxhIikgJT4lCiAgIyBoY19jcmVkaXRzKAogICMgIGVuYWJsZWQgPSBUUlVFLCB0ZXh0ID0gIlNvdXJjZTogU1NTIiwKICAjICBzdHlsZSA9IGxpc3QoZm9udFNpemUgPSAiMTJweCIpKSU+JQogIGhjX3lBeGlzKHRpdGxlID0gbGlzdCh0ZXh0ID0gIlBvcmNlbnRhamUiKSklPiUKICBoY194QXhpcyh0aXRsZT1saXN0KHRleHQ9IkNvbG9yIGRlIHBpZWwiKSwKICAgICAgICAgICBjYXRlZ29yaWVzID0gZ2V0X2xhYmVscyhkYXRhX21tc2kkUDEwXzIpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKYGBgCgoKIyMgTW92aWxpZGFkIHBvciBlbnRpZGFkIGZlZGVyYXRpdmEKCmBgYHtyfQoKbW92X2VzdGFkbzwtZnVuY3Rpb24oYV8pewogIHNrZXk8LWRhdGFfbW1zaSU+JQogIGZpbHRlcihlbnRfRU5IPT1hXyklPiUKICBzZWxlY3QoUDEyXzIsUDEyXzEpJT4lCiAgZGF0YV90b19zYW5rZXkoKQoKZm9yIChhIGluIHVuaXF1ZShza2V5JGZyb20pKXsKc2tleSRmcm9tW3NrZXkkZnJvbSA9PSBhXSA8LXBhc3RlKGEsJ3AnKQp9Cgpmb3IgKGEgaW4gdW5pcXVlKHNrZXkkdG8pKXsKc2tleSR0b1tza2V5JHRvID09IGFdIDwtcGFzdGUoYSwnaCcpCn0KICAKc2tleSU+JQpoY2hhcnQoJ3NhbmtleScsbm9kZVdpZHRoPTUwLAogICAgICAgb3BhY2l0eT0xLCBsaW5rT3BhY2l0eT0wLjA1LCBtaW5MaW5rV2lkdGg9MiwKICAgICAgIG5hbWUgPSAiTW92aWxpZGFkIixub2RlUGFkZGluZyA9IDE1LGNsaXA9RkFMU0UsCiAgICAgICBkZXNjcmlwdGlvbiA9ICJob2xhIiklPiUKICBoY19hZGRfdGhlbWUoaGNfdGhlbWVfZmZ4KCkpJT4lCiAgaGNfdGl0bGUoCiAgICB0ZXh0ID0gIlBlcmNlcGNpw7NuIGRlIG1vdmlsaWRhZCByZWxhdGl2YSIKICApJT4lCiAgIGhjX3N1YnRpdGxlKHRleHQgPSBnZXRfbGFiZWxzKGRhdGFfbW1zaSRlbnRfRU5IKVthcy5pbnRlZ2VyKGFfKV0pICU+JQogICAgaGNfZXhwb3J0aW5nKGVuYWJsZWQgPSBUUlVFLAogICAgICAgICAgICAgICBmaWxlbmFtZSA9ICJkYXRvcyIsCiAgICAgICAgICAgICAgIGJ1dHRvbnMgPSBsaXN0KGNvbnRleHRCdXR0b24gPSBsaXN0KG1lbnVJdGVtcyA9IG15TWVudUl0ZW1zKSkpCn0KCm1vdl9lc3RhZG9faDwtZnVuY3Rpb24oYV8pewoKc2tleTwtZGF0YV9tbXNpJT4lCiAgZmlsdGVyKFAxXzE9PTEgJiBlbnRfRU5IPT1hXyApJT4lCiAgc2VsZWN0KFAxMl8yLFAxMl8xKSU+JQogIGRhdGFfdG9fc2Fua2V5KCkKCgpmb3IgKGEgaW4gdW5pcXVlKHNrZXkkZnJvbSkpewpza2V5JGZyb21bc2tleSRmcm9tID09IGFdIDwtcGFzdGUoYSwncCcpCn0KCmZvciAoYSBpbiB1bmlxdWUoc2tleSR0bykpewpza2V5JHRvW3NrZXkkdG8gPT0gYV0gPC1wYXN0ZShhLCdoJykKfQoKCnNrZXklPiUKaGNoYXJ0KCdzYW5rZXknLG5vZGVXaWR0aD01MCwKICAgICAgIG9wYWNpdHk9MSwgbGlua09wYWNpdHk9MC4wNSwgbWluTGlua1dpZHRoPTIsCiAgICAgICBuYW1lID0gIk1vdmlsaWRhZCIsbm9kZVBhZGRpbmcgPSAxNSxjbGlwPUZBTFNFLAogICAgICAgZGVzY3JpcHRpb24gPSAiaG9sYSIpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcmVsYXRpdmEiCiAgKSU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSBwYXN0ZShnZXRfbGFiZWxzKGRhdGFfbW1zaSRlbnRfRU5IKVthcy5pbnRlZ2VyKGFfKV0sIkhvbWJyZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICBzZXAgPSI6ICIpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQoKfQoKbW92X2VzdGFkb19tPC1mdW5jdGlvbihhXyl7CnNrZXk8LWRhdGFfbW1zaSU+JQogIGZpbHRlcihQMV8xPT0yICYgZW50X0VOSD09YV8gKSU+JQogIHNlbGVjdChQMTJfMixQMTJfMSklPiUKICBkYXRhX3RvX3NhbmtleSgpCgoKZm9yIChhIGluIHVuaXF1ZShza2V5JGZyb20pKXsKc2tleSRmcm9tW3NrZXkkZnJvbSA9PSBhXSA8LXBhc3RlKGEsJ3AnKQp9Cgpmb3IgKGEgaW4gdW5pcXVlKHNrZXkkdG8pKXsKc2tleSR0b1tza2V5JHRvID09IGFdIDwtcGFzdGUoYSwnaCcpCn0KCnNrZXklPiUKaGNoYXJ0KCdzYW5rZXknLG5vZGVXaWR0aD01MCwKICAgICAgIG9wYWNpdHk9MSwgbGlua09wYWNpdHk9MC4wNSwgbWluTGlua1dpZHRoPTIsCiAgICAgICBuYW1lID0gIk1vdmlsaWRhZCIsbm9kZVBhZGRpbmcgPSAxNSxjbGlwPUZBTFNFLAogICAgICAgZGVzY3JpcHRpb24gPSAiaG9sYSIpJT4lCiAgaGNfYWRkX3RoZW1lKGhjX3RoZW1lX2ZmeCgpKSU+JQogIGhjX3RpdGxlKAogICAgdGV4dCA9ICJQZXJjZXBjacOzbiBkZSBtb3ZpbGlkYWQgcmVsYXRpdmEiCiAgKSU+JQogIGhjX3N1YnRpdGxlKHRleHQgPSBwYXN0ZShnZXRfbGFiZWxzKGRhdGFfbW1zaSRlbnRfRU5IKVthcy5pbnRlZ2VyKGFfKV0sIk11amVyZXMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICBzZXAgPSI6ICIpKSAlPiUKICAgIGhjX2V4cG9ydGluZyhlbmFibGVkID0gVFJVRSwKICAgICAgICAgICAgICAgZmlsZW5hbWUgPSAiZGF0b3MiLAogICAgICAgICAgICAgICBidXR0b25zID0gbGlzdChjb250ZXh0QnV0dG9uID0gbGlzdChtZW51SXRlbXMgPSBteU1lbnVJdGVtcykpKQp9Cgptb3ZfZXN0YWRvKCIwMSIpCm1vdl9lc3RhZG9faCgiMDEiKQptb3ZfZXN0YWRvX20oIjAxIikKCm1vdl9lc3RhZG8oIjAyIikKbW92X2VzdGFkb19oKCIwMiIpCm1vdl9lc3RhZG9fbSgiMDIiKQoKbW92X2VzdGFkbygiMDMiKQptb3ZfZXN0YWRvX2goIjAzIikKbW92X2VzdGFkb19tKCIwMyIpCgptb3ZfZXN0YWRvKCIwNCIpCm1vdl9lc3RhZG9faCgiMDQiKQptb3ZfZXN0YWRvX20oIjA0IikKCm1vdl9lc3RhZG8oIjA1IikKbW92X2VzdGFkb19oKCIwNSIpCm1vdl9lc3RhZG9fbSgiMDUiKQoKCmBgYAoKCiMgRmlsdHJhZG8gZGUgZGF0b3MgZGUgbG9zIGhpam9zCgpTZWxlY2Npw7NuIGRlIHZhcmlhYmxlcyBkZSBsb3MgaGlqb3MgcGFyYSBzdSBtYXBlbyBhIGVuaWctMjAxNi4KCmBgYHtyfQp2YXI8LWMoKQoKI0ZvbGlvdml2IC0+IGRpZmVyZW50ZSAKI0ZvbGlvaG9nIC0+IGRpZmVyZW50ZQojSWRfcG9ibGEgLT4gZGlmZXJlbnRlCiNlbnRfRU5IIC0+ICBjdWFscXVpZXJhIDIgZGlnaXRvcyBkZSBGb2xpb3ZpdiAocHJpbWVyb3MpCiNlc3Rfc29jaW9fRU5IIC0+IHZpdmllbmRhcyBlc3Rfc29jaW8KdmFyZyA8LSBjKCJGb2xpb3ZpdiIsIkZvbGlvaG9nIiwiSWRfcG9ibGEiLCJlbnRfRU5IIiwiZXN0X3NvY2lvX0VOSCIpCnZhciA8LWModmFyLCB2YXJnKQoKCiNQMV8xIC0+IHBvYmxhY2lvbiBzZXhvCiNQMV8yIC0+IHBvYmxhY2lvbiBlZGFkCiNQMV8zIC0+IHBvYmxhY2lvbiBwYXJlbnRlc2NvCnZhcmlkIDwtIGMoIlAxXzEiLCJQMV8yIiwiUDFfMyIpCnZhciA8LSBjKHZhcix2YXJpZCkKCgoKCiNQOF8zTiAtPiBwb2JsYWNpb24gbml2ZWxhcHJvYiAjNDEKI1A4XzNHIC0+IHBvYmxhY2lvbiBncmFkb2Fwcm9iICMjIzQyIHBlbmRpZW50ZSBwYXJhIGFmaW5hciBsYSBlZHVjYWNpw7NuCnZhcmVkdSA8LSBjKCJQOF8zTiIpCnZhciA8LSBjKHZhciwgdmFyZWR1KQoKCgojUDlfMS0+IHBvYmxhY2lvbiBlZG9fY29ueXVnICM0NQp2YXJjb255PC0gYygiUDlfMSIpCnZhcjwtYyh2YXIsdmFyY29ueSkKCiNQMTFfMV8xLT4gaG9nYXJlcyBudW1fcGlja3VwICAjNDMKI1AxMV8xXzItPiBob2dhcmVzIG51bV92YW4gICM0MgojUDExXzFfMy0+IGhvZ2FyZXMgbnVtX2F1dG8gICM0MAp2YXJhdXRvczwtYygiUDExXzFfMSIsIlAxMV8xXzIiLCJQMTFfMV8zIikKdmFyPC1jKHZhcix2YXJhdXRvcykKCgojI1AxMV8yIHkgUDExXzMgPC0gdml2aWVuZGFzIHRlbmVuY2lhICMyOAp2YXJ2aXY8LWMoIlAxMV8yIiwiUDExXzMiKQp2YXI8LWModmFyLHZhcnZpdikKCiMjUDExXzRfCgoKIyNQMTFfNV8yIHkgUF8xMV81XzMgICA8LSBob2dhcmVzIHRhcmpldGEgIzExNgp2YXJ0YXI8LWMoIlAxMV81XzIiLCJQMTFfNV8zIikKdmFyPC1jKHZhcix2YXJ0YXIpCgojUDExXzYgPC0gZ2FzdG9zaG9nYXJlcyBjbGF2ZSBDMDIwIAp2YXJkb2M8LWMoIlAxMV82IikKdmFyPC1jKHZhcix2YXJkb2MpCgoKCiNQMTFfN18xPC0gaG9nYXJlcyB0ZWxlZm9ubyAjMzYKI1AxMV83XzI8LSBob2dhcmVzIGNlbHVsYXIgIzM3CiNQMTFfN18zPC0gaG9nYXJlcyB0dl9wYWdhICMzOAojUDExXzdfNDwtIGhvZ2FyZXMgY29uZXhfaW50ZSAjMzkKI1AxMV83XzU8LSBob2dhcmVzIG51bV9lc3RlciwgbnVtX2dyYWIsIG51bV9yYWRpbyAjNTgsNjAsNjIKI1AxMV83XzY8LSBob2dhcmVzIG51bV90dmQgIzY3CiNQMTFfN183PC0gaG9nYXJlcyBudW1fZHZkICM2OAojUDExXzdfODwtIGhvZ2FyZXMgbnVtX2xpY3VhICMgNzIKI1AxMV83Xzk8LSBob2dhcmVzIG51bV90b3N0YSAjIDc0CiNQMTFfN18xMDwtIGhvZ2FyZXMgbnVtX21pY3JvICMgNzYKI1AxMV83XzExPC0gaG9nYXJlcyBudW1fcmVmcmkgIyA3OAojUDExXzdfMTI8LSBob2dhcmVzIG51bV9lc3R1ZiAjIDgwCiNQMTFfN18xMzwtIGhvZ2FyZXMgbnVtX2xhdmFkICMgODIKI1AxMV83XzE0PC0gaG9nYXJlcyBudW1fcGxhbmMgIyA4NAojUDExXzdfMTU8LSBob2dhcmVzIG51bV9tYXF1aSAjIDg2CiNQMTFfN18xNjwtIGhvZ2FyZXMgbnVtX3ZlbnRpICMgODgKI1AxMV83XzE3PC0gaG9nYXJlcyBudW1fanVlZ28gIyA5NgojIyMjI1AxMV83XzE4PC0gbm8gdGVuZW1vcyB0YWJsZXRhcwojUDExXzdfMTk8LSBob2dhcmVzIG51bV9jb21wdSAjIDkyCiNQMTFfN18yMDwtIGhvZ2FyZXMgbnVtX2ltcHJlICMgOTQKIyMjI1AxMV83XzIxPC0gYW5pbWFsZXMgZGUgdHJiYWpvIG5vIHNlIGFncmVnYXJvbgojIyMjUDExXzdfMjI8LSBnYW5hbmRvIG5vIHNlIGFncmVnYXJvbgp2YXJob2c8LWMoIlAxMV83XzEiLCJQMTFfN18yIiwiUDExXzdfMyIsIlAxMV83XzQiLCJQMTFfN181IiwiUDExXzdfNiIsCiAgICAgICAgICAiUDExXzdfNyIsIlAxMV83XzgiLCJQMTFfN185IiwiUDExXzdfMTAiLCJQMTFfN18xMSIsIlAxMV83XzEyIiwKICAgICAgICAgICJQMTFfN18xMyIsIlAxMV83XzE0IiwiUDExXzdfMTUiLCJQMTFfN18xNiIsIlAxMV83XzE3IiwiUDExXzdfMTkiLAogICAgICAgICAgIlAxMV83XzIwIikKdmFyPC1jKHZhcix2YXJob2cpCgoKIyMjIyMgVmFyaWFibGVzIGNyZWFkYXMKCiMgQ29uZGljacOzbiBkZSBvY3VwYWNpw7NuIGRlbCBpbmZvcm1hbnRlLCBBY3R1YWwKIyBDb25PY3VfQWN0IDwtIE5vcyBxdWVkYW1zbyBjb25zIGxvcyBvY3VwYWRvcyAxCgojIERpdmlzacOzbiBwcmluY2lwYWwgZGUgb2N1cGFjacOzbiBkZWwgaW5mb3JtYW50ZQojIERpdk9jdV9BY3QgPC0gdHJhYmFqb3Mgc2luY28KCgojIE5pdmVsIGRlIGVzY29sYXJpZGFkIGRlbCBpbmZvcm1hbnRlCiMgTml2RXNjX0luZiA8LSBjb25jZW50cmFkb2hvZ2FyIGVkdWNhX2plZmUgIzEyCgp2YXJ2YzwtYygiRWRhZF9BZzIiLCJFZGFkX0FnMSIsIk5pdkVzY19JbmYiLCJDb25PY3VfQWN0IiwgIkRpdk9jdV9BY3QiKQp2YXIgPC0gYyh2YXIsdmFydmMpCgoKCgpmaWx0cmFkb192YXJfaGlqb3MgPC0gZnVuY3Rpb24oZGYsdmFyKXsKICBkZm48LSBkZiAlPiUKICAgICAgICBzZWxlY3QoYWxsX29mKHZhcikpCiAgcmV0dXJuKGRmbikKfQpgYGAKClNlbGVjY2lvbmFtb3M6CgotIEVudGlkYWQgRmVkZXJhdGl2YSAoZW50X0VOSCwgZW4gY3VhbHF1aWVyYSBlbmlnaCAyIGRpZ2l0b3MgZGVsIGZvbGlvIGRlIHZpdmllbmRhKQotIEVzdHJhdG8gc29jaWVjb27Ds21pY28gKGVzdF9zb2Npb19FTkggdml2aWVuZGFzLCB2aXZpZW5kYXMgZXN0X3NvYykKLSBTZXhvIChQMV8xLCBwb2JsYWNpb24gc2V4bykKLSBFZGFkIChQMV8yLCBwb2JsYWNpb24gZWRhZCkKLSBQYXJlbnRlc2NvIChQMV8zLCBwb2JsYWNpb24gcGFyZW50ZXNjbykKLSBOaXZlbCBkZSBlZHVjYWNpw7NuIGluZm9ybWFudGUsIChOaXZFc2NfSW5mLCBjb25jZW50cmFkb2hvZ2FyIGVkdWNhX2plZmUpCi0gRGl2aXNpb24gZGUgb2N1YXBjacOzbiBkZWwgaW5mb3JtYW50ZSAoRGl2T2N1X0FjdCwgdHJhYmFqb3Mgc2luY28pCgpgYGB7cn0KdmFyaSA8LSBjKCJlbnRfRU5IIiwgImVzdF9zb2Npb19FTkgiLCAiUDFfMSIsCiAgICAgICAgICAiUDFfMiIsIlAxXzMiLCJOaXZFc2NfSW5mIiwiRGl2T2N1X0FjdCIpCmRhdGFfbW1zaSA8LWNhcmdhcl9tbXNpKCkKaGlqb3M8LWZpbHRyYWRvX3Zhcl9oaWpvcyhkYXRhX21tc2ksdmFyaSkKCiMgamVmZXMgZGUgZmFtaWxpYQpoaWpvczwtaGlqb3MlPiUKICBmaWx0ZXIoUDFfMz09IjEiKQpucm93KGhpam9zKQpzYXZlUkRTKGhpam9zLCBmaWxlPSJEYXRvcy9oaWpvc19tbXNpLlJkYSIpCmBgYAoKYGBge3J9CmdyYV9zZXhfZXN0KGhpam9zKQoKYGBgCgoKClRvbWFtb3MgYWwgZW50cmV2aXN0YWRvIHF1ZSBlcyBlbCBqZWZlIGRlIGhvZ2FyLCBsbyBjdWFsIG5vcyBkYSB1biB0b3RhbCBkZSBfMTI3MDZfIG9ic2VydmFjaW9uZXMgKGFwcm94aW1hZGFtZW50ZSAxLjUgZWwgbsO6bWVybyB0b3RhbCBkZSBFU1JVLTIwMTcpCgpgYGB7cn0KCiMgUDFfMzogwr9RdcOpIGVzIHVzdGVkIGRlbCBqZWZlIGRlbCBob2dhcj8KIyAxIGplZmUKIyAyIEVzcGFzQCBjb21wYcOxZXJhQAoKZmlsdHJhZG9fY2FyYWMgPC0gZnVuY3Rpb24oZGYpeyAKICAgICAgICBkZm48LSBkZiU+JQogICAgICAgICAgICAgIGZpbHRlcihQMV8zPT0iMSIpCiAgICAgICAgcmV0dXJuKGRmbikKfQoKCmE8LWZpbHRyYWRvX3Zhcl9oaWpvcyhkYXRhX21tc2ksdmFyaSkKCmNhcmFjX2ZpbDwtIGZpbHRyYWRvX2NhcmFjKGEpCmhlYWQoY2FyYWNfZmlsKQpgYGAKCgpob2xhCgpgYGB7ciwgZXZhbD1GQUxTRX0KI2dldF9sYWJlbChkYXRhX21tc2lbYyh2YXIpXSkKI2dldF9sYWJlbHMoZGF0YV9tbXNpW2ModmFyKV0pCmBgYAoKCgoKIyMgR3LDoWZpY2EgdG90YWwgcG9yIGVzdGFkbwoKYGBge3J9CmdyYV90b2xfZXN0KGNhcmFjX2ZpbCkgCmBgYAoKIyMgR3LDoWZpY2EgcG9yIGVzdGFkbyB5IHNleG8KCmBgYHtyfQpncmFfc2V4X2VzdChjYXJhY19maWwpCmBgYAojIyBHcsOhZmljYSBwb3Igc2V4byB5IGVkdWNhY2nDs24gCgpgYGB7cn0KZ3JhX3NleF9lZHUoZGF0YV9tbXNpKQpgYGAKCiMgUmVjb25vY2ltaWVudG8gZGUgcGFkcmVzCgpUb21hbW9zIGEgbG9zIHBhZHJlcyBwYXJhIGxvcyBjdWFsZXMgdGVtZW5vc21vcyBlbCBpbmdyZXNvIGRlbCBoaWpvCgpgYGB7cn0KcGFkcmVzX2g8LWRhdGFfbW1zaSU+JQogIGZpbHRlcihQMV8zPT0iMSIpJT4lCiAgc2xpY2UoYXMuaW50ZWdlcih1bmxpc3QoaW5ncmVfaGlqX2YlPiVzZWxlY3QoaWRfaGlqbykpKSklPiUKICBtdXRhdGUoaWRfaGlqbyA9YXMudmVjdG9yKGluZ3JlX2hpal9mJT4lc2VsZWN0KGlkX2hpam8pICkpCgpwYWRyZXNfaAoKdW5pcXVlKHBhZHJlc19oJFAxXzMpCm5yb3cocGFkcmVzX2gpCnBhZHJlc19oJGlkX2hpam8KYGBgCgpmaWx0cmFtb3MgbGFzIHZhcmlhYmxlcyBkZSBsb3MgcGFkcmVzIAoKLSBFc3RhZG8gZGUgcmVzaWRlbmNpYSBwcCBQMl8xRVNUX0QKLSBJZGVudGlmaWNhY2nDs24gcHJvdmVkb3IgcHJpY2lwYWwgUDJfNQotIE5JdmVsIGRlIGVzY29sYXJpZGFkIGRlbCBwYWRyZSBQM181TgoKLSBFc2NvbGFyaWRhZCBwcCBOaXZFc2NfUFAgKG5pdmVsKQotIE9jdXBhY2nDs24gcHAgRGl2T2N1X1BQIChzaW5jbykKCmBgYHtyfQp2YXJwaDwtYygiUDJfMUVTVF9EIiwiUDJfNSIsIlAzXzVOIiwgIk5pdkVzY19QUCIsIkRpdk9jdV9QUCIsImlkX2hpam8iKQpwYWRyZXNfaHY8LSBwYWRyZXNfaCU+JQogICAgICAgICAgICBzZWxlY3QoYWxsX29mKHZhcnBoKSkKCnBhZHJlc19odiREaXZPY3VfUFAKYGBgCgoKCgo=</div>


</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("MMSI2016.Rmd");
  window.initializeCodeFolding("show" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
